// /root/.xbmc/addons/service.downloadmanager.InternetPVR/CouchPotatoServer/couchpotato/static/scripts/library/mootools.js:1401311743
(function(){this.MooTools={version:'1.4.5',build:'ab8ea8824dc3b24b6666867a2c4ed58ebb762cf0'};var typeOf=this.typeOf=function(item){if(item==null)return'null';if(item.$family!=null)return item.$family();if(item.nodeName){if(item.nodeType==1)return'element';if(item.nodeType==3)return(/\S/).test(item.nodeValue)?'textnode':'whitespace';}else if(typeof item.length=='number'){if(item.callee)return'arguments';if('item'in item)return'collection';}
return typeof item;};var instanceOf=this.instanceOf=function(item,object){if(item==null)return false;var constructor=item.$constructor||item.constructor;while(constructor){if(constructor===object)return true;constructor=constructor.parent;}
if(!item.hasOwnProperty)return false;return item instanceof object;};var Function=this.Function;var enumerables=true;for(var i in{toString:1})enumerables=null;if(enumerables)enumerables=['hasOwnProperty','valueOf','isPrototypeOf','propertyIsEnumerable','toLocaleString','toString','constructor'];Function.prototype.overloadSetter=function(usePlural){var self=this;return function(a,b){if(a==null)return this;if(usePlural||typeof a!='string'){for(var k in a)self.call(this,k,a[k]);if(enumerables)for(var i=enumerables.length;i--;){k=enumerables[i];if(a.hasOwnProperty(k))self.call(this,k,a[k]);}}else{self.call(this,a,b);}
return this;};};Function.prototype.overloadGetter=function(usePlural){var self=this;return function(a){var args,result;if(typeof a!='string')args=a;else if(arguments.length>1)args=arguments;else if(usePlural)args=[a];if(args){result={};for(var i=0;i<args.length;i++)result[args[i]]=self.call(this,args[i]);}else{result=self.call(this,a);}
return result;};};Function.prototype.extend=function(key,value){this[key]=value;}.overloadSetter();Function.prototype.implement=function(key,value){this.prototype[key]=value;}.overloadSetter();var slice=Array.prototype.slice;Function.from=function(item){return(typeOf(item)=='function')?item:function(){return item;};};Array.from=function(item){if(item==null)return[];return(Type.isEnumerable(item)&&typeof item!='string')?(typeOf(item)=='array')?item:slice.call(item):[item];};Number.from=function(item){var number=parseFloat(item);return isFinite(number)?number:null;};String.from=function(item){return item+'';};Function.implement({hide:function(){this.$hidden=true;return this;},protect:function(){this.$protected=true;return this;}});var Type=this.Type=function(name,object){if(name){var lower=name.toLowerCase();var typeCheck=function(item){return(typeOf(item)==lower);};Type['is'+name]=typeCheck;if(object!=null){object.prototype.$family=(function(){return lower;}).hide();}}
if(object==null)return null;object.extend(this);object.$constructor=Type;object.prototype.$constructor=object;return object;};var toString=Object.prototype.toString;Type.isEnumerable=function(item){return(item!=null&&typeof item.length=='number'&&toString.call(item)!='[object Function]');};var hooks={};var hooksOf=function(object){var type=typeOf(object.prototype);return hooks[type]||(hooks[type]=[]);};var implement=function(name,method){if(method&&method.$hidden)return;var hooks=hooksOf(this);for(var i=0;i<hooks.length;i++){var hook=hooks[i];if(typeOf(hook)=='type')implement.call(hook,name,method);else hook.call(this,name,method);}
var previous=this.prototype[name];if(previous==null||!previous.$protected)this.prototype[name]=method;if(this[name]==null&&typeOf(method)=='function')extend.call(this,name,function(item){return method.apply(item,slice.call(arguments,1));});};var extend=function(name,method){if(method&&method.$hidden)return;var previous=this[name];if(previous==null||!previous.$protected)this[name]=method;};Type.implement({implement:implement.overloadSetter(),extend:extend.overloadSetter(),alias:function(name,existing){implement.call(this,name,this.prototype[existing]);}.overloadSetter(),mirror:function(hook){hooksOf(this).push(hook);return this;}});new Type('Type',Type);var force=function(name,object,methods){var isType=(object!=Object),prototype=object.prototype;if(isType)object=new Type(name,object);for(var i=0,l=methods.length;i<l;i++){var key=methods[i],generic=object[key],proto=prototype[key];if(generic)generic.protect();if(isType&&proto)object.implement(key,proto.protect());}
if(isType){var methodsEnumerable=prototype.propertyIsEnumerable(methods[0]);object.forEachMethod=function(fn){if(!methodsEnumerable)for(var i=0,l=methods.length;i<l;i++){fn.call(prototype,prototype[methods[i]],methods[i]);}
for(var key in prototype)fn.call(prototype,prototype[key],key)};}
return force;};force('String',String,['charAt','charCodeAt','concat','indexOf','lastIndexOf','match','quote','replace','search','slice','split','substr','substring','trim','toLowerCase','toUpperCase'])('Array',Array,['pop','push','reverse','shift','sort','splice','unshift','concat','join','slice','indexOf','lastIndexOf','filter','forEach','every','map','some','reduce','reduceRight'])('Number',Number,['toExponential','toFixed','toLocaleString','toPrecision'])('Function',Function,['apply','call','bind'])('RegExp',RegExp,['exec','test'])('Object',Object,['create','defineProperty','defineProperties','keys','getPrototypeOf','getOwnPropertyDescriptor','getOwnPropertyNames','preventExtensions','isExtensible','seal','isSealed','freeze','isFrozen'])('Date',Date,['now']);Object.extend=extend.overloadSetter();Date.extend('now',function(){return+(new Date);});new Type('Boolean',Boolean);Number.prototype.$family=function(){return isFinite(this)?'number':'null';}.hide();Number.extend('random',function(min,max){return Math.floor(Math.random()*(max-min+1)+min);});var hasOwnProperty=Object.prototype.hasOwnProperty;Object.extend('forEach',function(object,fn,bind){for(var key in object){if(hasOwnProperty.call(object,key))fn.call(bind,object[key],key,object);}});Object.each=Object.forEach;Array.implement({forEach:function(fn,bind){for(var i=0,l=this.length;i<l;i++){if(i in this)fn.call(bind,this[i],i,this);}},each:function(fn,bind){Array.forEach(this,fn,bind);return this;}});var cloneOf=function(item){switch(typeOf(item)){case'array':return item.clone();case'object':return Object.clone(item);default:return item;}};Array.implement('clone',function(){var i=this.length,clone=new Array(i);while(i--)clone[i]=cloneOf(this[i]);return clone;});var mergeOne=function(source,key,current){switch(typeOf(current)){case'object':if(typeOf(source[key])=='object')Object.merge(source[key],current);else source[key]=Object.clone(current);break;case'array':source[key]=current.clone();break;default:source[key]=current;}
return source;};Object.extend({merge:function(source,k,v){if(typeOf(k)=='string')return mergeOne(source,k,v);for(var i=1,l=arguments.length;i<l;i++){var object=arguments[i];for(var key in object)mergeOne(source,key,object[key]);}
return source;},clone:function(object){var clone={};for(var key in object)clone[key]=cloneOf(object[key]);return clone;},append:function(original){for(var i=1,l=arguments.length;i<l;i++){var extended=arguments[i]||{};for(var key in extended)original[key]=extended[key];}
return original;}});['Object','WhiteSpace','TextNode','Collection','Arguments'].each(function(name){new Type(name);});var UID=Date.now();String.extend('uniqueID',function(){return(UID++).toString(36);});})();Array.implement({every:function(fn,bind){for(var i=0,l=this.length>>>0;i<l;i++){if((i in this)&&!fn.call(bind,this[i],i,this))return false;}
return true;},filter:function(fn,bind){var results=[];for(var value,i=0,l=this.length>>>0;i<l;i++)if(i in this){value=this[i];if(fn.call(bind,value,i,this))results.push(value);}
return results;},indexOf:function(item,from){var length=this.length>>>0;for(var i=(from<0)?Math.max(0,length+from):from||0;i<length;i++){if(this[i]===item)return i;}
return-1;},map:function(fn,bind){var length=this.length>>>0,results=Array(length);for(var i=0;i<length;i++){if(i in this)results[i]=fn.call(bind,this[i],i,this);}
return results;},some:function(fn,bind){for(var i=0,l=this.length>>>0;i<l;i++){if((i in this)&&fn.call(bind,this[i],i,this))return true;}
return false;},clean:function(){return this.filter(function(item){return item!=null;});},invoke:function(methodName){var args=Array.slice(arguments,1);return this.map(function(item){return item[methodName].apply(item,args);});},associate:function(keys){var obj={},length=Math.min(this.length,keys.length);for(var i=0;i<length;i++)obj[keys[i]]=this[i];return obj;},link:function(object){var result={};for(var i=0,l=this.length;i<l;i++){for(var key in object){if(object[key](this[i])){result[key]=this[i];delete object[key];break;}}}
return result;},contains:function(item,from){return this.indexOf(item,from)!=-1;},append:function(array){this.push.apply(this,array);return this;},getLast:function(){return(this.length)?this[this.length-1]:null;},getRandom:function(){return(this.length)?this[Number.random(0,this.length-1)]:null;},include:function(item){if(!this.contains(item))this.push(item);return this;},combine:function(array){for(var i=0,l=array.length;i<l;i++)this.include(array[i]);return this;},erase:function(item){for(var i=this.length;i--;){if(this[i]===item)this.splice(i,1);}
return this;},empty:function(){this.length=0;return this;},flatten:function(){var array=[];for(var i=0,l=this.length;i<l;i++){var type=typeOf(this[i]);if(type=='null')continue;array=array.concat((type=='array'||type=='collection'||type=='arguments'||instanceOf(this[i],Array))?Array.flatten(this[i]):this[i]);}
return array;},pick:function(){for(var i=0,l=this.length;i<l;i++){if(this[i]!=null)return this[i];}
return null;},hexToRgb:function(array){if(this.length!=3)return null;var rgb=this.map(function(value){if(value.length==1)value+=value;return value.toInt(16);});return(array)?rgb:'rgb('+rgb+')';},rgbToHex:function(array){if(this.length<3)return null;if(this.length==4&&this[3]==0&&!array)return'transparent';var hex=[];for(var i=0;i<3;i++){var bit=(this[i]-0).toString(16);hex.push((bit.length==1)?'0'+bit:bit);}
return(array)?hex:'#'+hex.join('');}});String.implement({test:function(regex,params){return((typeOf(regex)=='regexp')?regex:new RegExp(''+regex,params)).test(this);},contains:function(string,separator){return(separator)?(separator+this+separator).indexOf(separator+string+separator)>-1:String(this).indexOf(string)>-1;},trim:function(){return String(this).replace(/^\s+|\s+$/g,'');},clean:function(){return String(this).replace(/\s+/g,' ').trim();},camelCase:function(){return String(this).replace(/-\D/g,function(match){return match.charAt(1).toUpperCase();});},hyphenate:function(){return String(this).replace(/[A-Z]/g,function(match){return('-'+match.charAt(0).toLowerCase());});},capitalize:function(){return String(this).replace(/\b[a-z]/g,function(match){return match.toUpperCase();});},escapeRegExp:function(){return String(this).replace(/([-.*+?^${}()|[\]\/\\])/g,'\\$1');},toInt:function(base){return parseInt(this,base||10);},toFloat:function(){return parseFloat(this);},hexToRgb:function(array){var hex=String(this).match(/^#?(\w{1,2})(\w{1,2})(\w{1,2})$/);return(hex)?hex.slice(1).hexToRgb(array):null;},rgbToHex:function(array){var rgb=String(this).match(/\d{1,3}/g);return(rgb)?rgb.rgbToHex(array):null;},substitute:function(object,regexp){return String(this).replace(regexp||(/\\?\{([^{}]+)\}/g),function(match,name){if(match.charAt(0)=='\\')return match.slice(1);return(object[name]!=null)?object[name]:'';});}});Function.extend({attempt:function(){for(var i=0,l=arguments.length;i<l;i++){try{return arguments[i]();}catch(e){}}
return null;}});Function.implement({attempt:function(args,bind){try{return this.apply(bind,Array.from(args));}catch(e){}
return null;},bind:function(that){var self=this,args=arguments.length>1?Array.slice(arguments,1):null,F=function(){};var bound=function(){var context=that,length=arguments.length;if(this instanceof bound){F.prototype=self.prototype;context=new F;}
var result=(!args&&!length)?self.call(context):self.apply(context,args&&length?args.concat(Array.slice(arguments)):args||arguments);return context==that?result:context;};return bound;},pass:function(args,bind){var self=this;if(args!=null)args=Array.from(args);return function(){return self.apply(bind,args||arguments);};},delay:function(delay,bind,args){return setTimeout(this.pass((args==null?[]:args),bind),delay);},periodical:function(periodical,bind,args){return setInterval(this.pass((args==null?[]:args),bind),periodical);}});Number.implement({limit:function(min,max){return Math.min(max,Math.max(min,this));},round:function(precision){precision=Math.pow(10,precision||0).toFixed(precision<0?-precision:0);return Math.round(this*precision)/precision;},times:function(fn,bind){for(var i=0;i<this;i++)fn.call(bind,i,this);},toFloat:function(){return parseFloat(this);},toInt:function(base){return parseInt(this,base||10);}});Number.alias('each','times');(function(math){var methods={};math.each(function(name){if(!Number[name])methods[name]=function(){return Math[name].apply(null,[this].concat(Array.from(arguments)));};});Number.implement(methods);})(['abs','acos','asin','atan','atan2','ceil','cos','exp','floor','log','max','min','pow','sin','sqrt','tan']);(function(){var Class=this.Class=new Type('Class',function(params){if(instanceOf(params,Function))params={initialize:params};var newClass=function(){reset(this);if(newClass.$prototyping)return this;this.$caller=null;var value=(this.initialize)?this.initialize.apply(this,arguments):this;this.$caller=this.caller=null;return value;}.extend(this).implement(params);newClass.$constructor=Class;newClass.prototype.$constructor=newClass;newClass.prototype.parent=parent;return newClass;});var parent=function(){if(!this.$caller)throw new Error('The method "parent" cannot be called.');var name=this.$caller.$name,parent=this.$caller.$owner.parent,previous=(parent)?parent.prototype[name]:null;if(!previous)throw new Error('The method "'+name+'" has no parent.');return previous.apply(this,arguments);};var reset=function(object){for(var key in object){var value=object[key];switch(typeOf(value)){case'object':var F=function(){};F.prototype=value;object[key]=reset(new F);break;case'array':object[key]=value.clone();break;}}
return object;};var wrap=function(self,key,method){if(method.$origin)method=method.$origin;var wrapper=function(){if(method.$protected&&this.$caller==null)throw new Error('The method "'+key+'" cannot be called.');var caller=this.caller,current=this.$caller;this.caller=current;this.$caller=wrapper;var result=method.apply(this,arguments);this.$caller=current;this.caller=caller;return result;}.extend({$owner:self,$origin:method,$name:key});return wrapper;};var implement=function(key,value,retain){if(Class.Mutators.hasOwnProperty(key)){value=Class.Mutators[key].call(this,value);if(value==null)return this;}
if(typeOf(value)=='function'){if(value.$hidden)return this;this.prototype[key]=(retain)?value:wrap(this,key,value);}else{Object.merge(this.prototype,key,value);}
return this;};var getInstance=function(klass){klass.$prototyping=true;var proto=new klass;delete klass.$prototyping;return proto;};Class.implement('implement',implement.overloadSetter());Class.Mutators={Extends:function(parent){this.parent=parent;this.prototype=getInstance(parent);},Implements:function(items){Array.from(items).each(function(item){var instance=new item;for(var key in instance)implement.call(this,key,instance[key],true);},this);}};})();(function(){this.Chain=new Class({$chain:[],chain:function(){this.$chain.append(Array.flatten(arguments));return this;},callChain:function(){return(this.$chain.length)?this.$chain.shift().apply(this,arguments):false;},clearChain:function(){this.$chain.empty();return this;}});var removeOn=function(string){return string.replace(/^on([A-Z])/,function(full,first){return first.toLowerCase();});};this.Events=new Class({$events:{},addEvent:function(type,fn,internal){type=removeOn(type);this.$events[type]=(this.$events[type]||[]).include(fn);if(internal)fn.internal=true;return this;},addEvents:function(events){for(var type in events)this.addEvent(type,events[type]);return this;},fireEvent:function(type,args,delay){type=removeOn(type);var events=this.$events[type];if(!events)return this;args=Array.from(args);events.each(function(fn){if(delay)fn.delay(delay,this,args);else fn.apply(this,args);},this);return this;},removeEvent:function(type,fn){type=removeOn(type);var events=this.$events[type];if(events&&!fn.internal){var index=events.indexOf(fn);if(index!=-1)delete events[index];}
return this;},removeEvents:function(events){var type;if(typeOf(events)=='object'){for(type in events)this.removeEvent(type,events[type]);return this;}
if(events)events=removeOn(events);for(type in this.$events){if(events&&events!=type)continue;var fns=this.$events[type];for(var i=fns.length;i--;)if(i in fns){this.removeEvent(type,fns[i]);}}
return this;}});this.Options=new Class({setOptions:function(){var options=this.options=Object.merge.apply(null,[{},this.options].append(arguments));if(this.addEvent)for(var option in options){if(typeOf(options[option])!='function'||!(/^on[A-Z]/).test(option))continue;this.addEvent(option,options[option]);delete options[option];}
return this;}});})();(function(){var document=this.document;var window=document.window=this;var ua=navigator.userAgent.toLowerCase(),platform=navigator.platform.toLowerCase(),UA=ua.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,'unknown',0],mode=UA[1]=='ie'&&document.documentMode;var Browser=this.Browser={extend:Function.prototype.extend,name:(UA[1]=='version')?UA[3]:UA[1],version:mode||parseFloat((UA[1]=='opera'&&UA[4])?UA[4]:UA[2]),Platform:{name:ua.match(/ip(?:ad|od|hone)/)?'ios':(ua.match(/(?:webos|android)/)||platform.match(/mac|win|linux/)||['other'])[0]},Features:{xpath:!!(document.evaluate),air:!!(window.runtime),query:!!(document.querySelector),json:!!(window.JSON)},Plugins:{}};Browser[Browser.name]=true;Browser[Browser.name+parseInt(Browser.version,10)]=true;Browser.Platform[Browser.Platform.name]=true;Browser.Request=(function(){var XMLHTTP=function(){return new XMLHttpRequest();};var MSXML2=function(){return new ActiveXObject('MSXML2.XMLHTTP');};var MSXML=function(){return new ActiveXObject('Microsoft.XMLHTTP');};return Function.attempt(function(){XMLHTTP();return XMLHTTP;},function(){MSXML2();return MSXML2;},function(){MSXML();return MSXML;});})();Browser.Features.xhr=!!(Browser.Request);var version=(Function.attempt(function(){return navigator.plugins['Shockwave Flash'].description;},function(){return new ActiveXObject('ShockwaveFlash.ShockwaveFlash').GetVariable('$version');})||'0 r0').match(/\d+/g);Browser.Plugins.Flash={version:Number(version[0]||'0.'+version[1])||0,build:Number(version[2])||0};Browser.exec=function(text){if(!text)return text;if(window.execScript){window.execScript(text);}else{var script=document.createElement('script');script.setAttribute('type','text/javascript');script.text=text;document.head.appendChild(script);document.head.removeChild(script);}
return text;};String.implement('stripScripts',function(exec){var scripts='';var text=this.replace(/<script[^>]*>([\s\S]*?)<\/script>/gi,function(all,code){scripts+=code+'\n';return'';});if(exec===true)Browser.exec(scripts);else if(typeOf(exec)=='function')exec(scripts,text);return text;});Browser.extend({Document:this.Document,Window:this.Window,Element:this.Element,Event:this.Event});this.Window=this.$constructor=new Type('Window',function(){});this.$family=Function.from('window').hide();Window.mirror(function(name,method){window[name]=method;});this.Document=document.$constructor=new Type('Document',function(){});document.$family=Function.from('document').hide();Document.mirror(function(name,method){document[name]=method;});document.html=document.documentElement;if(!document.head)document.head=document.getElementsByTagName('head')[0];if(document.execCommand)try{document.execCommand("BackgroundImageCache",false,true);}catch(e){}
if(this.attachEvent&&!this.addEventListener){var unloadEvent=function(){this.detachEvent('onunload',unloadEvent);document.head=document.html=document.window=null;};this.attachEvent('onunload',unloadEvent);}
var arrayFrom=Array.from;try{arrayFrom(document.html.childNodes);}catch(e){Array.from=function(item){if(typeof item!='string'&&Type.isEnumerable(item)&&typeOf(item)!='array'){var i=item.length,array=new Array(i);while(i--)array[i]=item[i];return array;}
return arrayFrom(item);};var prototype=Array.prototype,slice=prototype.slice;['pop','push','reverse','shift','sort','splice','unshift','concat','join','slice'].each(function(name){var method=prototype[name];Array[name]=function(item){return method.apply(Array.from(item),slice.call(arguments,1));};});}})();(function(){var hasOwnProperty=Object.prototype.hasOwnProperty;Object.extend({subset:function(object,keys){var results={};for(var i=0,l=keys.length;i<l;i++){var k=keys[i];if(k in object)results[k]=object[k];}
return results;},map:function(object,fn,bind){var results={};for(var key in object){if(hasOwnProperty.call(object,key))results[key]=fn.call(bind,object[key],key,object);}
return results;},filter:function(object,fn,bind){var results={};for(var key in object){var value=object[key];if(hasOwnProperty.call(object,key)&&fn.call(bind,value,key,object))results[key]=value;}
return results;},every:function(object,fn,bind){for(var key in object){if(hasOwnProperty.call(object,key)&&!fn.call(bind,object[key],key))return false;}
return true;},some:function(object,fn,bind){for(var key in object){if(hasOwnProperty.call(object,key)&&fn.call(bind,object[key],key))return true;}
return false;},keys:function(object){var keys=[];for(var key in object){if(hasOwnProperty.call(object,key))keys.push(key);}
return keys;},values:function(object){var values=[];for(var key in object){if(hasOwnProperty.call(object,key))values.push(object[key]);}
return values;},getLength:function(object){return Object.keys(object).length;},keyOf:function(object,value){for(var key in object){if(hasOwnProperty.call(object,key)&&object[key]===value)return key;}
return null;},contains:function(object,value){return Object.keyOf(object,value)!=null;},toQueryString:function(object,base){var queryString=[];Object.each(object,function(value,key){if(base)key=base+'['+key+']';var result;switch(typeOf(value)){case'object':result=Object.toQueryString(value,key);break;case'array':var qs={};value.each(function(val,i){qs[i]=val;});result=Object.toQueryString(qs,key);break;default:result=key+'='+encodeURIComponent(value);}
if(value!=null)queryString.push(result);});return queryString.join('&');}});})();;(function(){var parsed,separatorIndex,combinatorIndex,reversed,cache={},reverseCache={},reUnescape=/\\/g;var parse=function(expression,isReversed){if(expression==null)return null;if(expression.Slick===true)return expression;expression=(''+expression).replace(/^\s+|\s+$/g,'');reversed=!!isReversed;var currentCache=(reversed)?reverseCache:cache;if(currentCache[expression])return currentCache[expression];parsed={Slick:true,expressions:[],raw:expression,reverse:function(){return parse(this.raw,true);}};separatorIndex=-1;while(expression!=(expression=expression.replace(regexp,parser)));parsed.length=parsed.expressions.length;return currentCache[parsed.raw]=(reversed)?reverse(parsed):parsed;};var reverseCombinator=function(combinator){if(combinator==='!')return' ';else if(combinator===' ')return'!';else if((/^!/).test(combinator))return combinator.replace(/^!/,'');else return'!'+combinator;};var reverse=function(expression){var expressions=expression.expressions;for(var i=0;i<expressions.length;i++){var exp=expressions[i];var last={parts:[],tag:'*',combinator:reverseCombinator(exp[0].combinator)};for(var j=0;j<exp.length;j++){var cexp=exp[j];if(!cexp.reverseCombinator)cexp.reverseCombinator=' ';cexp.combinator=cexp.reverseCombinator;delete cexp.reverseCombinator;}
exp.reverse().push(last);}
return expression;};var escapeRegExp=function(string){return string.replace(/[-[\]{}()*+?.\\^$|,#\s]/g,function(match){return'\\'+match;});};var regexp=new RegExp("^(?:\\s*(,)\\s*|\\s*(<combinator>+)\\s*|(\\s+)|(<unicode>+|\\*)|\\#(<unicode>+)|\\.(<unicode>+)|\\[\\s*(<unicode1>+)(?:\\s*([*^$!~|]?=)(?:\\s*(?:([\"']?)(.*?)\\9)))?\\s*\\](?!\\])|(:+)(<unicode>+)(?:\\((?:(?:([\"'])([^\\13]*)\\13)|((?:\\([^)]+\\)|[^()]*)+))\\))?)".replace(/<combinator>/,'['+escapeRegExp(">+~`!@$%^&={}\\;</")+']').replace(/<unicode>/g,'(?:[\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])').replace(/<unicode1>/g,'(?:[:\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])'));function parser(rawMatch,separator,combinator,combinatorChildren,tagName,id,className,attributeKey,attributeOperator,attributeQuote,attributeValue,pseudoMarker,pseudoClass,pseudoQuote,pseudoClassQuotedValue,pseudoClassValue){if(separator||separatorIndex===-1){parsed.expressions[++separatorIndex]=[];combinatorIndex=-1;if(separator)return'';}
if(combinator||combinatorChildren||combinatorIndex===-1){combinator=combinator||' ';var currentSeparator=parsed.expressions[separatorIndex];if(reversed&&currentSeparator[combinatorIndex])
currentSeparator[combinatorIndex].reverseCombinator=reverseCombinator(combinator);currentSeparator[++combinatorIndex]={combinator:combinator,tag:'*'};}
var currentParsed=parsed.expressions[separatorIndex][combinatorIndex];if(tagName){currentParsed.tag=tagName.replace(reUnescape,'');}else if(id){currentParsed.id=id.replace(reUnescape,'');}else if(className){className=className.replace(reUnescape,'');if(!currentParsed.classList)currentParsed.classList=[];if(!currentParsed.classes)currentParsed.classes=[];currentParsed.classList.push(className);currentParsed.classes.push({value:className,regexp:new RegExp('(^|\\s)'+escapeRegExp(className)+'(\\s|$)')});}else if(pseudoClass){pseudoClassValue=pseudoClassValue||pseudoClassQuotedValue;pseudoClassValue=pseudoClassValue?pseudoClassValue.replace(reUnescape,''):null;if(!currentParsed.pseudos)currentParsed.pseudos=[];currentParsed.pseudos.push({key:pseudoClass.replace(reUnescape,''),value:pseudoClassValue,type:pseudoMarker.length==1?'class':'element'});}else if(attributeKey){attributeKey=attributeKey.replace(reUnescape,'');attributeValue=(attributeValue||'').replace(reUnescape,'');var test,regexp;switch(attributeOperator){case'^=':regexp=new RegExp('^'+escapeRegExp(attributeValue));break;case'$=':regexp=new RegExp(escapeRegExp(attributeValue)+'$');break;case'~=':regexp=new RegExp('(^|\\s)'+escapeRegExp(attributeValue)+'(\\s|$)');break;case'|=':regexp=new RegExp('^'+escapeRegExp(attributeValue)+'(-|$)');break;case'=':test=function(value){return attributeValue==value;};break;case'*=':test=function(value){return value&&value.indexOf(attributeValue)>-1;};break;case'!=':test=function(value){return attributeValue!=value;};break;default:test=function(value){return!!value;};}
if(attributeValue==''&&(/^[*$^]=$/).test(attributeOperator))test=function(){return false;};if(!test)test=function(value){return value&&regexp.test(value);};if(!currentParsed.attributes)currentParsed.attributes=[];currentParsed.attributes.push({key:attributeKey,operator:attributeOperator,value:attributeValue,test:test});}
return'';};var Slick=(this.Slick||{});Slick.parse=function(expression){return parse(expression);};Slick.escapeRegExp=escapeRegExp;if(!this.Slick)this.Slick=Slick;}).apply((typeof exports!='undefined')?exports:this);;(function(){var local={},featuresCache={},toString=Object.prototype.toString;local.isNativeCode=function(fn){return(/\{\s*\[native code\]\s*\}/).test(''+fn);};local.isXML=function(document){return(!!document.xmlVersion)||(!!document.xml)||(toString.call(document)=='[object XMLDocument]')||(document.nodeType==9&&document.documentElement.nodeName!='HTML');};local.setDocument=function(document){var nodeType=document.nodeType;if(nodeType==9);else if(nodeType)document=document.ownerDocument;else if(document.navigator)document=document.document;else return;if(this.document===document)return;this.document=document;var root=document.documentElement,rootUid=this.getUIDXML(root),features=featuresCache[rootUid],feature;if(features){for(feature in features){this[feature]=features[feature];}
return;}
features=featuresCache[rootUid]={};features.root=root;features.isXMLDocument=this.isXML(document);features.brokenStarGEBTN=features.starSelectsClosedQSA=features.idGetsName=features.brokenMixedCaseQSA=features.brokenGEBCN=features.brokenCheckedQSA=features.brokenEmptyAttributeQSA=features.isHTMLDocument=features.nativeMatchesSelector=false;var starSelectsClosed,starSelectsComments,brokenSecondClassNameGEBCN,cachedGetElementsByClassName,brokenFormAttributeGetter;var selected,id='slick_uniqueid';var testNode=document.createElement('div');var testRoot=document.body||document.getElementsByTagName('body')[0]||root;testRoot.appendChild(testNode);try{testNode.innerHTML='<a id="'+id+'"></a>';features.isHTMLDocument=!!document.getElementById(id);}catch(e){};if(features.isHTMLDocument){testNode.style.display='none';testNode.appendChild(document.createComment(''));starSelectsComments=(testNode.getElementsByTagName('*').length>1);try{testNode.innerHTML='foo</foo>';selected=testNode.getElementsByTagName('*');starSelectsClosed=(selected&&!!selected.length&&selected[0].nodeName.charAt(0)=='/');}catch(e){};features.brokenStarGEBTN=starSelectsComments||starSelectsClosed;try{testNode.innerHTML='<a name="'+id+'"></a><b id="'+id+'"></b>';features.idGetsName=document.getElementById(id)===testNode.firstChild;}catch(e){};if(testNode.getElementsByClassName){try{testNode.innerHTML='<a class="f"></a><a class="b"></a>';testNode.getElementsByClassName('b').length;testNode.firstChild.className='b';cachedGetElementsByClassName=(testNode.getElementsByClassName('b').length!=2);}catch(e){};try{testNode.innerHTML='<a class="a"></a><a class="f b a"></a>';brokenSecondClassNameGEBCN=(testNode.getElementsByClassName('a').length!=2);}catch(e){};features.brokenGEBCN=cachedGetElementsByClassName||brokenSecondClassNameGEBCN;}
if(testNode.querySelectorAll){try{testNode.innerHTML='foo</foo>';selected=testNode.querySelectorAll('*');features.starSelectsClosedQSA=(selected&&!!selected.length&&selected[0].nodeName.charAt(0)=='/');}catch(e){};try{testNode.innerHTML='<a class="MiX"></a>';features.brokenMixedCaseQSA=!testNode.querySelectorAll('.MiX').length;}catch(e){};try{testNode.innerHTML='<select><option selected="selected">a</option></select>';features.brokenCheckedQSA=(testNode.querySelectorAll(':checked').length==0);}catch(e){};try{testNode.innerHTML='<a class=""></a>';features.brokenEmptyAttributeQSA=(testNode.querySelectorAll('[class*=""]').length!=0);}catch(e){};}
try{testNode.innerHTML='<form action="s"><input id="action"/></form>';brokenFormAttributeGetter=(testNode.firstChild.getAttribute('action')!='s');}catch(e){};features.nativeMatchesSelector=root.matchesSelector||root.mozMatchesSelector||root.webkitMatchesSelector;if(features.nativeMatchesSelector)try{features.nativeMatchesSelector.call(root,':slick');features.nativeMatchesSelector=null;}catch(e){};}
try{root.slick_expando=1;delete root.slick_expando;features.getUID=this.getUIDHTML;}catch(e){features.getUID=this.getUIDXML;}
testRoot.removeChild(testNode);testNode=selected=testRoot=null;features.getAttribute=(features.isHTMLDocument&&brokenFormAttributeGetter)?function(node,name){var method=this.attributeGetters[name];if(method)return method.call(node);var attributeNode=node.getAttributeNode(name);return(attributeNode)?attributeNode.nodeValue:null;}:function(node,name){var method=this.attributeGetters[name];return(method)?method.call(node):node.getAttribute(name);};features.hasAttribute=(root&&this.isNativeCode(root.hasAttribute))?function(node,attribute){return node.hasAttribute(attribute);}:function(node,attribute){node=node.getAttributeNode(attribute);return!!(node&&(node.specified||node.nodeValue));};var nativeRootContains=root&&this.isNativeCode(root.contains),nativeDocumentContains=document&&this.isNativeCode(document.contains);features.contains=(nativeRootContains&&nativeDocumentContains)?function(context,node){return context.contains(node);}:(nativeRootContains&&!nativeDocumentContains)?function(context,node){return context===node||((context===document)?document.documentElement:context).contains(node);}:(root&&root.compareDocumentPosition)?function(context,node){return context===node||!!(context.compareDocumentPosition(node)&16);}:function(context,node){if(node)do{if(node===context)return true;}while((node=node.parentNode));return false;};features.documentSorter=(root.compareDocumentPosition)?function(a,b){if(!a.compareDocumentPosition||!b.compareDocumentPosition)return 0;return a.compareDocumentPosition(b)&4?-1:a===b?0:1;}:('sourceIndex'in root)?function(a,b){if(!a.sourceIndex||!b.sourceIndex)return 0;return a.sourceIndex-b.sourceIndex;}:(document.createRange)?function(a,b){if(!a.ownerDocument||!b.ownerDocument)return 0;var aRange=a.ownerDocument.createRange(),bRange=b.ownerDocument.createRange();aRange.setStart(a,0);aRange.setEnd(a,0);bRange.setStart(b,0);bRange.setEnd(b,0);return aRange.compareBoundaryPoints(Range.START_TO_END,bRange);}:null;root=null;for(feature in features){this[feature]=features[feature];}};var reSimpleSelector=/^([#.]?)((?:[\w-]+|\*))$/,reEmptyAttribute=/\[.+[*$^]=(?:""|'')?\]/,qsaFailExpCache={};local.search=function(context,expression,append,first){var found=this.found=(first)?null:(append||[]);if(!context)return found;else if(context.navigator)context=context.document;else if(!context.nodeType)return found;var parsed,i,uniques=this.uniques={},hasOthers=!!(append&&append.length),contextIsDocument=(context.nodeType==9);if(this.document!==(contextIsDocument?context:context.ownerDocument))this.setDocument(context);if(hasOthers)for(i=found.length;i--;)uniques[this.getUID(found[i])]=true;if(typeof expression=='string'){var simpleSelector=expression.match(reSimpleSelector);simpleSelectors:if(simpleSelector){var symbol=simpleSelector[1],name=simpleSelector[2],node,nodes;if(!symbol){if(name=='*'&&this.brokenStarGEBTN)break simpleSelectors;nodes=context.getElementsByTagName(name);if(first)return nodes[0]||null;for(i=0;node=nodes[i++];){if(!(hasOthers&&uniques[this.getUID(node)]))found.push(node);}}else if(symbol=='#'){if(!this.isHTMLDocument||!contextIsDocument)break simpleSelectors;node=context.getElementById(name);if(!node)return found;if(this.idGetsName&&node.getAttributeNode('id').nodeValue!=name)break simpleSelectors;if(first)return node||null;if(!(hasOthers&&uniques[this.getUID(node)]))found.push(node);}else if(symbol=='.'){if(!this.isHTMLDocument||((!context.getElementsByClassName||this.brokenGEBCN)&&context.querySelectorAll))break simpleSelectors;if(context.getElementsByClassName&&!this.brokenGEBCN){nodes=context.getElementsByClassName(name);if(first)return nodes[0]||null;for(i=0;node=nodes[i++];){if(!(hasOthers&&uniques[this.getUID(node)]))found.push(node);}}else{var matchClass=new RegExp('(^|\\s)'+Slick.escapeRegExp(name)+'(\\s|$)');nodes=context.getElementsByTagName('*');for(i=0;node=nodes[i++];){className=node.className;if(!(className&&matchClass.test(className)))continue;if(first)return node;if(!(hasOthers&&uniques[this.getUID(node)]))found.push(node);}}}
if(hasOthers)this.sort(found);return(first)?null:found;}
querySelector:if(context.querySelectorAll){if(!this.isHTMLDocument||qsaFailExpCache[expression]||this.brokenMixedCaseQSA||(this.brokenCheckedQSA&&expression.indexOf(':checked')>-1)||(this.brokenEmptyAttributeQSA&&reEmptyAttribute.test(expression))||(!contextIsDocument&&expression.indexOf(',')>-1)||Slick.disableQSA)break querySelector;var _expression=expression,_context=context;if(!contextIsDocument){var currentId=_context.getAttribute('id'),slickid='slickid__';_context.setAttribute('id',slickid);_expression='#'+slickid+' '+_expression;context=_context.parentNode;}
try{if(first)return context.querySelector(_expression)||null;else nodes=context.querySelectorAll(_expression);}catch(e){qsaFailExpCache[expression]=1;break querySelector;}finally{if(!contextIsDocument){if(currentId)_context.setAttribute('id',currentId);else _context.removeAttribute('id');context=_context;}}
if(this.starSelectsClosedQSA)for(i=0;node=nodes[i++];){if(node.nodeName>'@'&&!(hasOthers&&uniques[this.getUID(node)]))found.push(node);}else for(i=0;node=nodes[i++];){if(!(hasOthers&&uniques[this.getUID(node)]))found.push(node);}
if(hasOthers)this.sort(found);return found;}
parsed=this.Slick.parse(expression);if(!parsed.length)return found;}else if(expression==null){return found;}else if(expression.Slick){parsed=expression;}else if(this.contains(context.documentElement||context,expression)){(found)?found.push(expression):found=expression;return found;}else{return found;}
this.posNTH={};this.posNTHLast={};this.posNTHType={};this.posNTHTypeLast={};this.push=(!hasOthers&&(first||(parsed.length==1&&parsed.expressions[0].length==1)))?this.pushArray:this.pushUID;if(found==null)found=[];var j,m,n;var combinator,tag,id,classList,classes,attributes,pseudos;var currentItems,currentExpression,currentBit,lastBit,expressions=parsed.expressions;search:for(i=0;(currentExpression=expressions[i]);i++)for(j=0;(currentBit=currentExpression[j]);j++){combinator='combinator:'+currentBit.combinator;if(!this[combinator])continue search;tag=(this.isXMLDocument)?currentBit.tag:currentBit.tag.toUpperCase();id=currentBit.id;classList=currentBit.classList;classes=currentBit.classes;attributes=currentBit.attributes;pseudos=currentBit.pseudos;lastBit=(j===(currentExpression.length-1));this.bitUniques={};if(lastBit){this.uniques=uniques;this.found=found;}else{this.uniques={};this.found=[];}
if(j===0){this[combinator](context,tag,id,classes,attributes,pseudos,classList);if(first&&lastBit&&found.length)break search;}else{if(first&&lastBit)for(m=0,n=currentItems.length;m<n;m++){this[combinator](currentItems[m],tag,id,classes,attributes,pseudos,classList);if(found.length)break search;}else for(m=0,n=currentItems.length;m<n;m++)this[combinator](currentItems[m],tag,id,classes,attributes,pseudos,classList);}
currentItems=this.found;}
if(hasOthers||(parsed.expressions.length>1))this.sort(found);return(first)?(found[0]||null):found;};local.uidx=1;local.uidk='slick-uniqueid';local.getUIDXML=function(node){var uid=node.getAttribute(this.uidk);if(!uid){uid=this.uidx++;node.setAttribute(this.uidk,uid);}
return uid;};local.getUIDHTML=function(node){return node.uniqueNumber||(node.uniqueNumber=this.uidx++);};local.sort=function(results){if(!this.documentSorter)return results;results.sort(this.documentSorter);return results;};local.cacheNTH={};local.matchNTH=/^([+-]?\d*)?([a-z]+)?([+-]\d+)?$/;local.parseNTHArgument=function(argument){var parsed=argument.match(this.matchNTH);if(!parsed)return false;var special=parsed[2]||false;var a=parsed[1]||1;if(a=='-')a=-1;var b=+parsed[3]||0;parsed=(special=='n')?{a:a,b:b}:(special=='odd')?{a:2,b:1}:(special=='even')?{a:2,b:0}:{a:0,b:a};return(this.cacheNTH[argument]=parsed);};local.createNTHPseudo=function(child,sibling,positions,ofType){return function(node,argument){var uid=this.getUID(node);if(!this[positions][uid]){var parent=node.parentNode;if(!parent)return false;var el=parent[child],count=1;if(ofType){var nodeName=node.nodeName;do{if(el.nodeName!=nodeName)continue;this[positions][this.getUID(el)]=count++;}while((el=el[sibling]));}else{do{if(el.nodeType!=1)continue;this[positions][this.getUID(el)]=count++;}while((el=el[sibling]));}}
argument=argument||'n';var parsed=this.cacheNTH[argument]||this.parseNTHArgument(argument);if(!parsed)return false;var a=parsed.a,b=parsed.b,pos=this[positions][uid];if(a==0)return b==pos;if(a>0){if(pos<b)return false;}else{if(b<pos)return false;}
return((pos-b)%a)==0;};};local.pushArray=function(node,tag,id,classes,attributes,pseudos){if(this.matchSelector(node,tag,id,classes,attributes,pseudos))this.found.push(node);};local.pushUID=function(node,tag,id,classes,attributes,pseudos){var uid=this.getUID(node);if(!this.uniques[uid]&&this.matchSelector(node,tag,id,classes,attributes,pseudos)){this.uniques[uid]=true;this.found.push(node);}};local.matchNode=function(node,selector){if(this.isHTMLDocument&&this.nativeMatchesSelector){try{return this.nativeMatchesSelector.call(node,selector.replace(/\[([^=]+)=\s*([^'"\]]+?)\s*\]/g,'[$1="$2"]'));}catch(matchError){}}
var parsed=this.Slick.parse(selector);if(!parsed)return true;var expressions=parsed.expressions,simpleExpCounter=0,i;for(i=0;(currentExpression=expressions[i]);i++){if(currentExpression.length==1){var exp=currentExpression[0];if(this.matchSelector(node,(this.isXMLDocument)?exp.tag:exp.tag.toUpperCase(),exp.id,exp.classes,exp.attributes,exp.pseudos))return true;simpleExpCounter++;}}
if(simpleExpCounter==parsed.length)return false;var nodes=this.search(this.document,parsed),item;for(i=0;item=nodes[i++];){if(item===node)return true;}
return false;};local.matchPseudo=function(node,name,argument){var pseudoName='pseudo:'+name;if(this[pseudoName])return this[pseudoName](node,argument);var attribute=this.getAttribute(node,name);return(argument)?argument==attribute:!!attribute;};local.matchSelector=function(node,tag,id,classes,attributes,pseudos){if(tag){var nodeName=(this.isXMLDocument)?node.nodeName:node.nodeName.toUpperCase();if(tag=='*'){if(nodeName<'@')return false;}else{if(nodeName!=tag)return false;}}
if(id&&node.getAttribute('id')!=id)return false;var i,part,cls;if(classes)for(i=classes.length;i--;){cls=this.getAttribute(node,'class');if(!(cls&&classes[i].regexp.test(cls)))return false;}
if(attributes)for(i=attributes.length;i--;){part=attributes[i];if(part.operator?!part.test(this.getAttribute(node,part.key)):!this.hasAttribute(node,part.key))return false;}
if(pseudos)for(i=pseudos.length;i--;){part=pseudos[i];if(!this.matchPseudo(node,part.key,part.value))return false;}
return true;};var combinators={' ':function(node,tag,id,classes,attributes,pseudos,classList){var i,item,children;if(this.isHTMLDocument){getById:if(id){item=this.document.getElementById(id);if((!item&&node.all)||(this.idGetsName&&item&&item.getAttributeNode('id').nodeValue!=id)){children=node.all[id];if(!children)return;if(!children[0])children=[children];for(i=0;item=children[i++];){var idNode=item.getAttributeNode('id');if(idNode&&idNode.nodeValue==id){this.push(item,tag,null,classes,attributes,pseudos);break;}}
return;}
if(!item){if(this.contains(this.root,node))return;else break getById;}else if(this.document!==node&&!this.contains(node,item))return;this.push(item,tag,null,classes,attributes,pseudos);return;}
getByClass:if(classes&&node.getElementsByClassName&&!this.brokenGEBCN){children=node.getElementsByClassName(classList.join(' '));if(!(children&&children.length))break getByClass;for(i=0;item=children[i++];)this.push(item,tag,id,null,attributes,pseudos);return;}}
getByTag:{children=node.getElementsByTagName(tag);if(!(children&&children.length))break getByTag;if(!this.brokenStarGEBTN)tag=null;for(i=0;item=children[i++];)this.push(item,tag,id,classes,attributes,pseudos);}},'>':function(node,tag,id,classes,attributes,pseudos){if((node=node.firstChild))do{if(node.nodeType==1)this.push(node,tag,id,classes,attributes,pseudos);}while((node=node.nextSibling));},'+':function(node,tag,id,classes,attributes,pseudos){while((node=node.nextSibling))if(node.nodeType==1){this.push(node,tag,id,classes,attributes,pseudos);break;}},'^':function(node,tag,id,classes,attributes,pseudos){node=node.firstChild;if(node){if(node.nodeType==1)this.push(node,tag,id,classes,attributes,pseudos);else this['combinator:+'](node,tag,id,classes,attributes,pseudos);}},'~':function(node,tag,id,classes,attributes,pseudos){while((node=node.nextSibling)){if(node.nodeType!=1)continue;var uid=this.getUID(node);if(this.bitUniques[uid])break;this.bitUniques[uid]=true;this.push(node,tag,id,classes,attributes,pseudos);}},'++':function(node,tag,id,classes,attributes,pseudos){this['combinator:+'](node,tag,id,classes,attributes,pseudos);this['combinator:!+'](node,tag,id,classes,attributes,pseudos);},'~~':function(node,tag,id,classes,attributes,pseudos){this['combinator:~'](node,tag,id,classes,attributes,pseudos);this['combinator:!~'](node,tag,id,classes,attributes,pseudos);},'!':function(node,tag,id,classes,attributes,pseudos){while((node=node.parentNode))if(node!==this.document)this.push(node,tag,id,classes,attributes,pseudos);},'!>':function(node,tag,id,classes,attributes,pseudos){node=node.parentNode;if(node!==this.document)this.push(node,tag,id,classes,attributes,pseudos);},'!+':function(node,tag,id,classes,attributes,pseudos){while((node=node.previousSibling))if(node.nodeType==1){this.push(node,tag,id,classes,attributes,pseudos);break;}},'!^':function(node,tag,id,classes,attributes,pseudos){node=node.lastChild;if(node){if(node.nodeType==1)this.push(node,tag,id,classes,attributes,pseudos);else this['combinator:!+'](node,tag,id,classes,attributes,pseudos);}},'!~':function(node,tag,id,classes,attributes,pseudos){while((node=node.previousSibling)){if(node.nodeType!=1)continue;var uid=this.getUID(node);if(this.bitUniques[uid])break;this.bitUniques[uid]=true;this.push(node,tag,id,classes,attributes,pseudos);}}};for(var c in combinators)local['combinator:'+c]=combinators[c];var pseudos={'empty':function(node){var child=node.firstChild;return!(child&&child.nodeType==1)&&!(node.innerText||node.textContent||'').length;},'not':function(node,expression){return!this.matchNode(node,expression);},'contains':function(node,text){return(node.innerText||node.textContent||'').indexOf(text)>-1;},'first-child':function(node){while((node=node.previousSibling))if(node.nodeType==1)return false;return true;},'last-child':function(node){while((node=node.nextSibling))if(node.nodeType==1)return false;return true;},'only-child':function(node){var prev=node;while((prev=prev.previousSibling))if(prev.nodeType==1)return false;var next=node;while((next=next.nextSibling))if(next.nodeType==1)return false;return true;},'nth-child':local.createNTHPseudo('firstChild','nextSibling','posNTH'),'nth-last-child':local.createNTHPseudo('lastChild','previousSibling','posNTHLast'),'nth-of-type':local.createNTHPseudo('firstChild','nextSibling','posNTHType',true),'nth-last-of-type':local.createNTHPseudo('lastChild','previousSibling','posNTHTypeLast',true),'index':function(node,index){return this['pseudo:nth-child'](node,''+(index+1));},'even':function(node){return this['pseudo:nth-child'](node,'2n');},'odd':function(node){return this['pseudo:nth-child'](node,'2n+1');},'first-of-type':function(node){var nodeName=node.nodeName;while((node=node.previousSibling))if(node.nodeName==nodeName)return false;return true;},'last-of-type':function(node){var nodeName=node.nodeName;while((node=node.nextSibling))if(node.nodeName==nodeName)return false;return true;},'only-of-type':function(node){var prev=node,nodeName=node.nodeName;while((prev=prev.previousSibling))if(prev.nodeName==nodeName)return false;var next=node;while((next=next.nextSibling))if(next.nodeName==nodeName)return false;return true;},'enabled':function(node){return!node.disabled;},'disabled':function(node){return node.disabled;},'checked':function(node){return node.checked||node.selected;},'focus':function(node){return this.isHTMLDocument&&this.document.activeElement===node&&(node.href||node.type||this.hasAttribute(node,'tabindex'));},'root':function(node){return(node===this.root);},'selected':function(node){return node.selected;}};for(var p in pseudos)local['pseudo:'+p]=pseudos[p];var attributeGetters=local.attributeGetters={'for':function(){return('htmlFor'in this)?this.htmlFor:this.getAttribute('for');},'href':function(){return('href'in this)?this.getAttribute('href',2):this.getAttribute('href');},'style':function(){return(this.style)?this.style.cssText:this.getAttribute('style');},'tabindex':function(){var attributeNode=this.getAttributeNode('tabindex');return(attributeNode&&attributeNode.specified)?attributeNode.nodeValue:null;},'type':function(){return this.getAttribute('type');},'maxlength':function(){var attributeNode=this.getAttributeNode('maxLength');return(attributeNode&&attributeNode.specified)?attributeNode.nodeValue:null;}};attributeGetters.MAXLENGTH=attributeGetters.maxLength=attributeGetters.maxlength;var Slick=local.Slick=(this.Slick||{});Slick.version='1.1.7';Slick.search=function(context,expression,append){return local.search(context,expression,append);};Slick.find=function(context,expression){return local.search(context,expression,null,true);};Slick.contains=function(container,node){local.setDocument(container);return local.contains(container,node);};Slick.getAttribute=function(node,name){local.setDocument(node);return local.getAttribute(node,name);};Slick.hasAttribute=function(node,name){local.setDocument(node);return local.hasAttribute(node,name);};Slick.match=function(node,selector){if(!(node&&selector))return false;if(!selector||selector===node)return true;local.setDocument(node);return local.matchNode(node,selector);};Slick.defineAttributeGetter=function(name,fn){local.attributeGetters[name]=fn;return this;};Slick.lookupAttributeGetter=function(name){return local.attributeGetters[name];};Slick.definePseudo=function(name,fn){local['pseudo:'+name]=function(node,argument){return fn.call(node,argument);};return this;};Slick.lookupPseudo=function(name){var pseudo=local['pseudo:'+name];if(pseudo)return function(argument){return pseudo.call(this,argument);};return null;};Slick.override=function(regexp,fn){local.override(regexp,fn);return this;};Slick.isXML=local.isXML;Slick.uidOf=function(node){return local.getUIDHTML(node);};if(!this.Slick)this.Slick=Slick;}).apply((typeof exports!='undefined')?exports:this);var Element=function(tag,props){var konstructor=Element.Constructors[tag];if(konstructor)return konstructor(props);if(typeof tag!='string')return document.id(tag).set(props);if(!props)props={};if(!(/^[\w-]+$/).test(tag)){var parsed=Slick.parse(tag).expressions[0][0];tag=(parsed.tag=='*')?'div':parsed.tag;if(parsed.id&&props.id==null)props.id=parsed.id;var attributes=parsed.attributes;if(attributes)for(var attr,i=0,l=attributes.length;i<l;i++){attr=attributes[i];if(props[attr.key]!=null)continue;if(attr.value!=null&&attr.operator=='=')props[attr.key]=attr.value;else if(!attr.value&&!attr.operator)props[attr.key]=true;}
if(parsed.classList&&props['class']==null)props['class']=parsed.classList.join(' ');}
return document.newElement(tag,props);};if(Browser.Element){Element.prototype=Browser.Element.prototype;Element.prototype._fireEvent=(function(fireEvent){return function(type,event){return fireEvent.call(this,type,event);};})(Element.prototype.fireEvent);}
new Type('Element',Element).mirror(function(name){if(Array.prototype[name])return;var obj={};obj[name]=function(){var results=[],args=arguments,elements=true;for(var i=0,l=this.length;i<l;i++){var element=this[i],result=results[i]=element[name].apply(element,args);elements=(elements&&typeOf(result)=='element');}
return(elements)?new Elements(results):results;};Elements.implement(obj);});if(!Browser.Element){Element.parent=Object;Element.Prototype={'$constructor':Element,'$family':Function.from('element').hide()};Element.mirror(function(name,method){Element.Prototype[name]=method;});}
Element.Constructors={};var IFrame=new Type('IFrame',function(){var params=Array.link(arguments,{properties:Type.isObject,iframe:function(obj){return(obj!=null);}});var props=params.properties||{},iframe;if(params.iframe)iframe=document.id(params.iframe);var onload=props.onload||function(){};delete props.onload;props.id=props.name=[props.id,props.name,iframe?(iframe.id||iframe.name):'IFrame_'+String.uniqueID()].pick();iframe=new Element(iframe||'iframe',props);var onLoad=function(){onload.call(iframe.contentWindow);};if(window.frames[props.id])onLoad();else iframe.addListener('load',onLoad);return iframe;});var Elements=this.Elements=function(nodes){if(nodes&&nodes.length){var uniques={},node;for(var i=0;node=nodes[i++];){var uid=Slick.uidOf(node);if(!uniques[uid]){uniques[uid]=true;this.push(node);}}}};Elements.prototype={length:0};Elements.parent=Array;new Type('Elements',Elements).implement({filter:function(filter,bind){if(!filter)return this;return new Elements(Array.filter(this,(typeOf(filter)=='string')?function(item){return item.match(filter);}:filter,bind));}.protect(),push:function(){var length=this.length;for(var i=0,l=arguments.length;i<l;i++){var item=document.id(arguments[i]);if(item)this[length++]=item;}
return(this.length=length);}.protect(),unshift:function(){var items=[];for(var i=0,l=arguments.length;i<l;i++){var item=document.id(arguments[i]);if(item)items.push(item);}
return Array.prototype.unshift.apply(this,items);}.protect(),concat:function(){var newElements=new Elements(this);for(var i=0,l=arguments.length;i<l;i++){var item=arguments[i];if(Type.isEnumerable(item))newElements.append(item);else newElements.push(item);}
return newElements;}.protect(),append:function(collection){for(var i=0,l=collection.length;i<l;i++)this.push(collection[i]);return this;}.protect(),empty:function(){while(this.length)delete this[--this.length];return this;}.protect()});(function(){var splice=Array.prototype.splice,object={'0':0,'1':1,length:2};splice.call(object,1,1);if(object[1]==1)Elements.implement('splice',function(){var length=this.length;var result=splice.apply(this,arguments);while(length>=this.length)delete this[length--];return result;}.protect());Array.forEachMethod(function(method,name){Elements.implement(name,method);});Array.mirror(Elements);var createElementAcceptsHTML;try{createElementAcceptsHTML=(document.createElement('<input name=x>').name=='x');}catch(e){}
var escapeQuotes=function(html){return(''+html).replace(/&/g,'&amp;').replace(/"/g,'&quot;');};Document.implement({newElement:function(tag,props){if(props&&props.checked!=null)props.defaultChecked=props.checked;if(createElementAcceptsHTML&&props){tag='<'+tag;if(props.name)tag+=' name="'+escapeQuotes(props.name)+'"';if(props.type)tag+=' type="'+escapeQuotes(props.type)+'"';tag+='>';delete props.name;delete props.type;}
return this.id(this.createElement(tag)).set(props);}});})();(function(){Slick.uidOf(window);Slick.uidOf(document);Document.implement({newTextNode:function(text){return this.createTextNode(text);},getDocument:function(){return this;},getWindow:function(){return this.window;},id:(function(){var types={string:function(id,nocash,doc){id=Slick.find(doc,'#'+id.replace(/(\W)/g,'\\$1'));return(id)?types.element(id,nocash):null;},element:function(el,nocash){Slick.uidOf(el);if(!nocash&&!el.$family&&!(/^(?:object|embed)$/i).test(el.tagName)){var fireEvent=el.fireEvent;el._fireEvent=function(type,event){return fireEvent(type,event);};Object.append(el,Element.Prototype);}
return el;},object:function(obj,nocash,doc){if(obj.toElement)return types.element(obj.toElement(doc),nocash);return null;}};types.textnode=types.whitespace=types.window=types.document=function(zero){return zero;};return function(el,nocash,doc){if(el&&el.$family&&el.uniqueNumber)return el;var type=typeOf(el);return(types[type])?types[type](el,nocash,doc||document):null;};})()});if(window.$==null)Window.implement('$',function(el,nc){return document.id(el,nc,this.document);});Window.implement({getDocument:function(){return this.document;},getWindow:function(){return this;}});[Document,Element].invoke('implement',{getElements:function(expression){return Slick.search(this,expression,new Elements);},getElement:function(expression){return document.id(Slick.find(this,expression));}});var contains={contains:function(element){return Slick.contains(this,element);}};if(!document.contains)Document.implement(contains);if(!document.createElement('div').contains)Element.implement(contains);var injectCombinator=function(expression,combinator){if(!expression)return combinator;expression=Object.clone(Slick.parse(expression));var expressions=expression.expressions;for(var i=expressions.length;i--;)
expressions[i][0].combinator=combinator;return expression;};Object.forEach({getNext:'~',getPrevious:'!~',getParent:'!'},function(combinator,method){Element.implement(method,function(expression){return this.getElement(injectCombinator(expression,combinator));});});Object.forEach({getAllNext:'~',getAllPrevious:'!~',getSiblings:'~~',getChildren:'>',getParents:'!'},function(combinator,method){Element.implement(method,function(expression){return this.getElements(injectCombinator(expression,combinator));});});Element.implement({getFirst:function(expression){return document.id(Slick.search(this,injectCombinator(expression,'>'))[0]);},getLast:function(expression){return document.id(Slick.search(this,injectCombinator(expression,'>')).getLast());},getWindow:function(){return this.ownerDocument.window;},getDocument:function(){return this.ownerDocument;},getElementById:function(id){return document.id(Slick.find(this,'#'+(''+id).replace(/(\W)/g,'\\$1')));},match:function(expression){return!expression||Slick.match(this,expression);}});if(window.$$==null)Window.implement('$$',function(selector){if(arguments.length==1){if(typeof selector=='string')return Slick.search(this.document,selector,new Elements);else if(Type.isEnumerable(selector))return new Elements(selector);}
return new Elements(arguments);});var inserters={before:function(context,element){var parent=element.parentNode;if(parent)parent.insertBefore(context,element);},after:function(context,element){var parent=element.parentNode;if(parent)parent.insertBefore(context,element.nextSibling);},bottom:function(context,element){element.appendChild(context);},top:function(context,element){element.insertBefore(context,element.firstChild);}};inserters.inside=inserters.bottom;var propertyGetters={},propertySetters={};var properties={};Array.forEach(['type','value','defaultValue','accessKey','cellPadding','cellSpacing','colSpan','frameBorder','rowSpan','tabIndex','useMap'],function(property){properties[property.toLowerCase()]=property;});properties.html='innerHTML';properties.text=(document.createElement('div').textContent==null)?'innerText':'textContent';Object.forEach(properties,function(real,key){propertySetters[key]=function(node,value){node[real]=value;};propertyGetters[key]=function(node){return node[real];};});var bools=['compact','nowrap','ismap','declare','noshade','checked','disabled','readOnly','multiple','selected','noresize','defer','defaultChecked','autofocus','controls','autoplay','loop'];var booleans={};Array.forEach(bools,function(bool){var lower=bool.toLowerCase();booleans[lower]=bool;propertySetters[lower]=function(node,value){node[bool]=!!value;};propertyGetters[lower]=function(node){return!!node[bool];};});Object.append(propertySetters,{'class':function(node,value){('className'in node)?node.className=(value||''):node.setAttribute('class',value);},'for':function(node,value){('htmlFor'in node)?node.htmlFor=value:node.setAttribute('for',value);},'style':function(node,value){(node.style)?node.style.cssText=value:node.setAttribute('style',value);},'value':function(node,value){node.value=(value!=null)?value:'';}});propertyGetters['class']=function(node){return('className'in node)?node.className||null:node.getAttribute('class');};var el=document.createElement('button');try{el.type='button';}catch(e){}
if(el.type!='button')propertySetters.type=function(node,value){node.setAttribute('type',value);};el=null;var input=document.createElement('input');input.value='t';input.type='submit';if(input.value!='t')propertySetters.type=function(node,type){var value=node.value;node.type=type;node.value=value;};input=null;var pollutesGetAttribute=(function(div){div.random='attribute';return(div.getAttribute('random')=='attribute');})(document.createElement('div'));Element.implement({setProperty:function(name,value){var setter=propertySetters[name.toLowerCase()];if(setter){setter(this,value);}else{if(pollutesGetAttribute)var attributeWhiteList=this.retrieve('$attributeWhiteList',{});if(value==null){this.removeAttribute(name);if(pollutesGetAttribute)delete attributeWhiteList[name];}else{this.setAttribute(name,''+value);if(pollutesGetAttribute)attributeWhiteList[name]=true;}}
return this;},setProperties:function(attributes){for(var attribute in attributes)this.setProperty(attribute,attributes[attribute]);return this;},getProperty:function(name){var getter=propertyGetters[name.toLowerCase()];if(getter)return getter(this);if(pollutesGetAttribute){var attr=this.getAttributeNode(name),attributeWhiteList=this.retrieve('$attributeWhiteList',{});if(!attr)return null;if(attr.expando&&!attributeWhiteList[name]){var outer=this.outerHTML;if(outer.substr(0,outer.search(/\/?['"]?>(?![^<]*<['"])/)).indexOf(name)<0)return null;attributeWhiteList[name]=true;}}
var result=Slick.getAttribute(this,name);return(!result&&!Slick.hasAttribute(this,name))?null:result;},getProperties:function(){var args=Array.from(arguments);return args.map(this.getProperty,this).associate(args);},removeProperty:function(name){return this.setProperty(name,null);},removeProperties:function(){Array.each(arguments,this.removeProperty,this);return this;},set:function(prop,value){var property=Element.Properties[prop];(property&&property.set)?property.set.call(this,value):this.setProperty(prop,value);}.overloadSetter(),get:function(prop){var property=Element.Properties[prop];return(property&&property.get)?property.get.apply(this):this.getProperty(prop);}.overloadGetter(),erase:function(prop){var property=Element.Properties[prop];(property&&property.erase)?property.erase.apply(this):this.removeProperty(prop);return this;},hasClass:function(className){return this.className.clean().contains(className,' ');},addClass:function(className){if(!this.hasClass(className))this.className=(this.className+' '+className).clean();return this;},removeClass:function(className){this.className=this.className.replace(new RegExp('(^|\\s)'+className+'(?:\\s|$)'),'$1');return this;},toggleClass:function(className,force){if(force==null)force=!this.hasClass(className);return(force)?this.addClass(className):this.removeClass(className);},adopt:function(){var parent=this,fragment,elements=Array.flatten(arguments),length=elements.length;if(length>1)parent=fragment=document.createDocumentFragment();for(var i=0;i<length;i++){var element=document.id(elements[i],true);if(element)parent.appendChild(element);}
if(fragment)this.appendChild(fragment);return this;},appendText:function(text,where){return this.grab(this.getDocument().newTextNode(text),where);},grab:function(el,where){inserters[where||'bottom'](document.id(el,true),this);return this;},inject:function(el,where){inserters[where||'bottom'](this,document.id(el,true));return this;},replaces:function(el){el=document.id(el,true);el.parentNode.replaceChild(this,el);return this;},wraps:function(el,where){el=document.id(el,true);return this.replaces(el).grab(el,where);},getSelected:function(){this.selectedIndex;return new Elements(Array.from(this.options).filter(function(option){return option.selected;}));},toQueryString:function(){var queryString=[];this.getElements('input, select, textarea').each(function(el){var type=el.type;if(!el.name||el.disabled||type=='submit'||type=='reset'||type=='file'||type=='image')return;var value=(el.get('tag')=='select')?el.getSelected().map(function(opt){return document.id(opt).get('value');}):((type=='radio'||type=='checkbox')&&!el.checked)?null:el.get('value');Array.from(value).each(function(val){if(typeof val!='undefined')queryString.push(encodeURIComponent(el.name)+'='+encodeURIComponent(val));});});return queryString.join('&');}});var collected={},storage={};var get=function(uid){return(storage[uid]||(storage[uid]={}));};var clean=function(item){var uid=item.uniqueNumber;if(item.removeEvents)item.removeEvents();if(item.clearAttributes)item.clearAttributes();if(uid!=null){delete collected[uid];delete storage[uid];}
return item;};var formProps={input:'checked',option:'selected',textarea:'value'};Element.implement({destroy:function(){var children=clean(this).getElementsByTagName('*');Array.each(children,clean);Element.dispose(this);return null;},empty:function(){Array.from(this.childNodes).each(Element.dispose);return this;},dispose:function(){return(this.parentNode)?this.parentNode.removeChild(this):this;},clone:function(contents,keepid){contents=contents!==false;var clone=this.cloneNode(contents),ce=[clone],te=[this],i;if(contents){ce.append(Array.from(clone.getElementsByTagName('*')));te.append(Array.from(this.getElementsByTagName('*')));}
for(i=ce.length;i--;){var node=ce[i],element=te[i];if(!keepid)node.removeAttribute('id');if(node.clearAttributes){node.clearAttributes();node.mergeAttributes(element);node.removeAttribute('uniqueNumber');if(node.options){var no=node.options,eo=element.options;for(var j=no.length;j--;)no[j].selected=eo[j].selected;}}
var prop=formProps[element.tagName.toLowerCase()];if(prop&&element[prop])node[prop]=element[prop];}
if(Browser.ie){var co=clone.getElementsByTagName('object'),to=this.getElementsByTagName('object');for(i=co.length;i--;)co[i].outerHTML=to[i].outerHTML;}
return document.id(clone);}});[Element,Window,Document].invoke('implement',{addListener:function(type,fn){if(type=='unload'){var old=fn,self=this;fn=function(){self.removeListener('unload',fn);old();};}else{collected[Slick.uidOf(this)]=this;}
if(this.addEventListener)this.addEventListener(type,fn,!!arguments[2]);else this.attachEvent('on'+type,fn);return this;},removeListener:function(type,fn){if(this.removeEventListener)this.removeEventListener(type,fn,!!arguments[2]);else this.detachEvent('on'+type,fn);return this;},retrieve:function(property,dflt){var storage=get(Slick.uidOf(this)),prop=storage[property];if(dflt!=null&&prop==null)prop=storage[property]=dflt;return prop!=null?prop:null;},store:function(property,value){var storage=get(Slick.uidOf(this));storage[property]=value;return this;},eliminate:function(property){var storage=get(Slick.uidOf(this));delete storage[property];return this;}});if(window.attachEvent&&!window.addEventListener)window.addListener('unload',function(){Object.each(collected,clean);if(window.CollectGarbage)CollectGarbage();});Element.Properties={};Element.Properties.style={set:function(style){this.style.cssText=style;},get:function(){return this.style.cssText;},erase:function(){this.style.cssText='';}};Element.Properties.tag={get:function(){return this.tagName.toLowerCase();}};Element.Properties.html={set:function(html){if(html==null)html='';else if(typeOf(html)=='array')html=html.join('');this.innerHTML=html;},erase:function(){this.innerHTML='';}};var div=document.createElement('div');div.innerHTML='<nav></nav>';var supportsHTML5Elements=(div.childNodes.length==1);if(!supportsHTML5Elements){var tags='abbr article aside audio canvas datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video'.split(' '),fragment=document.createDocumentFragment(),l=tags.length;while(l--)fragment.createElement(tags[l]);}
div=null;var supportsTableInnerHTML=Function.attempt(function(){var table=document.createElement('table');table.innerHTML='<tr><td></td></tr>';return true;});var tr=document.createElement('tr'),html='<td></td>';tr.innerHTML=html;var supportsTRInnerHTML=(tr.innerHTML==html);tr=null;if(!supportsTableInnerHTML||!supportsTRInnerHTML||!supportsHTML5Elements){Element.Properties.html.set=(function(set){var translations={table:[1,'<table>','</table>'],select:[1,'<select>','</select>'],tbody:[2,'<table><tbody>','</tbody></table>'],tr:[3,'<table><tbody><tr>','</tr></tbody></table>']};translations.thead=translations.tfoot=translations.tbody;return function(html){var wrap=translations[this.get('tag')];if(!wrap&&!supportsHTML5Elements)wrap=[0,'',''];if(!wrap)return set.call(this,html);var level=wrap[0],wrapper=document.createElement('div'),target=wrapper;if(!supportsHTML5Elements)fragment.appendChild(wrapper);wrapper.innerHTML=[wrap[1],html,wrap[2]].flatten().join('');while(level--)target=target.firstChild;this.empty().adopt(target.childNodes);if(!supportsHTML5Elements)fragment.removeChild(wrapper);wrapper=null;};})(Element.Properties.html.set);}
var testForm=document.createElement('form');testForm.innerHTML='<select><option>s</option></select>';if(testForm.firstChild.value!='s')Element.Properties.value={set:function(value){var tag=this.get('tag');if(tag!='select')return this.setProperty('value',value);var options=this.getElements('option');for(var i=0;i<options.length;i++){var option=options[i],attr=option.getAttributeNode('value'),optionValue=(attr&&attr.specified)?option.value:option.get('text');if(optionValue==value)return option.selected=true;}},get:function(){var option=this,tag=option.get('tag');if(tag!='select'&&tag!='option')return this.getProperty('value');if(tag=='select'&&!(option=option.getSelected()[0]))return'';var attr=option.getAttributeNode('value');return(attr&&attr.specified)?option.value:option.get('text');}};testForm=null;if(document.createElement('div').getAttributeNode('id'))Element.Properties.id={set:function(id){this.id=this.getAttributeNode('id').value=id;},get:function(){return this.id||null;},erase:function(){this.id=this.getAttributeNode('id').value='';}};})();(function(){var html=document.html;var el=document.createElement('div');el.style.color='red';el.style.color=null;var doesNotRemoveStyles=el.style.color=='red';el=null;Element.Properties.styles={set:function(styles){this.setStyles(styles);}};var hasOpacity=(html.style.opacity!=null),hasFilter=(html.style.filter!=null),reAlpha=/alpha\(opacity=([\d.]+)\)/i;var setVisibility=function(element,opacity){element.store('$opacity',opacity);element.style.visibility=opacity>0||opacity==null?'visible':'hidden';};var setOpacity=(hasOpacity?function(element,opacity){element.style.opacity=opacity;}:(hasFilter?function(element,opacity){var style=element.style;if(!element.currentStyle||!element.currentStyle.hasLayout)style.zoom=1;if(opacity==null||opacity==1)opacity='';else opacity='alpha(opacity='+(opacity*100).limit(0,100).round()+')';var filter=style.filter||element.getComputedStyle('filter')||'';style.filter=reAlpha.test(filter)?filter.replace(reAlpha,opacity):filter+opacity;if(!style.filter)style.removeAttribute('filter');}:setVisibility));var getOpacity=(hasOpacity?function(element){var opacity=element.style.opacity||element.getComputedStyle('opacity');return(opacity=='')?1:opacity.toFloat();}:(hasFilter?function(element){var filter=(element.style.filter||element.getComputedStyle('filter')),opacity;if(filter)opacity=filter.match(reAlpha);return(opacity==null||filter==null)?1:(opacity[1]/100);}:function(element){var opacity=element.retrieve('$opacity');if(opacity==null)opacity=(element.style.visibility=='hidden'?0:1);return opacity;}));var floatName=(html.style.cssFloat==null)?'styleFloat':'cssFloat';Element.implement({getComputedStyle:function(property){if(this.currentStyle)return this.currentStyle[property.camelCase()];var defaultView=Element.getDocument(this).defaultView,computed=defaultView?defaultView.getComputedStyle(this,null):null;return(computed)?computed.getPropertyValue((property==floatName)?'float':property.hyphenate()):null;},setStyle:function(property,value){if(property=='opacity'){if(value!=null)value=parseFloat(value);setOpacity(this,value);return this;}
property=(property=='float'?floatName:property).camelCase();if(typeOf(value)!='string'){var map=(Element.Styles[property]||'@').split(' ');value=Array.from(value).map(function(val,i){if(!map[i])return'';return(typeOf(val)=='number')?map[i].replace('@',Math.round(val)):val;}).join(' ');}else if(value==String(Number(value))){value=Math.round(value);}
this.style[property]=value;if((value==''||value==null)&&doesNotRemoveStyles&&this.style.removeAttribute){this.style.removeAttribute(property);}
return this;},getStyle:function(property){if(property=='opacity')return getOpacity(this);property=(property=='float'?floatName:property).camelCase();var result=this.style[property];if(!result||property=='zIndex'){result=[];for(var style in Element.ShortStyles){if(property!=style)continue;for(var s in Element.ShortStyles[style])result.push(this.getStyle(s));return result.join(' ');}
result=this.getComputedStyle(property);}
if(result){result=String(result);var color=result.match(/rgba?\([\d\s,]+\)/);if(color)result=result.replace(color[0],color[0].rgbToHex());}
if(Browser.opera||Browser.ie){if((/^(height|width)$/).test(property)&&!(/px$/.test(result))){var values=(property=='width')?['left','right']:['top','bottom'],size=0;values.each(function(value){size+=this.getStyle('border-'+value+'-width').toInt()+this.getStyle('padding-'+value).toInt();},this);return this['offset'+property.capitalize()]-size+'px';}
if(Browser.ie&&(/^border(.+)Width|margin|padding/).test(property)&&isNaN(parseFloat(result))){return'0px';}}
return result;},setStyles:function(styles){for(var style in styles)this.setStyle(style,styles[style]);return this;},getStyles:function(){var result={};Array.flatten(arguments).each(function(key){result[key]=this.getStyle(key);},this);return result;}});Element.Styles={left:'@px',top:'@px',bottom:'@px',right:'@px',width:'@px',height:'@px',maxWidth:'@px',maxHeight:'@px',minWidth:'@px',minHeight:'@px',backgroundColor:'rgb(@, @, @)',backgroundPosition:'@px @px',color:'rgb(@, @, @)',fontSize:'@px',letterSpacing:'@px',lineHeight:'@px',clip:'rect(@px @px @px @px)',margin:'@px @px @px @px',padding:'@px @px @px @px',border:'@px @ rgb(@, @, @) @px @ rgb(@, @, @) @px @ rgb(@, @, @)',borderWidth:'@px @px @px @px',borderStyle:'@ @ @ @',borderColor:'rgb(@, @, @) rgb(@, @, @) rgb(@, @, @) rgb(@, @, @)',zIndex:'@','zoom':'@',fontWeight:'@',textIndent:'@px',opacity:'@'};Element.ShortStyles={margin:{},padding:{},border:{},borderWidth:{},borderStyle:{},borderColor:{}};['Top','Right','Bottom','Left'].each(function(direction){var Short=Element.ShortStyles;var All=Element.Styles;['margin','padding'].each(function(style){var sd=style+direction;Short[style][sd]=All[sd]='@px';});var bd='border'+direction;Short.border[bd]=All[bd]='@px @ rgb(@, @, @)';var bdw=bd+'Width',bds=bd+'Style',bdc=bd+'Color';Short[bd]={};Short.borderWidth[bdw]=Short[bd][bdw]=All[bdw]='@px';Short.borderStyle[bds]=Short[bd][bds]=All[bds]='@';Short.borderColor[bdc]=Short[bd][bdc]=All[bdc]='rgb(@, @, @)';});})();(function(){var _keys={};var DOMEvent=this.DOMEvent=new Type('DOMEvent',function(event,win){if(!win)win=window;event=event||win.event;if(event.$extended)return event;this.event=event;this.$extended=true;this.shift=event.shiftKey;this.control=event.ctrlKey;this.alt=event.altKey;this.meta=event.metaKey;var type=this.type=event.type;var target=event.target||event.srcElement;while(target&&target.nodeType==3)target=target.parentNode;this.target=document.id(target);if(type.indexOf('key')==0){var code=this.code=(event.which||event.keyCode);this.key=_keys[code];if(type=='keydown'){if(code>111&&code<124)this.key='f'+(code-111);else if(code>95&&code<106)this.key=code-96;}
if(this.key==null)this.key=String.fromCharCode(code).toLowerCase();}else if(type=='click'||type=='dblclick'||type=='contextmenu'||type=='DOMMouseScroll'||type.indexOf('mouse')==0){var doc=win.document;doc=(!doc.compatMode||doc.compatMode=='CSS1Compat')?doc.html:doc.body;this.page={x:(event.pageX!=null)?event.pageX:event.clientX+doc.scrollLeft,y:(event.pageY!=null)?event.pageY:event.clientY+doc.scrollTop};this.client={x:(event.pageX!=null)?event.pageX-win.pageXOffset:event.clientX,y:(event.pageY!=null)?event.pageY-win.pageYOffset:event.clientY};if(type=='DOMMouseScroll'||type=='mousewheel')
this.wheel=(event.wheelDelta)?event.wheelDelta/120:-(event.detail||0)/3;this.rightClick=(event.which==3||event.button==2);if(type=='mouseover'||type=='mouseout'){var related=event.relatedTarget||event[(type=='mouseover'?'from':'to')+'Element'];while(related&&related.nodeType==3)related=related.parentNode;this.relatedTarget=document.id(related);}}else if(type.indexOf('touch')==0||type.indexOf('gesture')==0){this.rotation=event.rotation;this.scale=event.scale;this.targetTouches=event.targetTouches;this.changedTouches=event.changedTouches;var touches=this.touches=event.touches;if(touches&&touches[0]){var touch=touches[0];this.page={x:touch.pageX,y:touch.pageY};this.client={x:touch.clientX,y:touch.clientY};}}
if(!this.client)this.client={};if(!this.page)this.page={};});DOMEvent.implement({stop:function(){return this.preventDefault().stopPropagation();},stopPropagation:function(){if(this.event.stopPropagation)this.event.stopPropagation();else this.event.cancelBubble=true;return this;},preventDefault:function(){if(this.event.preventDefault)this.event.preventDefault();else this.event.returnValue=false;return this;}});DOMEvent.defineKey=function(code,key){_keys[code]=key;return this;};DOMEvent.defineKeys=DOMEvent.defineKey.overloadSetter(true);DOMEvent.defineKeys({'38':'up','40':'down','37':'left','39':'right','27':'esc','32':'space','8':'backspace','9':'tab','46':'delete','13':'enter'});})();(function(){Element.Properties.events={set:function(events){this.addEvents(events);}};[Element,Window,Document].invoke('implement',{addEvent:function(type,fn){var events=this.retrieve('events',{});if(!events[type])events[type]={keys:[],values:[]};if(events[type].keys.contains(fn))return this;events[type].keys.push(fn);var realType=type,custom=Element.Events[type],condition=fn,self=this;if(custom){if(custom.onAdd)custom.onAdd.call(this,fn,type);if(custom.condition){condition=function(event){if(custom.condition.call(this,event,type))return fn.call(this,event);return true;};}
if(custom.base)realType=Function.from(custom.base).call(this,type);}
var defn=function(){return fn.call(self);};var nativeEvent=Element.NativeEvents[realType];if(nativeEvent){if(nativeEvent==2){defn=function(event){event=new DOMEvent(event,self.getWindow());if(condition.call(self,event)===false)event.stop();};}
this.addListener(realType,defn,arguments[2]);}
events[type].values.push(defn);return this;},removeEvent:function(type,fn){var events=this.retrieve('events');if(!events||!events[type])return this;var list=events[type];var index=list.keys.indexOf(fn);if(index==-1)return this;var value=list.values[index];delete list.keys[index];delete list.values[index];var custom=Element.Events[type];if(custom){if(custom.onRemove)custom.onRemove.call(this,fn,type);if(custom.base)type=Function.from(custom.base).call(this,type);}
return(Element.NativeEvents[type])?this.removeListener(type,value,arguments[2]):this;},addEvents:function(events){for(var event in events)this.addEvent(event,events[event]);return this;},removeEvents:function(events){var type;if(typeOf(events)=='object'){for(type in events)this.removeEvent(type,events[type]);return this;}
var attached=this.retrieve('events');if(!attached)return this;if(!events){for(type in attached)this.removeEvents(type);this.eliminate('events');}else if(attached[events]){attached[events].keys.each(function(fn){this.removeEvent(events,fn);},this);delete attached[events];}
return this;},fireEvent:function(type,args,delay){var events=this.retrieve('events');if(!events||!events[type])return this;args=Array.from(args);events[type].keys.each(function(fn){if(delay)fn.delay(delay,this,args);else fn.apply(this,args);},this);return this;},cloneEvents:function(from,type){from=document.id(from);var events=from.retrieve('events');if(!events)return this;if(!type){for(var eventType in events)this.cloneEvents(from,eventType);}else if(events[type]){events[type].keys.each(function(fn){this.addEvent(type,fn);},this);}
return this;}});Element.NativeEvents={click:2,dblclick:2,mouseup:2,mousedown:2,contextmenu:2,mousewheel:2,DOMMouseScroll:2,mouseover:2,mouseout:2,mousemove:2,selectstart:2,selectend:2,keydown:2,keypress:2,keyup:2,orientationchange:2,touchstart:2,touchmove:2,touchend:2,touchcancel:2,gesturestart:2,gesturechange:2,gestureend:2,focus:2,blur:2,change:2,reset:2,select:2,submit:2,paste:2,input:2,load:2,unload:1,beforeunload:2,resize:1,move:1,DOMContentLoaded:1,readystatechange:1,error:1,abort:1,scroll:1};Element.Events={mousewheel:{base:(Browser.firefox)?'DOMMouseScroll':'mousewheel'}};if('onmouseenter'in document.documentElement){Element.NativeEvents.mouseenter=Element.NativeEvents.mouseleave=2;}else{var check=function(event){var related=event.relatedTarget;if(related==null)return true;if(!related)return false;return(related!=this&&related.prefix!='xul'&&typeOf(this)!='document'&&!this.contains(related));};Element.Events.mouseenter={base:'mouseover',condition:check};Element.Events.mouseleave={base:'mouseout',condition:check};}
if(!window.addEventListener){Element.NativeEvents.propertychange=2;Element.Events.change={base:function(){var type=this.type;return(this.get('tag')=='input'&&(type=='radio'||type=='checkbox'))?'propertychange':'change'},condition:function(event){return this.type!='radio'||(event.event.propertyName=='checked'&&this.checked);}}}})();(function(){var eventListenerSupport=!!window.addEventListener;Element.NativeEvents.focusin=Element.NativeEvents.focusout=2;var bubbleUp=function(self,match,fn,event,target){while(target&&target!=self){if(match(target,event))return fn.call(target,event,target);target=document.id(target.parentNode);}};var map={mouseenter:{base:'mouseover'},mouseleave:{base:'mouseout'},focus:{base:'focus'+(eventListenerSupport?'':'in'),capture:true},blur:{base:eventListenerSupport?'blur':'focusout',capture:true}};var _key='$delegation:';var formObserver=function(type){return{base:'focusin',remove:function(self,uid){var list=self.retrieve(_key+type+'listeners',{})[uid];if(list&&list.forms)for(var i=list.forms.length;i--;){list.forms[i].removeEvent(type,list.fns[i]);}},listen:function(self,match,fn,event,target,uid){var form=(target.get('tag')=='form')?target:event.target.getParent('form');if(!form)return;var listeners=self.retrieve(_key+type+'listeners',{}),listener=listeners[uid]||{forms:[],fns:[]},forms=listener.forms,fns=listener.fns;if(forms.indexOf(form)!=-1)return;forms.push(form);var _fn=function(event){bubbleUp(self,match,fn,event,target);};form.addEvent(type,_fn);fns.push(_fn);listeners[uid]=listener;self.store(_key+type+'listeners',listeners);}};};var inputObserver=function(type){return{base:'focusin',listen:function(self,match,fn,event,target){var events={blur:function(){this.removeEvents(events);}};events[type]=function(event){bubbleUp(self,match,fn,event,target);};event.target.addEvents(events);}};};if(!eventListenerSupport)Object.append(map,{submit:formObserver('submit'),reset:formObserver('reset'),change:inputObserver('change'),select:inputObserver('select')});var proto=Element.prototype,addEvent=proto.addEvent,removeEvent=proto.removeEvent;var relay=function(old,method){return function(type,fn,useCapture){if(type.indexOf(':relay')==-1)return old.call(this,type,fn,useCapture);var parsed=Slick.parse(type).expressions[0][0];if(parsed.pseudos[0].key!='relay')return old.call(this,type,fn,useCapture);var newType=parsed.tag;parsed.pseudos.slice(1).each(function(pseudo){newType+=':'+pseudo.key+(pseudo.value?'('+pseudo.value+')':'');});old.call(this,type,fn);return method.call(this,newType,parsed.pseudos[0].value,fn);};};var delegation={addEvent:function(type,match,fn){var storage=this.retrieve('$delegates',{}),stored=storage[type];if(stored)for(var _uid in stored){if(stored[_uid].fn==fn&&stored[_uid].match==match)return this;}
var _type=type,_match=match,_fn=fn,_map=map[type]||{};type=_map.base||_type;match=function(target){return Slick.match(target,_match);};var elementEvent=Element.Events[_type];if(elementEvent&&elementEvent.condition){var __match=match,condition=elementEvent.condition;match=function(target,event){return __match(target,event)&&condition.call(target,event,type);};}
var self=this,uid=String.uniqueID();var delegator=_map.listen?function(event,target){if(!target&&event&&event.target)target=event.target;if(target)_map.listen(self,match,fn,event,target,uid);}:function(event,target){if(!target&&event&&event.target)target=event.target;if(target)bubbleUp(self,match,fn,event,target);};if(!stored)stored={};stored[uid]={match:_match,fn:_fn,delegator:delegator};storage[_type]=stored;return addEvent.call(this,type,delegator,_map.capture);},removeEvent:function(type,match,fn,_uid){var storage=this.retrieve('$delegates',{}),stored=storage[type];if(!stored)return this;if(_uid){var _type=type,delegator=stored[_uid].delegator,_map=map[type]||{};type=_map.base||_type;if(_map.remove)_map.remove(this,_uid);delete stored[_uid];storage[_type]=stored;return removeEvent.call(this,type,delegator);}
var __uid,s;if(fn)for(__uid in stored){s=stored[__uid];if(s.match==match&&s.fn==fn)return delegation.removeEvent.call(this,type,match,fn,__uid);}else for(__uid in stored){s=stored[__uid];if(s.match==match)delegation.removeEvent.call(this,type,match,s.fn,__uid);}
return this;}};[Element,Window,Document].invoke('implement',{addEvent:relay(addEvent,delegation.addEvent),removeEvent:relay(removeEvent,delegation.removeEvent)});})();(function(){var element=document.createElement('div'),child=document.createElement('div');element.style.height='0';element.appendChild(child);var brokenOffsetParent=(child.offsetParent===element);element=child=null;var isOffset=function(el){return styleString(el,'position')!='static'||isBody(el);};var isOffsetStatic=function(el){return isOffset(el)||(/^(?:table|td|th)$/i).test(el.tagName);};Element.implement({scrollTo:function(x,y){if(isBody(this)){this.getWindow().scrollTo(x,y);}else{this.scrollLeft=x;this.scrollTop=y;}
return this;},getSize:function(){if(isBody(this))return this.getWindow().getSize();return{x:this.offsetWidth,y:this.offsetHeight};},getScrollSize:function(){if(isBody(this))return this.getWindow().getScrollSize();return{x:this.scrollWidth,y:this.scrollHeight};},getScroll:function(){if(isBody(this))return this.getWindow().getScroll();return{x:this.scrollLeft,y:this.scrollTop};},getScrolls:function(){var element=this.parentNode,position={x:0,y:0};while(element&&!isBody(element)){position.x+=element.scrollLeft;position.y+=element.scrollTop;element=element.parentNode;}
return position;},getOffsetParent:brokenOffsetParent?function(){var element=this;if(isBody(element)||styleString(element,'position')=='fixed')return null;var isOffsetCheck=(styleString(element,'position')=='static')?isOffsetStatic:isOffset;while((element=element.parentNode)){if(isOffsetCheck(element))return element;}
return null;}:function(){var element=this;if(isBody(element)||styleString(element,'position')=='fixed')return null;try{return element.offsetParent;}catch(e){}
return null;},getOffsets:function(){if(this.getBoundingClientRect&&!Browser.Platform.ios){var bound=this.getBoundingClientRect(),html=document.id(this.getDocument().documentElement),htmlScroll=html.getScroll(),elemScrolls=this.getScrolls(),isFixed=(styleString(this,'position')=='fixed');return{x:bound.left.toInt()+elemScrolls.x+((isFixed)?0:htmlScroll.x)-html.clientLeft,y:bound.top.toInt()+elemScrolls.y+((isFixed)?0:htmlScroll.y)-html.clientTop};}
var element=this,position={x:0,y:0};if(isBody(this))return position;while(element&&!isBody(element)){position.x+=element.offsetLeft;position.y+=element.offsetTop;if(Browser.firefox){if(!borderBox(element)){position.x+=leftBorder(element);position.y+=topBorder(element);}
var parent=element.parentNode;if(parent&&styleString(parent,'overflow')!='visible'){position.x+=leftBorder(parent);position.y+=topBorder(parent);}}else if(element!=this&&Browser.safari){position.x+=leftBorder(element);position.y+=topBorder(element);}
element=element.offsetParent;}
if(Browser.firefox&&!borderBox(this)){position.x-=leftBorder(this);position.y-=topBorder(this);}
return position;},getPosition:function(relative){var offset=this.getOffsets(),scroll=this.getScrolls();var position={x:offset.x-scroll.x,y:offset.y-scroll.y};if(relative&&(relative=document.id(relative))){var relativePosition=relative.getPosition();return{x:position.x-relativePosition.x-leftBorder(relative),y:position.y-relativePosition.y-topBorder(relative)};}
return position;},getCoordinates:function(element){if(isBody(this))return this.getWindow().getCoordinates();var position=this.getPosition(element),size=this.getSize();var obj={left:position.x,top:position.y,width:size.x,height:size.y};obj.right=obj.left+obj.width;obj.bottom=obj.top+obj.height;return obj;},computePosition:function(obj){return{left:obj.x-styleNumber(this,'margin-left'),top:obj.y-styleNumber(this,'margin-top')};},setPosition:function(obj){return this.setStyles(this.computePosition(obj));}});[Document,Window].invoke('implement',{getSize:function(){var doc=getCompatElement(this);return{x:doc.clientWidth,y:doc.clientHeight};},getScroll:function(){var win=this.getWindow(),doc=getCompatElement(this);return{x:win.pageXOffset||doc.scrollLeft,y:win.pageYOffset||doc.scrollTop};},getScrollSize:function(){var doc=getCompatElement(this),min=this.getSize(),body=this.getDocument().body;return{x:Math.max(doc.scrollWidth,body.scrollWidth,min.x),y:Math.max(doc.scrollHeight,body.scrollHeight,min.y)};},getPosition:function(){return{x:0,y:0};},getCoordinates:function(){var size=this.getSize();return{top:0,left:0,bottom:size.y,right:size.x,height:size.y,width:size.x};}});var styleString=Element.getComputedStyle;function styleNumber(element,style){return styleString(element,style).toInt()||0;}
function borderBox(element){return styleString(element,'-moz-box-sizing')=='border-box';}
function topBorder(element){return styleNumber(element,'border-top-width');}
function leftBorder(element){return styleNumber(element,'border-left-width');}
function isBody(element){return(/^(?:body|html)$/i).test(element.tagName);}
function getCompatElement(element){var doc=element.getDocument();return(!doc.compatMode||doc.compatMode=='CSS1Compat')?doc.html:doc.body;}})();Element.alias({position:'setPosition'});[Window,Document,Element].invoke('implement',{getHeight:function(){return this.getSize().y;},getWidth:function(){return this.getSize().x;},getScrollTop:function(){return this.getScroll().y;},getScrollLeft:function(){return this.getScroll().x;},getScrollHeight:function(){return this.getScrollSize().y;},getScrollWidth:function(){return this.getScrollSize().x;},getTop:function(){return this.getPosition().y;},getLeft:function(){return this.getPosition().x;}});(function(){var Fx=this.Fx=new Class({Implements:[Chain,Events,Options],options:{fps:60,unit:false,duration:500,frames:null,frameSkip:true,link:'ignore'},initialize:function(options){this.subject=this.subject||this;this.setOptions(options);},getTransition:function(){return function(p){return-(Math.cos(Math.PI*p)-1)/2;};},step:function(now){if(this.options.frameSkip){var diff=(this.time!=null)?(now-this.time):0,frames=diff/this.frameInterval;this.time=now;this.frame+=frames;}else{this.frame++;}
if(this.frame<this.frames){var delta=this.transition(this.frame/this.frames);this.set(this.compute(this.from,this.to,delta));}else{this.frame=this.frames;this.set(this.compute(this.from,this.to,1));this.stop();}},set:function(now){return now;},compute:function(from,to,delta){return Fx.compute(from,to,delta);},check:function(){if(!this.isRunning())return true;switch(this.options.link){case'cancel':this.cancel();return true;case'chain':this.chain(this.caller.pass(arguments,this));return false;}
return false;},start:function(from,to){if(!this.check(from,to))return this;this.from=from;this.to=to;this.frame=(this.options.frameSkip)?0:-1;this.time=null;this.transition=this.getTransition();var frames=this.options.frames,fps=this.options.fps,duration=this.options.duration;this.duration=Fx.Durations[duration]||duration.toInt();this.frameInterval=1000/fps;this.frames=frames||Math.round(this.duration/this.frameInterval);this.fireEvent('start',this.subject);pushInstance.call(this,fps);return this;},stop:function(){if(this.isRunning()){this.time=null;pullInstance.call(this,this.options.fps);if(this.frames==this.frame){this.fireEvent('complete',this.subject);if(!this.callChain())this.fireEvent('chainComplete',this.subject);}else{this.fireEvent('stop',this.subject);}}
return this;},cancel:function(){if(this.isRunning()){this.time=null;pullInstance.call(this,this.options.fps);this.frame=this.frames;this.fireEvent('cancel',this.subject).clearChain();}
return this;},pause:function(){if(this.isRunning()){this.time=null;pullInstance.call(this,this.options.fps);}
return this;},resume:function(){if((this.frame<this.frames)&&!this.isRunning())pushInstance.call(this,this.options.fps);return this;},isRunning:function(){var list=instances[this.options.fps];return list&&list.contains(this);}});Fx.compute=function(from,to,delta){return(to-from)*delta+from;};Fx.Durations={'short':250,'normal':500,'long':1000};var instances={},timers={};var loop=function(){var now=Date.now();for(var i=this.length;i--;){var instance=this[i];if(instance)instance.step(now);}};var pushInstance=function(fps){var list=instances[fps]||(instances[fps]=[]);list.push(this);if(!timers[fps])timers[fps]=loop.periodical(Math.round(1000/fps),list);};var pullInstance=function(fps){var list=instances[fps];if(list){list.erase(this);if(!list.length&&timers[fps]){delete instances[fps];timers[fps]=clearInterval(timers[fps]);}}};})();Fx.CSS=new Class({Extends:Fx,prepare:function(element,property,values){values=Array.from(values);var from=values[0],to=values[1];if(to==null){to=from;from=element.getStyle(property);var unit=this.options.unit;if(unit&&from.slice(-unit.length)!=unit&&parseFloat(from)!=0){element.setStyle(property,to+unit);var value=element.getComputedStyle(property);if(!(/px$/.test(value))){value=element.style[('pixel-'+property).camelCase()];if(value==null){var left=element.style.left;element.style.left=to+unit;value=element.style.pixelLeft;element.style.left=left;}}
from=(to||1)/(parseFloat(value)||1)*(parseFloat(from)||0);element.setStyle(property,from+unit);}}
return{from:this.parse(from),to:this.parse(to)};},parse:function(value){value=Function.from(value)();value=(typeof value=='string')?value.split(' '):Array.from(value);return value.map(function(val){val=String(val);var found=false;Object.each(Fx.CSS.Parsers,function(parser,key){if(found)return;var parsed=parser.parse(val);if(parsed||parsed===0)found={value:parsed,parser:parser};});found=found||{value:val,parser:Fx.CSS.Parsers.String};return found;});},compute:function(from,to,delta){var computed=[];(Math.min(from.length,to.length)).times(function(i){computed.push({value:from[i].parser.compute(from[i].value,to[i].value,delta),parser:from[i].parser});});computed.$family=Function.from('fx:css:value');return computed;},serve:function(value,unit){if(typeOf(value)!='fx:css:value')value=this.parse(value);var returned=[];value.each(function(bit){returned=returned.concat(bit.parser.serve(bit.value,unit));});return returned;},render:function(element,property,value,unit){element.setStyle(property,this.serve(value,unit));},search:function(selector){if(Fx.CSS.Cache[selector])return Fx.CSS.Cache[selector];var to={},selectorTest=new RegExp('^'+selector.escapeRegExp()+'$');Array.each(document.styleSheets,function(sheet,j){var href=sheet.href;if(href&&href.contains('://')&&!href.contains(document.domain))return;var rules=sheet.rules||sheet.cssRules;Array.each(rules,function(rule,i){if(!rule.style)return;var selectorText=(rule.selectorText)?rule.selectorText.replace(/^\w+/,function(m){return m.toLowerCase();}):null;if(!selectorText||!selectorTest.test(selectorText))return;Object.each(Element.Styles,function(value,style){if(!rule.style[style]||Element.ShortStyles[style])return;value=String(rule.style[style]);to[style]=((/^rgb/).test(value))?value.rgbToHex():value;});});});return Fx.CSS.Cache[selector]=to;}});Fx.CSS.Cache={};Fx.CSS.Parsers={Color:{parse:function(value){if(value.match(/^#[0-9a-f]{3,6}$/i))return value.hexToRgb(true);return((value=value.match(/(\d+),\s*(\d+),\s*(\d+)/)))?[value[1],value[2],value[3]]:false;},compute:function(from,to,delta){return from.map(function(value,i){return Math.round(Fx.compute(from[i],to[i],delta));});},serve:function(value){return value.map(Number);}},Number:{parse:parseFloat,compute:Fx.compute,serve:function(value,unit){return(unit)?value+unit:value;}},String:{parse:Function.from(false),compute:function(zero,one){return one;},serve:function(zero){return zero;}}};Fx.Tween=new Class({Extends:Fx.CSS,initialize:function(element,options){this.element=this.subject=document.id(element);this.parent(options);},set:function(property,now){if(arguments.length==1){now=property;property=this.property||this.options.property;}
this.render(this.element,property,now,this.options.unit);return this;},start:function(property,from,to){if(!this.check(property,from,to))return this;var args=Array.flatten(arguments);this.property=this.options.property||args.shift();var parsed=this.prepare(this.element,this.property,args);return this.parent(parsed.from,parsed.to);}});Element.Properties.tween={set:function(options){this.get('tween').cancel().setOptions(options);return this;},get:function(){var tween=this.retrieve('tween');if(!tween){tween=new Fx.Tween(this,{link:'cancel'});this.store('tween',tween);}
return tween;}};Element.implement({tween:function(property,from,to){this.get('tween').start(property,from,to);return this;},fade:function(how){var fade=this.get('tween'),method,args=['opacity'].append(arguments),toggle;if(args[1]==null)args[1]='toggle';switch(args[1]){case'in':method='start';args[1]=1;break;case'out':method='start';args[1]=0;break;case'show':method='set';args[1]=1;break;case'hide':method='set';args[1]=0;break;case'toggle':var flag=this.retrieve('fade:flag',this.getStyle('opacity')==1);method='start';args[1]=flag?0:1;this.store('fade:flag',!flag);toggle=true;break;default:method='start';}
if(!toggle)this.eliminate('fade:flag');fade[method].apply(fade,args);var to=args[args.length-1];if(method=='set'||to!=0)this.setStyle('visibility',to==0?'hidden':'visible');else fade.chain(function(){this.element.setStyle('visibility','hidden');this.callChain();});return this;},highlight:function(start,end){if(!end){end=this.retrieve('highlight:original',this.getStyle('background-color'));end=(end=='transparent')?'#fff':end;}
var tween=this.get('tween');tween.start('background-color',start||'#ffff88',end).chain(function(){this.setStyle('background-color',this.retrieve('highlight:original'));tween.callChain();}.bind(this));return this;}});Fx.Morph=new Class({Extends:Fx.CSS,initialize:function(element,options){this.element=this.subject=document.id(element);this.parent(options);},set:function(now){if(typeof now=='string')now=this.search(now);for(var p in now)this.render(this.element,p,now[p],this.options.unit);return this;},compute:function(from,to,delta){var now={};for(var p in from)now[p]=this.parent(from[p],to[p],delta);return now;},start:function(properties){if(!this.check(properties))return this;if(typeof properties=='string')properties=this.search(properties);var from={},to={};for(var p in properties){var parsed=this.prepare(this.element,p,properties[p]);from[p]=parsed.from;to[p]=parsed.to;}
return this.parent(from,to);}});Element.Properties.morph={set:function(options){this.get('morph').cancel().setOptions(options);return this;},get:function(){var morph=this.retrieve('morph');if(!morph){morph=new Fx.Morph(this,{link:'cancel'});this.store('morph',morph);}
return morph;}};Element.implement({morph:function(props){this.get('morph').start(props);return this;}});Fx.implement({getTransition:function(){var trans=this.options.transition||Fx.Transitions.Sine.easeInOut;if(typeof trans=='string'){var data=trans.split(':');trans=Fx.Transitions;trans=trans[data[0]]||trans[data[0].capitalize()];if(data[1])trans=trans['ease'+data[1].capitalize()+(data[2]?data[2].capitalize():'')];}
return trans;}});Fx.Transition=function(transition,params){params=Array.from(params);var easeIn=function(pos){return transition(pos,params);};return Object.append(easeIn,{easeIn:easeIn,easeOut:function(pos){return 1-transition(1-pos,params);},easeInOut:function(pos){return(pos<=0.5?transition(2*pos,params):(2-transition(2*(1-pos),params)))/2;}});};Fx.Transitions={linear:function(zero){return zero;}};Fx.Transitions.extend=function(transitions){for(var transition in transitions)Fx.Transitions[transition]=new Fx.Transition(transitions[transition]);};Fx.Transitions.extend({Pow:function(p,x){return Math.pow(p,x&&x[0]||6);},Expo:function(p){return Math.pow(2,8*(p-1));},Circ:function(p){return 1-Math.sin(Math.acos(p));},Sine:function(p){return 1-Math.cos(p*Math.PI/2);},Back:function(p,x){x=x&&x[0]||1.618;return Math.pow(p,2)*((x+1)*p-x);},Bounce:function(p){var value;for(var a=0,b=1;1;a+=b,b/=2){if(p>=(7-4*a)/11){value=b*b-Math.pow((11-6*a-11*p)/4,2);break;}}
return value;},Elastic:function(p,x){return Math.pow(2,10*--p)*Math.cos(20*p*Math.PI*(x&&x[0]||1)/3);}});['Quad','Cubic','Quart','Quint'].each(function(transition,i){Fx.Transitions[transition]=new Fx.Transition(function(p){return Math.pow(p,i+2);});});(function(){var empty=function(){},progressSupport=('onprogress'in new Browser.Request);var Request=this.Request=new Class({Implements:[Chain,Events,Options],options:{url:'',data:'',headers:{'X-Requested-With':'XMLHttpRequest','Accept':'text/javascript, text/html, application/xml, text/xml, */*'},async:true,format:false,method:'post',link:'ignore',isSuccess:null,emulation:true,urlEncoded:true,encoding:'utf-8',evalScripts:false,evalResponse:false,timeout:0,noCache:false},initialize:function(options){this.xhr=new Browser.Request();this.setOptions(options);this.headers=this.options.headers;},onStateChange:function(){var xhr=this.xhr;if(xhr.readyState!=4||!this.running)return;this.running=false;this.status=0;Function.attempt(function(){var status=xhr.status;this.status=(status==1223)?204:status;}.bind(this));xhr.onreadystatechange=empty;if(progressSupport)xhr.onprogress=xhr.onloadstart=empty;clearTimeout(this.timer);this.response={text:this.xhr.responseText||'',xml:this.xhr.responseXML};if(this.options.isSuccess.call(this,this.status))
this.success(this.response.text,this.response.xml);else
this.failure();},isSuccess:function(){var status=this.status;return(status>=200&&status<300);},isRunning:function(){return!!this.running;},processScripts:function(text){if(this.options.evalResponse||(/(ecma|java)script/).test(this.getHeader('Content-type')))return Browser.exec(text);return text.stripScripts(this.options.evalScripts);},success:function(text,xml){this.onSuccess(this.processScripts(text),xml);},onSuccess:function(){this.fireEvent('complete',arguments).fireEvent('success',arguments).callChain();},failure:function(){this.onFailure();},onFailure:function(){this.fireEvent('complete').fireEvent('failure',this.xhr);},loadstart:function(event){this.fireEvent('loadstart',[event,this.xhr]);},progress:function(event){this.fireEvent('progress',[event,this.xhr]);},timeout:function(){this.fireEvent('timeout',this.xhr);},setHeader:function(name,value){this.headers[name]=value;return this;},getHeader:function(name){return Function.attempt(function(){return this.xhr.getResponseHeader(name);}.bind(this));},check:function(){if(!this.running)return true;switch(this.options.link){case'cancel':this.cancel();return true;case'chain':this.chain(this.caller.pass(arguments,this));return false;}
return false;},send:function(options){if(!this.check(options))return this;this.options.isSuccess=this.options.isSuccess||this.isSuccess;this.running=true;var type=typeOf(options);if(type=='string'||type=='element')options={data:options};var old=this.options;options=Object.append({data:old.data,url:old.url,method:old.method},options);var data=options.data,url=String(options.url),method=options.method.toLowerCase();switch(typeOf(data)){case'element':data=document.id(data).toQueryString();break;case'object':case'hash':data=Object.toQueryString(data);}
if(this.options.format){var format='format='+this.options.format;data=(data)?format+'&'+data:format;}
if(this.options.emulation&&!['get','post'].contains(method)){var _method='_method='+method;data=(data)?_method+'&'+data:_method;method='post';}
if(this.options.urlEncoded&&['post','put'].contains(method)){var encoding=(this.options.encoding)?'; charset='+this.options.encoding:'';this.headers['Content-type']='application/x-www-form-urlencoded'+encoding;}
if(!url)url=document.location.pathname;var trimPosition=url.lastIndexOf('/');if(trimPosition>-1&&(trimPosition=url.indexOf('#'))>-1)url=url.substr(0,trimPosition);if(this.options.noCache)
url+=(url.contains('?')?'&':'?')+String.uniqueID();if(data&&method=='get'){url+=(url.contains('?')?'&':'?')+data;data=null;}
var xhr=this.xhr;if(progressSupport){xhr.onloadstart=this.loadstart.bind(this);xhr.onprogress=this.progress.bind(this);}
xhr.open(method.toUpperCase(),url,this.options.async,this.options.user,this.options.password);if(this.options.user&&'withCredentials'in xhr)xhr.withCredentials=true;xhr.onreadystatechange=this.onStateChange.bind(this);Object.each(this.headers,function(value,key){try{xhr.setRequestHeader(key,value);}catch(e){this.fireEvent('exception',[key,value]);}},this);this.fireEvent('request');xhr.send(data);if(!this.options.async)this.onStateChange();else if(this.options.timeout)this.timer=this.timeout.delay(this.options.timeout,this);return this;},cancel:function(){if(!this.running)return this;this.running=false;var xhr=this.xhr;xhr.abort();clearTimeout(this.timer);xhr.onreadystatechange=empty;if(progressSupport)xhr.onprogress=xhr.onloadstart=empty;this.xhr=new Browser.Request();this.fireEvent('cancel');return this;}});var methods={};['get','post','put','delete','GET','POST','PUT','DELETE'].each(function(method){methods[method]=function(data){var object={method:method};if(data!=null)object.data=data;return this.send(object);};});Request.implement(methods);Element.Properties.send={set:function(options){var send=this.get('send').cancel();send.setOptions(options);return this;},get:function(){var send=this.retrieve('send');if(!send){send=new Request({data:this,link:'cancel',method:this.get('method')||'post',url:this.get('action')});this.store('send',send);}
return send;}};Element.implement({send:function(url){var sender=this.get('send');sender.send({data:this,url:url||sender.options.url});return this;}});})();if(typeof JSON=='undefined')this.JSON={};(function(){var special={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'};var escape=function(chr){return special[chr]||'\\u'+('0000'+chr.charCodeAt(0).toString(16)).slice(-4);};JSON.validate=function(string){string=string.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,'');return(/^[\],:{}\s]*$/).test(string);};JSON.encode=JSON.stringify?function(obj){return JSON.stringify(obj);}:function(obj){if(obj&&obj.toJSON)obj=obj.toJSON();switch(typeOf(obj)){case'string':return'"'+obj.replace(/[\x00-\x1f\\"]/g,escape)+'"';case'array':return'['+obj.map(JSON.encode).clean()+']';case'object':case'hash':var string=[];Object.each(obj,function(value,key){var json=JSON.encode(value);if(json)string.push(JSON.encode(key)+':'+json);});return'{'+string+'}';case'number':case'boolean':return''+obj;case'null':return'null';}
return null;};JSON.decode=function(string,secure){if(!string||typeOf(string)!='string')return null;if(secure||JSON.secure){if(JSON.parse)return JSON.parse(string);if(!JSON.validate(string))throw new Error('JSON could not decode the input; security is enabled and the value is not secure.');}
return eval('('+string+')');};})();Request.JSON=new Class({Extends:Request,options:{secure:true},initialize:function(options){this.parent(options);Object.append(this.headers,{'Accept':'application/json','X-Request':'JSON'});},success:function(text){var json;try{json=this.response.json=JSON.decode(text,this.options.secure);}catch(error){this.fireEvent('error',[text,error]);return;}
if(json==null)this.onFailure();else this.onSuccess(json,text);}});var Cookie=new Class({Implements:Options,options:{path:'/',domain:false,duration:false,secure:false,document:document,encode:true},initialize:function(key,options){this.key=key;this.setOptions(options);},write:function(value){if(this.options.encode)value=encodeURIComponent(value);if(this.options.domain)value+='; domain='+this.options.domain;if(this.options.path)value+='; path='+this.options.path;if(this.options.duration){var date=new Date();date.setTime(date.getTime()+this.options.duration*24*60*60*1000);value+='; expires='+date.toGMTString();}
if(this.options.secure)value+='; secure';this.options.document.cookie=this.key+'='+value;return this;},read:function(){var value=this.options.document.cookie.match('(?:^|;)\\s*'+this.key.escapeRegExp()+'=([^;]*)');return(value)?decodeURIComponent(value[1]):null;},dispose:function(){new Cookie(this.key,Object.merge({},this.options,{duration:-1})).write('');return this;}});Cookie.write=function(key,value,options){return new Cookie(key,options).write(value);};Cookie.read=function(key){return new Cookie(key).read();};Cookie.dispose=function(key,options){return new Cookie(key,options).dispose();};(function(window,document){var ready,loaded,checks=[],shouldPoll,timer,testElement=document.createElement('div');var domready=function(){clearTimeout(timer);if(ready)return;Browser.loaded=ready=true;document.removeListener('DOMContentLoaded',domready).removeListener('readystatechange',check);document.fireEvent('domready');window.fireEvent('domready');};var check=function(){for(var i=checks.length;i--;)if(checks[i]()){domready();return true;}
return false;};var poll=function(){clearTimeout(timer);if(!check())timer=setTimeout(poll,10);};document.addListener('DOMContentLoaded',domready);var doScrollWorks=function(){try{testElement.doScroll();return true;}catch(e){}
return false;};if(testElement.doScroll&&!doScrollWorks()){checks.push(doScrollWorks);shouldPoll=true;}
if(document.readyState)checks.push(function(){var state=document.readyState;return(state=='loaded'||state=='complete');});if('onreadystatechange'in document)document.addListener('readystatechange',check);else shouldPoll=true;if(shouldPoll)poll();Element.Events.domready={onAdd:function(fn){if(ready)fn.call(this);}};Element.Events.load={base:'load',onAdd:function(fn){if(loaded&&this==window)fn.call(this);},condition:function(){if(this==window){domready();delete Element.Events.load;}
return true;}};window.addEvent('load',function(){loaded=true;});})(window,document);

// /root/.xbmc/addons/service.downloadmanager.InternetPVR/CouchPotatoServer/couchpotato/static/scripts/library/mootools_more.js:1401311743
MooTools.More={'version':'1.4.0.1','build':'a4244edf2aa97ac8a196fc96082dd35af1abab87'};(function(){Events.Pseudos=function(pseudos,addEvent,removeEvent){var storeKey='_monitorEvents:';var storageOf=function(object){return{store:object.store?function(key,value){object.store(storeKey+key,value);}:function(key,value){(object._monitorEvents||(object._monitorEvents={}))[key]=value;},retrieve:object.retrieve?function(key,dflt){return object.retrieve(storeKey+key,dflt);}:function(key,dflt){if(!object._monitorEvents)return dflt;return object._monitorEvents[key]||dflt;}};};var splitType=function(type){if(type.indexOf(':')==-1||!pseudos)return null;var parsed=Slick.parse(type).expressions[0][0],parsedPseudos=parsed.pseudos,l=parsedPseudos.length,splits=[];while(l--){var pseudo=parsedPseudos[l].key,listener=pseudos[pseudo];if(listener!=null)splits.push({event:parsed.tag,value:parsedPseudos[l].value,pseudo:pseudo,original:type,listener:listener});}
return splits.length?splits:null;};return{addEvent:function(type,fn,internal){var split=splitType(type);if(!split)return addEvent.call(this,type,fn,internal);var storage=storageOf(this),events=storage.retrieve(type,[]),eventType=split[0].event,args=Array.slice(arguments,2),stack=fn,self=this;split.each(function(item){var listener=item.listener,stackFn=stack;if(listener==false)eventType+=':'+item.pseudo+'('+item.value+')';else stack=function(){listener.call(self,item,stackFn,arguments,stack);};});events.include({type:eventType,event:fn,monitor:stack});storage.store(type,events);if(type!=eventType)addEvent.apply(this,[type,fn].concat(args));return addEvent.apply(this,[eventType,stack].concat(args));},removeEvent:function(type,fn){var split=splitType(type);if(!split)return removeEvent.call(this,type,fn);var storage=storageOf(this),events=storage.retrieve(type);if(!events)return this;var args=Array.slice(arguments,2);removeEvent.apply(this,[type,fn].concat(args));events.each(function(monitor,i){if(!fn||monitor.event==fn)removeEvent.apply(this,[monitor.type,monitor.monitor].concat(args));delete events[i];},this);storage.store(type,events);return this;}};};var pseudos={once:function(split,fn,args,monitor){fn.apply(this,args);this.removeEvent(split.event,monitor).removeEvent(split.original,fn);},throttle:function(split,fn,args){if(!fn._throttled){fn.apply(this,args);fn._throttled=setTimeout(function(){fn._throttled=false;},split.value||250);}},pause:function(split,fn,args){clearTimeout(fn._pause);fn._pause=fn.delay(split.value||250,this,args);}};Events.definePseudo=function(key,listener){pseudos[key]=listener;return this;};Events.lookupPseudo=function(key){return pseudos[key];};var proto=Events.prototype;Events.implement(Events.Pseudos(pseudos,proto.addEvent,proto.removeEvent));['Request','Fx'].each(function(klass){if(this[klass])this[klass].implement(Events.prototype);});})();(function(){var defined=function(value){return value!=null;};var hasOwnProperty=Object.prototype.hasOwnProperty;Object.extend({getFromPath:function(source,parts){if(typeof parts=='string')parts=parts.split('.');for(var i=0,l=parts.length;i<l;i++){if(hasOwnProperty.call(source,parts[i]))source=source[parts[i]];else return null;}
return source;},cleanValues:function(object,method){method=method||defined;for(var key in object)if(!method(object[key])){delete object[key];}
return object;},erase:function(object,key){if(hasOwnProperty.call(object,key))delete object[key];return object;},run:function(object){var args=Array.slice(arguments,1);for(var key in object)if(object[key].apply){object[key].apply(object,args);}
return object;}});})();(function(){var current=null,locales={},inherits={};var getSet=function(set){if(instanceOf(set,Locale.Set))return set;else return locales[set];};var Locale=this.Locale={define:function(locale,set,key,value){var name;if(instanceOf(locale,Locale.Set)){name=locale.name;if(name)locales[name]=locale;}else{name=locale;if(!locales[name])locales[name]=new Locale.Set(name);locale=locales[name];}
if(set)locale.define(set,key,value);if(!current)current=locale;return locale;},use:function(locale){locale=getSet(locale);if(locale){current=locale;this.fireEvent('change',locale);}
return this;},getCurrent:function(){return current;},get:function(key,args){return(current)?current.get(key,args):'';},inherit:function(locale,inherits,set){locale=getSet(locale);if(locale)locale.inherit(inherits,set);return this;},list:function(){return Object.keys(locales);}};Object.append(Locale,new Events);Locale.Set=new Class({sets:{},inherits:{locales:[],sets:{}},initialize:function(name){this.name=name||'';},define:function(set,key,value){var defineData=this.sets[set];if(!defineData)defineData={};if(key){if(typeOf(key)=='object')defineData=Object.merge(defineData,key);else defineData[key]=value;}
this.sets[set]=defineData;return this;},get:function(key,args,_base){var value=Object.getFromPath(this.sets,key);if(value!=null){var type=typeOf(value);if(type=='function')value=value.apply(null,Array.from(args));else if(type=='object')value=Object.clone(value);return value;}
var index=key.indexOf('.'),set=index<0?key:key.substr(0,index),names=(this.inherits.sets[set]||[]).combine(this.inherits.locales).include('en-US');if(!_base)_base=[];for(var i=0,l=names.length;i<l;i++){if(_base.contains(names[i]))continue;_base.include(names[i]);var locale=locales[names[i]];if(!locale)continue;value=locale.get(key,args,_base);if(value!=null)return value;}
return'';},inherit:function(names,set){names=Array.from(names);if(set&&!this.inherits.sets[set])this.inherits.sets[set]=[];var l=names.length;while(l--)(set?this.inherits.sets[set]:this.inherits.locales).unshift(names[l]);return this;}});})();Locale.define('en-US','Date',{months:['January','February','March','April','May','June','July','August','September','October','November','December'],months_abbr:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],days:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],days_abbr:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],dateOrder:['month','date','year'],shortDate:'%m/%d/%Y',shortTime:'%I:%M%p',AM:'AM',PM:'PM',firstDayOfWeek:0,ordinal:function(dayOfMonth){return(dayOfMonth>3&&dayOfMonth<21)?'th':['th','st','nd','rd','th'][Math.min(dayOfMonth%10,4)];},lessThanMinuteAgo:'less than a minute ago',minuteAgo:'about a minute ago',minutesAgo:'{delta} minutes ago',hourAgo:'about an hour ago',hoursAgo:'about {delta} hours ago',dayAgo:'1 day ago',daysAgo:'{delta} days ago',weekAgo:'1 week ago',weeksAgo:'{delta} weeks ago',monthAgo:'1 month ago',monthsAgo:'{delta} months ago',yearAgo:'1 year ago',yearsAgo:'{delta} years ago',lessThanMinuteUntil:'less than a minute from now',minuteUntil:'about a minute from now',minutesUntil:'{delta} minutes from now',hourUntil:'about an hour from now',hoursUntil:'about {delta} hours from now',dayUntil:'1 day from now',daysUntil:'{delta} days from now',weekUntil:'1 week from now',weeksUntil:'{delta} weeks from now',monthUntil:'1 month from now',monthsUntil:'{delta} months from now',yearUntil:'1 year from now',yearsUntil:'{delta} years from now'});(function(){var Date=this.Date;var DateMethods=Date.Methods={ms:'Milliseconds',year:'FullYear',min:'Minutes',mo:'Month',sec:'Seconds',hr:'Hours'};['Date','Day','FullYear','Hours','Milliseconds','Minutes','Month','Seconds','Time','TimezoneOffset','Week','Timezone','GMTOffset','DayOfYear','LastMonth','LastDayOfMonth','UTCDate','UTCDay','UTCFullYear','AMPM','Ordinal','UTCHours','UTCMilliseconds','UTCMinutes','UTCMonth','UTCSeconds','UTCMilliseconds'].each(function(method){Date.Methods[method.toLowerCase()]=method;});var pad=function(n,digits,string){if(digits==1)return n;return n<Math.pow(10,digits-1)?(string||'0')+pad(n,digits-1,string):n;};Date.implement({set:function(prop,value){prop=prop.toLowerCase();var method=DateMethods[prop]&&'set'+DateMethods[prop];if(method&&this[method])this[method](value);return this;}.overloadSetter(),get:function(prop){prop=prop.toLowerCase();var method=DateMethods[prop]&&'get'+DateMethods[prop];if(method&&this[method])return this[method]();return null;}.overloadGetter(),clone:function(){return new Date(this.get('time'));},increment:function(interval,times){interval=interval||'day';times=times!=null?times:1;switch(interval){case'year':return this.increment('month',times*12);case'month':var d=this.get('date');this.set('date',1).set('mo',this.get('mo')+times);return this.set('date',d.min(this.get('lastdayofmonth')));case'week':return this.increment('day',times*7);case'day':return this.set('date',this.get('date')+times);}
if(!Date.units[interval])throw new Error(interval+' is not a supported interval');return this.set('time',this.get('time')+times*Date.units[interval]());},decrement:function(interval,times){return this.increment(interval,-1*(times!=null?times:1));},isLeapYear:function(){return Date.isLeapYear(this.get('year'));},clearTime:function(){return this.set({hr:0,min:0,sec:0,ms:0});},diff:function(date,resolution){if(typeOf(date)=='string')date=Date.parse(date);return((date-this)/Date.units[resolution||'day'](3,3)).round();},getLastDayOfMonth:function(){return Date.daysInMonth(this.get('mo'),this.get('year'));},getDayOfYear:function(){return(Date.UTC(this.get('year'),this.get('mo'),this.get('date')+1)
-Date.UTC(this.get('year'),0,1))/Date.units.day();},setDay:function(day,firstDayOfWeek){if(firstDayOfWeek==null){firstDayOfWeek=Date.getMsg('firstDayOfWeek');if(firstDayOfWeek==='')firstDayOfWeek=1;}
day=(7+Date.parseDay(day,true)-firstDayOfWeek)%7;var currentDay=(7+this.get('day')-firstDayOfWeek)%7;return this.increment('day',day-currentDay);},getWeek:function(firstDayOfWeek){if(firstDayOfWeek==null){firstDayOfWeek=Date.getMsg('firstDayOfWeek');if(firstDayOfWeek==='')firstDayOfWeek=1;}
var date=this,dayOfWeek=(7+date.get('day')-firstDayOfWeek)%7,dividend=0,firstDayOfYear;if(firstDayOfWeek==1){var month=date.get('month'),startOfWeek=date.get('date')-dayOfWeek;if(month==11&&startOfWeek>28)return 1;if(month==0&&startOfWeek<-2){date=new Date(date).decrement('day',dayOfWeek);dayOfWeek=0;}
firstDayOfYear=new Date(date.get('year'),0,1).get('day')||7;if(firstDayOfYear>4)dividend=-7;}else{firstDayOfYear=new Date(date.get('year'),0,1).get('day');}
dividend+=date.get('dayofyear');dividend+=6-dayOfWeek;dividend+=(7+firstDayOfYear-firstDayOfWeek)%7;return(dividend/7);},getOrdinal:function(day){return Date.getMsg('ordinal',day||this.get('date'));},getTimezone:function(){return this.toString().replace(/^.*? ([A-Z]{3}).[0-9]{4}.*$/,'$1').replace(/^.*?\(([A-Z])[a-z]+ ([A-Z])[a-z]+ ([A-Z])[a-z]+\)$/,'$1$2$3');},getGMTOffset:function(){var off=this.get('timezoneOffset');return((off>0)?'-':'+')+pad((off.abs()/60).floor(),2)+pad(off%60,2);},setAMPM:function(ampm){ampm=ampm.toUpperCase();var hr=this.get('hr');if(hr>11&&ampm=='AM')return this.decrement('hour',12);else if(hr<12&&ampm=='PM')return this.increment('hour',12);return this;},getAMPM:function(){return(this.get('hr')<12)?'AM':'PM';},parse:function(str){this.set('time',Date.parse(str));return this;},isValid:function(date){if(!date)date=this;return typeOf(date)=='date'&&!isNaN(date.valueOf());},format:function(format){if(!this.isValid())return'invalid date';if(!format)format='%x %X';if(typeof format=='string')format=formats[format.toLowerCase()]||format;if(typeof format=='function')return format(this);var d=this;return format.replace(/%([a-z%])/gi,function($0,$1){switch($1){case'a':return Date.getMsg('days_abbr')[d.get('day')];case'A':return Date.getMsg('days')[d.get('day')];case'b':return Date.getMsg('months_abbr')[d.get('month')];case'B':return Date.getMsg('months')[d.get('month')];case'c':return d.format('%a %b %d %H:%M:%S %Y');case'd':return pad(d.get('date'),2);case'e':return pad(d.get('date'),2,' ');case'H':return pad(d.get('hr'),2);case'I':return pad((d.get('hr')%12)||12,2);case'j':return pad(d.get('dayofyear'),3);case'k':return pad(d.get('hr'),2,' ');case'l':return pad((d.get('hr')%12)||12,2,' ');case'L':return pad(d.get('ms'),3);case'm':return pad((d.get('mo')+1),2);case'M':return pad(d.get('min'),2);case'o':return d.get('ordinal');case'p':return Date.getMsg(d.get('ampm'));case's':return Math.round(d/1000);case'S':return pad(d.get('seconds'),2);case'T':return d.format('%H:%M:%S');case'U':return pad(d.get('week'),2);case'w':return d.get('day');case'x':return d.format(Date.getMsg('shortDate'));case'X':return d.format(Date.getMsg('shortTime'));case'y':return d.get('year').toString().substr(2);case'Y':return d.get('year');case'z':return d.get('GMTOffset');case'Z':return d.get('Timezone');}
return $1;});},toISOString:function(){return this.format('iso8601');}}).alias({toJSON:'toISOString',compare:'diff',strftime:'format'});var rfcDayAbbr=['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],rfcMonthAbbr=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];var formats={db:'%Y-%m-%d %H:%M:%S',compact:'%Y%m%dT%H%M%S','short':'%d %b %H:%M','long':'%B %d, %Y %H:%M',rfc822:function(date){return rfcDayAbbr[date.get('day')]+date.format(', %d ')+rfcMonthAbbr[date.get('month')]+date.format(' %Y %H:%M:%S %Z');},rfc2822:function(date){return rfcDayAbbr[date.get('day')]+date.format(', %d ')+rfcMonthAbbr[date.get('month')]+date.format(' %Y %H:%M:%S %z');},iso8601:function(date){return(date.getUTCFullYear()+'-'+
pad(date.getUTCMonth()+1,2)+'-'+
pad(date.getUTCDate(),2)+'T'+
pad(date.getUTCHours(),2)+':'+
pad(date.getUTCMinutes(),2)+':'+
pad(date.getUTCSeconds(),2)+'.'+
pad(date.getUTCMilliseconds(),3)+'Z');}};var parsePatterns=[],nativeParse=Date.parse;var parseWord=function(type,word,num){var ret=-1,translated=Date.getMsg(type+'s');switch(typeOf(word)){case'object':ret=translated[word.get(type)];break;case'number':ret=translated[word];if(!ret)throw new Error('Invalid '+type+' index: '+word);break;case'string':var match=translated.filter(function(name){return this.test(name);},new RegExp('^'+word,'i'));if(!match.length)throw new Error('Invalid '+type+' string');if(match.length>1)throw new Error('Ambiguous '+type);ret=match[0];}
return(num)?translated.indexOf(ret):ret;};var startCentury=1900,startYear=70;Date.extend({getMsg:function(key,args){return Locale.get('Date.'+key,args);},units:{ms:Function.from(1),second:Function.from(1000),minute:Function.from(60000),hour:Function.from(3600000),day:Function.from(86400000),week:Function.from(608400000),month:function(month,year){var d=new Date;return Date.daysInMonth(month!=null?month:d.get('mo'),year!=null?year:d.get('year'))*86400000;},year:function(year){year=year||new Date().get('year');return Date.isLeapYear(year)?31622400000:31536000000;}},daysInMonth:function(month,year){return[31,Date.isLeapYear(year)?29:28,31,30,31,30,31,31,30,31,30,31][month];},isLeapYear:function(year){return((year%4===0)&&(year%100!==0))||(year%400===0);},parse:function(from){var t=typeOf(from);if(t=='number')return new Date(from);if(t!='string')return from;from=from.clean();if(!from.length)return null;var parsed;parsePatterns.some(function(pattern){var bits=pattern.re.exec(from);return(bits)?(parsed=pattern.handler(bits)):false;});if(!(parsed&&parsed.isValid())){parsed=new Date(nativeParse(from));if(!(parsed&&parsed.isValid()))parsed=new Date(from.toInt());}
return parsed;},parseDay:function(day,num){return parseWord('day',day,num);},parseMonth:function(month,num){return parseWord('month',month,num);},parseUTC:function(value){var localDate=new Date(value);var utcSeconds=Date.UTC(localDate.get('year'),localDate.get('mo'),localDate.get('date'),localDate.get('hr'),localDate.get('min'),localDate.get('sec'),localDate.get('ms'));return new Date(utcSeconds);},orderIndex:function(unit){return Date.getMsg('dateOrder').indexOf(unit)+1;},defineFormat:function(name,format){formats[name]=format;return this;},defineParser:function(pattern){parsePatterns.push((pattern.re&&pattern.handler)?pattern:build(pattern));return this;},defineParsers:function(){Array.flatten(arguments).each(Date.defineParser);return this;},define2DigitYearStart:function(year){startYear=year%100;startCentury=year-startYear;return this;}}).extend({defineFormats:Date.defineFormat.overloadSetter()});var regexOf=function(type){return new RegExp('(?:'+Date.getMsg(type).map(function(name){return name.substr(0,3);}).join('|')+')[a-z]*');};var replacers=function(key){switch(key){case'T':return'%H:%M:%S';case'x':return((Date.orderIndex('month')==1)?'%m[-./]%d':'%d[-./]%m')+'([-./]%y)?';case'X':return'%H([.:]%M)?([.:]%S([.:]%s)?)? ?%p? ?%z?';}
return null;};var keys={d:/[0-2]?[0-9]|3[01]/,H:/[01]?[0-9]|2[0-3]/,I:/0?[1-9]|1[0-2]/,M:/[0-5]?\d/,s:/\d+/,o:/[a-z]*/,p:/[ap]\.?m\.?/,y:/\d{2}|\d{4}/,Y:/\d{4}/,z:/Z|[+-]\d{2}(?::?\d{2})?/};keys.m=keys.I;keys.S=keys.M;var currentLanguage;var recompile=function(language){currentLanguage=language;keys.a=keys.A=regexOf('days');keys.b=keys.B=regexOf('months');parsePatterns.each(function(pattern,i){if(pattern.format)parsePatterns[i]=build(pattern.format);});};var build=function(format){if(!currentLanguage)return{format:format};var parsed=[];var re=(format.source||format).replace(/%([a-z])/gi,function($0,$1){return replacers($1)||$0;}).replace(/\((?!\?)/g,'(?:').replace(/ (?!\?|\*)/g,',? ').replace(/%([a-z%])/gi,function($0,$1){var p=keys[$1];if(!p)return $1;parsed.push($1);return'('+p.source+')';}).replace(/\[a-z\]/gi,'[a-z\\u00c0-\\uffff;\&]');return{format:format,re:new RegExp('^'+re+'$','i'),handler:function(bits){bits=bits.slice(1).associate(parsed);var date=new Date().clearTime(),year=bits.y||bits.Y;if(year!=null)handle.call(date,'y',year);if('d'in bits)handle.call(date,'d',1);if('m'in bits||bits.b||bits.B)handle.call(date,'m',1);for(var key in bits)handle.call(date,key,bits[key]);return date;}};};var handle=function(key,value){if(!value)return this;switch(key){case'a':case'A':return this.set('day',Date.parseDay(value,true));case'b':case'B':return this.set('mo',Date.parseMonth(value,true));case'd':return this.set('date',value);case'H':case'I':return this.set('hr',value);case'm':return this.set('mo',value-1);case'M':return this.set('min',value);case'p':return this.set('ampm',value.replace(/\./g,''));case'S':return this.set('sec',value);case's':return this.set('ms',('0.'+value)*1000);case'w':return this.set('day',value);case'Y':return this.set('year',value);case'y':value=+value;if(value<100)value+=startCentury+(value<startYear?100:0);return this.set('year',value);case'z':if(value=='Z')value='+00';var offset=value.match(/([+-])(\d{2}):?(\d{2})?/);offset=(offset[1]+'1')*(offset[2]*60+(+offset[3]||0))+this.getTimezoneOffset();return this.set('time',this-offset*60000);}
return this;};Date.defineParsers('%Y([-./]%m([-./]%d((T| )%X)?)?)?','%Y%m%d(T%H(%M%S?)?)?','%x( %X)?','%d%o( %b( %Y)?)?( %X)?','%b( %d%o)?( %Y)?( %X)?','%Y %b( %d%o( %X)?)?','%o %b %d %X %z %Y','%T','%H:%M( ?%p)?');Locale.addEvent('change',function(language){if(Locale.get('Date'))recompile(language);}).fireEvent('change',Locale.getCurrent());})();Date.implement({timeDiffInWords:function(to){return Date.distanceOfTimeInWords(this,to||new Date);},timeDiff:function(to,separator){if(to==null)to=new Date;var delta=((to-this)/1000).floor().abs();var vals=[],durations=[60,60,24,365,0],names=['s','m','h','d','y'],value,duration;for(var item=0;item<durations.length;item++){if(item&&!delta)break;value=delta;if((duration=durations[item])){value=(delta%duration);delta=(delta/duration).floor();}
vals.unshift(value+(names[item]||''));}
return vals.join(separator||':');}}).extend({distanceOfTimeInWords:function(from,to){return Date.getTimePhrase(((to-from)/1000).toInt());},getTimePhrase:function(delta){var suffix=(delta<0)?'Until':'Ago';if(delta<0)delta*=-1;var units={minute:60,hour:60,day:24,week:7,month:52/12,year:12,eon:Infinity};var msg='lessThanMinute';for(var unit in units){var interval=units[unit];if(delta<1.5*interval){if(delta>0.75*interval)msg=unit;break;}
delta/=interval;msg=unit+'s';}
delta=delta.round();return Date.getMsg(msg+suffix,delta).substitute({delta:delta});}}).defineParsers({re:/^(?:tod|tom|yes)/i,handler:function(bits){var d=new Date().clearTime();switch(bits[0]){case'tom':return d.increment();case'yes':return d.decrement();default:return d;}}},{re:/^(next|last) ([a-z]+)$/i,handler:function(bits){var d=new Date().clearTime();var day=d.getDay();var newDay=Date.parseDay(bits[2],true);var addDays=newDay-day;if(newDay<=day)addDays+=7;if(bits[1]=='last')addDays-=7;return d.set('date',d.getDate()+addDays);}}).alias('timeAgoInWords','timeDiffInWords');(function(){var special={'a':/[]/g,'A':/[]/g,'c':/[]/g,'C':/[]/g,'d':/[]/g,'D':/[]/g,'e':/[]/g,'E':/[]/g,'g':/[]/g,'G':/[]/g,'i':/[]/g,'I':/[]/g,'l':/[]/g,'L':/[]/g,'n':/[]/g,'N':/[]/g,'o':/[]/g,'O':/[]/g,'r':/[]/g,'R':/[]/g,'s':/[]/g,'S':/[]/g,'t':/[]/g,'T':/[]/g,'ue':/[]/g,'UE':/[]/g,'u':/[]/g,'U':/[]/g,'y':/[]/g,'Y':/[]/g,'z':/[]/g,'Z':/[]/g,'th':/[]/g,'TH':/[]/g,'dh':/[]/g,'DH':/[]/g,'ss':/[]/g,'oe':/[]/g,'OE':/[]/g,'ae':/[]/g,'AE':/[]/g},tidy={' ':/[\xa0\u2002\u2003\u2009]/g,'*':/[\xb7]/g,'\'':/[\u2018\u2019]/g,'"':/[\u201c\u201d]/g,'...':/[\u2026]/g,'-':/[\u2013]/g,'&raquo;':/[\uFFFD]/g};var walk=function(string,replacements){var result=string,key;for(key in replacements)result=result.replace(replacements[key],key);return result;};var getRegexForTag=function(tag,contents){tag=tag||'';var regstr=contents?"<"+tag+"(?!\\w)[^>]*>([\\s\\S]*?)<\/"+tag+"(?!\\w)>":"<\/?"+tag+"([^>]+)?>",reg=new RegExp(regstr,"gi");return reg;};String.implement({standardize:function(){return walk(this,special);},repeat:function(times){return new Array(times+1).join(this);},pad:function(length,str,direction){if(this.length>=length)return this;var pad=(str==null?' ':''+str).repeat(length-this.length).substr(0,length-this.length);if(!direction||direction=='right')return this+pad;if(direction=='left')return pad+this;return pad.substr(0,(pad.length/2).floor())+this+pad.substr(0,(pad.length/2).ceil());},getTags:function(tag,contents){return this.match(getRegexForTag(tag,contents))||[];},stripTags:function(tag,contents){return this.replace(getRegexForTag(tag,contents),'');},tidy:function(){return walk(this,tidy);},truncate:function(max,trail,atChar){var string=this;if(trail==null&&arguments.length==1)trail='';if(string.length>max){string=string.substring(0,max);if(atChar){var index=string.lastIndexOf(atChar);if(index!=-1)string=string.substr(0,index);}
if(trail)string+=trail;}
return string;}});})();Element.implement({tidy:function(){this.set('value',this.get('value').tidy());},getTextInRange:function(start,end){return this.get('value').substring(start,end);},getSelectedText:function(){if(this.setSelectionRange)return this.getTextInRange(this.getSelectionStart(),this.getSelectionEnd());return document.selection.createRange().text;},getSelectedRange:function(){if(this.selectionStart!=null){return{start:this.selectionStart,end:this.selectionEnd};}
var pos={start:0,end:0};var range=this.getDocument().selection.createRange();if(!range||range.parentElement()!=this)return pos;var duplicate=range.duplicate();if(this.type=='text'){pos.start=0-duplicate.moveStart('character',-100000);pos.end=pos.start+range.text.length;}else{var value=this.get('value');var offset=value.length;duplicate.moveToElementText(this);duplicate.setEndPoint('StartToEnd',range);if(duplicate.text.length)offset-=value.match(/[\n\r]*$/)[0].length;pos.end=offset-duplicate.text.length;duplicate.setEndPoint('StartToStart',range);pos.start=offset-duplicate.text.length;}
return pos;},getSelectionStart:function(){return this.getSelectedRange().start;},getSelectionEnd:function(){return this.getSelectedRange().end;},setCaretPosition:function(pos){if(pos=='end')pos=this.get('value').length;this.selectRange(pos,pos);return this;},getCaretPosition:function(){return this.getSelectedRange().start;},selectRange:function(start,end){if(this.setSelectionRange){this.focus();this.setSelectionRange(start,end);}else{var value=this.get('value');var diff=value.substr(start,end-start).replace(/\r/g,'').length;start=value.substr(0,start).replace(/\r/g,'').length;var range=this.createTextRange();range.collapse(true);range.moveEnd('character',start+diff);range.moveStart('character',start);range.select();}
return this;},insertAtCursor:function(value,select){var pos=this.getSelectedRange();var text=this.get('value');this.set('value',text.substring(0,pos.start)+value+text.substring(pos.end,text.length));if(select!==false)this.selectRange(pos.start,pos.start+value.length);else this.setCaretPosition(pos.start+value.length);return this;},insertAroundCursor:function(options,select){options=Object.append({before:'',defaultMiddle:'',after:''},options);var value=this.getSelectedText()||options.defaultMiddle;var pos=this.getSelectedRange();var text=this.get('value');if(pos.start==pos.end){this.set('value',text.substring(0,pos.start)+options.before+value+options.after+text.substring(pos.end,text.length));this.selectRange(pos.start+options.before.length,pos.end+options.before.length+value.length);}else{var current=text.substring(pos.start,pos.end);this.set('value',text.substring(0,pos.start)+options.before+current+options.after+text.substring(pos.end,text.length));var selStart=pos.start+options.before.length;if(select!==false)this.selectRange(selStart,selStart+current.length);else this.setCaretPosition(selStart+text.length);}
return this;}});(function(){var getStylesList=function(styles,planes){var list=[];Object.each(planes,function(directions){Object.each(directions,function(edge){styles.each(function(style){list.push(style+'-'+edge+(style=='border'?'-width':''));});});});return list;};var calculateEdgeSize=function(edge,styles){var total=0;Object.each(styles,function(value,style){if(style.test(edge))total=total+value.toInt();});return total;};var isVisible=function(el){return!!(!el||el.offsetHeight||el.offsetWidth);};Element.implement({measure:function(fn){if(isVisible(this))return fn.call(this);var parent=this.getParent(),toMeasure=[];while(!isVisible(parent)&&parent!=document.body){toMeasure.push(parent.expose());parent=parent.getParent();}
var restore=this.expose(),result=fn.call(this);restore();toMeasure.each(function(restore){restore();});return result;},expose:function(){if(this.getStyle('display')!='none')return function(){};var before=this.style.cssText;this.setStyles({display:'block',position:'absolute',visibility:'hidden'});return function(){this.style.cssText=before;}.bind(this);},getDimensions:function(options){options=Object.merge({computeSize:false},options);var dim={x:0,y:0};var getSize=function(el,options){return(options.computeSize)?el.getComputedSize(options):el.getSize();};var parent=this.getParent('body');if(parent&&this.getStyle('display')=='none'){dim=this.measure(function(){return getSize(this,options);});}else if(parent){try{dim=getSize(this,options);}catch(e){}}
return Object.append(dim,(dim.x||dim.x===0)?{width:dim.x,height:dim.y}:{x:dim.width,y:dim.height});},getComputedSize:function(options){options=Object.merge({styles:['padding','border'],planes:{height:['top','bottom'],width:['left','right']},mode:'both'},options);var styles={},size={width:0,height:0},dimensions;if(options.mode=='vertical'){delete size.width;delete options.planes.width;}else if(options.mode=='horizontal'){delete size.height;delete options.planes.height;}
getStylesList(options.styles,options.planes).each(function(style){styles[style]=this.getStyle(style).toInt();},this);Object.each(options.planes,function(edges,plane){var capitalized=plane.capitalize(),style=this.getStyle(plane);if(style=='auto'&&!dimensions)dimensions=this.getDimensions();style=styles[plane]=(style=='auto')?dimensions[plane]:style.toInt();size['total'+capitalized]=style;edges.each(function(edge){var edgesize=calculateEdgeSize(edge,styles);size['computed'+edge.capitalize()]=edgesize;size['total'+capitalized]+=edgesize;});},this);return Object.append(size,styles);}});})();(function(original){var local=Element.Position={options:{relativeTo:document.body,position:{x:'center',y:'center'},offset:{x:0,y:0}},getOptions:function(element,options){options=Object.merge({},local.options,options);local.setPositionOption(options);local.setEdgeOption(options);local.setOffsetOption(element,options);local.setDimensionsOption(element,options);return options;},setPositionOption:function(options){options.position=local.getCoordinateFromValue(options.position);},setEdgeOption:function(options){var edgeOption=local.getCoordinateFromValue(options.edge);options.edge=edgeOption?edgeOption:(options.position.x=='center'&&options.position.y=='center')?{x:'center',y:'center'}:{x:'left',y:'top'};},setOffsetOption:function(element,options){var parentOffset={x:0,y:0},offsetParent=element.measure(function(){return document.id(this.getOffsetParent());}),parentScroll=offsetParent.getScroll();if(!offsetParent||offsetParent==element.getDocument().body)return;parentOffset=offsetParent.measure(function(){var position=this.getPosition();if(this.getStyle('position')=='fixed'){var scroll=window.getScroll();position.x+=scroll.x;position.y+=scroll.y;}
return position;});options.offset={parentPositioned:offsetParent!=document.id(options.relativeTo),x:options.offset.x-parentOffset.x+parentScroll.x,y:options.offset.y-parentOffset.y+parentScroll.y};},setDimensionsOption:function(element,options){options.dimensions=element.getDimensions({computeSize:true,styles:['padding','border','margin']});},getPosition:function(element,options){var position={};options=local.getOptions(element,options);var relativeTo=document.id(options.relativeTo)||document.body;local.setPositionCoordinates(options,position,relativeTo);if(options.edge)local.toEdge(position,options);var offset=options.offset;position.left=((position.x>=0||offset.parentPositioned||options.allowNegative)?position.x:0).toInt();position.top=((position.y>=0||offset.parentPositioned||options.allowNegative)?position.y:0).toInt();local.toMinMax(position,options);if(options.relFixedPosition||relativeTo.getStyle('position')=='fixed')local.toRelFixedPosition(relativeTo,position);if(options.ignoreScroll)local.toIgnoreScroll(relativeTo,position);if(options.ignoreMargins)local.toIgnoreMargins(position,options);position.left=Math.ceil(position.left);position.top=Math.ceil(position.top);delete position.x;delete position.y;return position;},setPositionCoordinates:function(options,position,relativeTo){var offsetY=options.offset.y,offsetX=options.offset.x,calc=(relativeTo==document.body)?window.getScroll():relativeTo.getPosition(),top=calc.y,left=calc.x,winSize=window.getSize();switch(options.position.x){case'left':position.x=left+offsetX;break;case'right':position.x=left+offsetX+relativeTo.offsetWidth;break;default:position.x=left+((relativeTo==document.body?winSize.x:relativeTo.offsetWidth)/2)+offsetX;break;}
switch(options.position.y){case'top':position.y=top+offsetY;break;case'bottom':position.y=top+offsetY+relativeTo.offsetHeight;break;default:position.y=top+((relativeTo==document.body?winSize.y:relativeTo.offsetHeight)/2)+offsetY;break;}},toMinMax:function(position,options){var xy={left:'x',top:'y'},value;['minimum','maximum'].each(function(minmax){['left','top'].each(function(lr){value=options[minmax]?options[minmax][xy[lr]]:null;if(value!=null&&((minmax=='minimum')?position[lr]<value:position[lr]>value))position[lr]=value;});});},toRelFixedPosition:function(relativeTo,position){var winScroll=window.getScroll();position.top+=winScroll.y;position.left+=winScroll.x;},toIgnoreScroll:function(relativeTo,position){var relScroll=relativeTo.getScroll();position.top-=relScroll.y;position.left-=relScroll.x;},toIgnoreMargins:function(position,options){position.left+=options.edge.x=='right'?options.dimensions['margin-right']:(options.edge.x!='center'?-options.dimensions['margin-left']:-options.dimensions['margin-left']+((options.dimensions['margin-right']+options.dimensions['margin-left'])/2));position.top+=options.edge.y=='bottom'?options.dimensions['margin-bottom']:(options.edge.y!='center'?-options.dimensions['margin-top']:-options.dimensions['margin-top']+((options.dimensions['margin-bottom']+options.dimensions['margin-top'])/2));},toEdge:function(position,options){var edgeOffset={},dimensions=options.dimensions,edge=options.edge;switch(edge.x){case'left':edgeOffset.x=0;break;case'right':edgeOffset.x=-dimensions.x-dimensions.computedRight-dimensions.computedLeft;break;default:edgeOffset.x=-(Math.round(dimensions.totalWidth/2));break;}
switch(edge.y){case'top':edgeOffset.y=0;break;case'bottom':edgeOffset.y=-dimensions.y-dimensions.computedTop-dimensions.computedBottom;break;default:edgeOffset.y=-(Math.round(dimensions.totalHeight/2));break;}
position.x+=edgeOffset.x;position.y+=edgeOffset.y;},getCoordinateFromValue:function(option){if(typeOf(option)!='string')return option;option=option.toLowerCase();return{x:option.test('left')?'left':(option.test('right')?'right':'center'),y:option.test(/upper|top/)?'top':(option.test('bottom')?'bottom':'center')};}};Element.implement({position:function(options){if(options&&(options.x!=null||options.y!=null)){return(original?original.apply(this,arguments):this);}
var position=this.setStyle('position','absolute').calculatePosition(options);return(options&&options.returnPos)?position:this.setStyles(position);},calculatePosition:function(options){return local.getPosition(this,options);}});})(Element.prototype.position);Element.implement({isDisplayed:function(){return this.getStyle('display')!='none';},isVisible:function(){var w=this.offsetWidth,h=this.offsetHeight;return(w==0&&h==0)?false:(w>0&&h>0)?true:this.style.display!='none';},toggle:function(){return this[this.isDisplayed()?'hide':'show']();},hide:function(){var d;try{d=this.getStyle('display');}catch(e){}
if(d=='none')return this;return this.store('element:_originalDisplay',d||'').setStyle('display','none');},show:function(display){if(!display&&this.isDisplayed())return this;display=display||this.retrieve('element:_originalDisplay')||'block';return this.setStyle('display',(display=='none')?'block':display);},swapClass:function(remove,add){return this.removeClass(remove).addClass(add);}});Document.implement({clearSelection:function(){if(window.getSelection){var selection=window.getSelection();if(selection&&selection.removeAllRanges)selection.removeAllRanges();}else if(document.selection&&document.selection.empty){try{document.selection.empty();}catch(e){}}}});(function(){Fx.Scroll=new Class({Extends:Fx,options:{offset:{x:0,y:0},wheelStops:true},initialize:function(element,options){this.element=this.subject=document.id(element);this.parent(options);if(typeOf(this.element)!='element')this.element=document.id(this.element.getDocument().body);if(this.options.wheelStops){var stopper=this.element,cancel=this.cancel.pass(false,this);this.addEvent('start',function(){stopper.addEvent('mousewheel',cancel);},true);this.addEvent('complete',function(){stopper.removeEvent('mousewheel',cancel);},true);}},set:function(){var now=Array.flatten(arguments);if(Browser.firefox)now=[Math.round(now[0]),Math.round(now[1])];this.element.scrollTo(now[0],now[1]);return this;},compute:function(from,to,delta){return[0,1].map(function(i){return Fx.compute(from[i],to[i],delta);});},start:function(x,y){if(!this.check(x,y))return this;var scroll=this.element.getScroll();return this.parent([scroll.x,scroll.y],[x,y]);},calculateScroll:function(x,y){var element=this.element,scrollSize=element.getScrollSize(),scroll=element.getScroll(),size=element.getSize(),offset=this.options.offset,values={x:x,y:y};for(var z in values){if(!values[z]&&values[z]!==0)values[z]=scroll[z];if(typeOf(values[z])!='number')values[z]=scrollSize[z]-size[z];values[z]+=offset[z];}
return[values.x,values.y];},toTop:function(){return this.start.apply(this,this.calculateScroll(false,0));},toLeft:function(){return this.start.apply(this,this.calculateScroll(0,false));},toRight:function(){return this.start.apply(this,this.calculateScroll('right',false));},toBottom:function(){return this.start.apply(this,this.calculateScroll(false,'bottom'));},toElement:function(el,axes){axes=axes?Array.from(axes):['x','y'];var scroll=isBody(this.element)?{x:0,y:0}:this.element.getScroll();var position=Object.map(document.id(el).getPosition(this.element),function(value,axis){return axes.contains(axis)?value+scroll[axis]:false;});return this.start.apply(this,this.calculateScroll(position.x,position.y));},toElementEdge:function(el,axes,offset){axes=axes?Array.from(axes):['x','y'];el=document.id(el);var to={},position=el.getPosition(this.element),size=el.getSize(),scroll=this.element.getScroll(),containerSize=this.element.getSize(),edge={x:position.x+size.x,y:position.y+size.y};['x','y'].each(function(axis){if(axes.contains(axis)){if(edge[axis]>scroll[axis]+containerSize[axis])to[axis]=edge[axis]-containerSize[axis];if(position[axis]<scroll[axis])to[axis]=position[axis];}
if(to[axis]==null)to[axis]=scroll[axis];if(offset&&offset[axis])to[axis]=to[axis]+offset[axis];},this);if(to.x!=scroll.x||to.y!=scroll.y)this.start(to.x,to.y);return this;},toElementCenter:function(el,axes,offset){axes=axes?Array.from(axes):['x','y'];el=document.id(el);var to={},position=el.getPosition(this.element),size=el.getSize(),scroll=this.element.getScroll(),containerSize=this.element.getSize();['x','y'].each(function(axis){if(axes.contains(axis)){to[axis]=position[axis]-(containerSize[axis]-size[axis])/2;}
if(to[axis]==null)to[axis]=scroll[axis];if(offset&&offset[axis])to[axis]=to[axis]+offset[axis];},this);if(to.x!=scroll.x||to.y!=scroll.y)this.start(to.x,to.y);return this;}});function isBody(element){return(/^(?:body|html)$/i).test(element.tagName);}})();Fx.Slide=new Class({Extends:Fx,options:{mode:'vertical',wrapper:false,hideOverflow:true,resetHeight:false},initialize:function(element,options){element=this.element=this.subject=document.id(element);this.parent(options);options=this.options;var wrapper=element.retrieve('wrapper'),styles=element.getStyles('margin','position','overflow');if(options.hideOverflow)styles=Object.append(styles,{overflow:'hidden'});if(options.wrapper)wrapper=document.id(options.wrapper).setStyles(styles);if(!wrapper)wrapper=new Element('div',{styles:styles}).wraps(element);element.store('wrapper',wrapper).setStyle('margin',0);if(element.getStyle('overflow')=='visible')element.setStyle('overflow','hidden');this.now=[];this.open=true;this.wrapper=wrapper;this.addEvent('complete',function(){this.open=(wrapper['offset'+this.layout.capitalize()]!=0);if(this.open&&this.options.resetHeight)wrapper.setStyle('height','');},true);},vertical:function(){this.margin='margin-top';this.layout='height';this.offset=this.element.offsetHeight;},horizontal:function(){this.margin='margin-left';this.layout='width';this.offset=this.element.offsetWidth;},set:function(now){this.element.setStyle(this.margin,now[0]);this.wrapper.setStyle(this.layout,now[1]);return this;},compute:function(from,to,delta){return[0,1].map(function(i){return Fx.compute(from[i],to[i],delta);});},start:function(how,mode){if(!this.check(how,mode))return this;this[mode||this.options.mode]();var margin=this.element.getStyle(this.margin).toInt(),layout=this.wrapper.getStyle(this.layout).toInt(),caseIn=[[margin,layout],[0,this.offset]],caseOut=[[margin,layout],[-this.offset,0]],start;switch(how){case'in':start=caseIn;break;case'out':start=caseOut;break;case'toggle':start=(layout==0)?caseIn:caseOut;}
return this.parent(start[0],start[1]);},slideIn:function(mode){return this.start('in',mode);},slideOut:function(mode){return this.start('out',mode);},hide:function(mode){this[mode||this.options.mode]();this.open=false;return this.set([-this.offset,0]);},show:function(mode){this[mode||this.options.mode]();this.open=true;return this.set([0,this.offset]);},toggle:function(mode){return this.start('toggle',mode);}});Element.Properties.slide={set:function(options){this.get('slide').cancel().setOptions(options);return this;},get:function(){var slide=this.retrieve('slide');if(!slide){slide=new Fx.Slide(this,{link:'cancel'});this.store('slide',slide);}
return slide;}};Element.implement({slide:function(how,mode){how=how||'toggle';var slide=this.get('slide'),toggle;switch(how){case'hide':slide.hide(mode);break;case'show':slide.show(mode);break;case'toggle':var flag=this.retrieve('slide:flag',slide.open);slide[flag?'slideOut':'slideIn'](mode);this.store('slide:flag',!flag);toggle=true;break;default:slide.start(how,mode);}
if(!toggle)this.eliminate('slide:flag');return this;}});var Drag=new Class({Implements:[Events,Options],options:{snap:6,unit:'px',grid:false,style:true,limit:false,handle:false,invert:false,preventDefault:false,stopPropagation:false,modifiers:{x:'left',y:'top'}},initialize:function(){var params=Array.link(arguments,{'options':Type.isObject,'element':function(obj){return obj!=null;}});this.element=document.id(params.element);this.document=this.element.getDocument();this.setOptions(params.options||{});var htype=typeOf(this.options.handle);this.handles=((htype=='array'||htype=='collection')?$$(this.options.handle):document.id(this.options.handle))||this.element;this.mouse={'now':{},'pos':{}};this.value={'start':{},'now':{}};this.selection=(Browser.ie)?'selectstart':'mousedown';if(Browser.ie&&!Drag.ondragstartFixed){document.ondragstart=Function.from(false);Drag.ondragstartFixed=true;}
this.bound={start:this.start.bind(this),check:this.check.bind(this),drag:this.drag.bind(this),stop:this.stop.bind(this),cancel:this.cancel.bind(this),eventStop:Function.from(false)};this.attach();},attach:function(){this.handles.addEvent('mousedown',this.bound.start);return this;},detach:function(){this.handles.removeEvent('mousedown',this.bound.start);return this;},start:function(event){var options=this.options;if(event.rightClick)return;if(options.preventDefault)event.preventDefault();if(options.stopPropagation)event.stopPropagation();this.mouse.start=event.page;this.fireEvent('beforeStart',this.element);var limit=options.limit;this.limit={x:[],y:[]};var z,coordinates;for(z in options.modifiers){if(!options.modifiers[z])continue;var style=this.element.getStyle(options.modifiers[z]);if(style&&!style.match(/px$/)){if(!coordinates)coordinates=this.element.getCoordinates(this.element.getOffsetParent());style=coordinates[options.modifiers[z]];}
if(options.style)this.value.now[z]=(style||0).toInt();else this.value.now[z]=this.element[options.modifiers[z]];if(options.invert)this.value.now[z]*=-1;this.mouse.pos[z]=event.page[z]-this.value.now[z];if(limit&&limit[z]){var i=2;while(i--){var limitZI=limit[z][i];if(limitZI||limitZI===0)this.limit[z][i]=(typeof limitZI=='function')?limitZI():limitZI;}}}
if(typeOf(this.options.grid)=='number')this.options.grid={x:this.options.grid,y:this.options.grid};var events={mousemove:this.bound.check,mouseup:this.bound.cancel};events[this.selection]=this.bound.eventStop;this.document.addEvents(events);},check:function(event){if(this.options.preventDefault)event.preventDefault();var distance=Math.round(Math.sqrt(Math.pow(event.page.x-this.mouse.start.x,2)+Math.pow(event.page.y-this.mouse.start.y,2)));if(distance>this.options.snap){this.cancel();this.document.addEvents({mousemove:this.bound.drag,mouseup:this.bound.stop});this.fireEvent('start',[this.element,event]).fireEvent('snap',this.element);}},drag:function(event){var options=this.options;if(options.preventDefault)event.preventDefault();this.mouse.now=event.page;for(var z in options.modifiers){if(!options.modifiers[z])continue;this.value.now[z]=this.mouse.now[z]-this.mouse.pos[z];if(options.invert)this.value.now[z]*=-1;if(options.limit&&this.limit[z]){if((this.limit[z][1]||this.limit[z][1]===0)&&(this.value.now[z]>this.limit[z][1])){this.value.now[z]=this.limit[z][1];}else if((this.limit[z][0]||this.limit[z][0]===0)&&(this.value.now[z]<this.limit[z][0])){this.value.now[z]=this.limit[z][0];}}
if(options.grid[z])this.value.now[z]-=((this.value.now[z]-(this.limit[z][0]||0))%options.grid[z]);if(options.style)this.element.setStyle(options.modifiers[z],this.value.now[z]+options.unit);else this.element[options.modifiers[z]]=this.value.now[z];}
this.fireEvent('drag',[this.element,event]);},cancel:function(event){this.document.removeEvents({mousemove:this.bound.check,mouseup:this.bound.cancel});if(event){this.document.removeEvent(this.selection,this.bound.eventStop);this.fireEvent('cancel',this.element);}},stop:function(event){var events={mousemove:this.bound.drag,mouseup:this.bound.stop};events[this.selection]=this.bound.eventStop;this.document.removeEvents(events);if(event)this.fireEvent('complete',[this.element,event]);}});Element.implement({makeResizable:function(options){var drag=new Drag(this,Object.merge({modifiers:{x:'width',y:'height'}},options));this.store('resizer',drag);return drag.addEvent('drag',function(){this.fireEvent('resize',drag);}.bind(this));}});Drag.Move=new Class({Extends:Drag,options:{droppables:[],container:false,precalculate:false,includeMargins:true,checkDroppables:true},initialize:function(element,options){this.parent(element,options);element=this.element;this.droppables=$$(this.options.droppables);this.container=document.id(this.options.container);if(this.container&&typeOf(this.container)!='element')
this.container=document.id(this.container.getDocument().body);if(this.options.style){if(this.options.modifiers.x=='left'&&this.options.modifiers.y=='top'){var parent=element.getOffsetParent(),styles=element.getStyles('left','top');if(parent&&(styles.left=='auto'||styles.top=='auto')){element.setPosition(element.getPosition(parent));}}
if(element.getStyle('position')=='static')element.setStyle('position','absolute');}
this.addEvent('start',this.checkDroppables,true);this.overed=null;},start:function(event){if(this.container)this.options.limit=this.calculateLimit();if(this.options.precalculate){this.positions=this.droppables.map(function(el){return el.getCoordinates();});}
this.parent(event);},calculateLimit:function(){var element=this.element,container=this.container,offsetParent=document.id(element.getOffsetParent())||document.body,containerCoordinates=container.getCoordinates(offsetParent),elementMargin={},elementBorder={},containerMargin={},containerBorder={},offsetParentPadding={};['top','right','bottom','left'].each(function(pad){elementMargin[pad]=element.getStyle('margin-'+pad).toInt();elementBorder[pad]=element.getStyle('border-'+pad).toInt();containerMargin[pad]=container.getStyle('margin-'+pad).toInt();containerBorder[pad]=container.getStyle('border-'+pad).toInt();offsetParentPadding[pad]=offsetParent.getStyle('padding-'+pad).toInt();},this);var width=element.offsetWidth+elementMargin.left+elementMargin.right,height=element.offsetHeight+elementMargin.top+elementMargin.bottom,left=0,top=0,right=containerCoordinates.right-containerBorder.right-width,bottom=containerCoordinates.bottom-containerBorder.bottom-height;if(this.options.includeMargins){left+=elementMargin.left;top+=elementMargin.top;}else{right+=elementMargin.right;bottom+=elementMargin.bottom;}
if(element.getStyle('position')=='relative'){var coords=element.getCoordinates(offsetParent);coords.left-=element.getStyle('left').toInt();coords.top-=element.getStyle('top').toInt();left-=coords.left;top-=coords.top;if(container.getStyle('position')!='relative'){left+=containerBorder.left;top+=containerBorder.top;}
right+=elementMargin.left-coords.left;bottom+=elementMargin.top-coords.top;if(container!=offsetParent){left+=containerMargin.left+offsetParentPadding.left;top+=((Browser.ie6||Browser.ie7)?0:containerMargin.top)+offsetParentPadding.top;}}else{left-=elementMargin.left;top-=elementMargin.top;if(container!=offsetParent){left+=containerCoordinates.left+containerBorder.left;top+=containerCoordinates.top+containerBorder.top;}}
return{x:[left,right],y:[top,bottom]};},getDroppableCoordinates:function(element){var position=element.getCoordinates();if(element.getStyle('position')=='fixed'){var scroll=window.getScroll();position.left+=scroll.x;position.right+=scroll.x;position.top+=scroll.y;position.bottom+=scroll.y;}
return position;},checkDroppables:function(){var overed=this.droppables.filter(function(el,i){el=this.positions?this.positions[i]:this.getDroppableCoordinates(el);var now=this.mouse.now;return(now.x>el.left&&now.x<el.right&&now.y<el.bottom&&now.y>el.top);},this).getLast();if(this.overed!=overed){if(this.overed)this.fireEvent('leave',[this.element,this.overed]);if(overed)this.fireEvent('enter',[this.element,overed]);this.overed=overed;}},drag:function(event){this.parent(event);if(this.options.checkDroppables&&this.droppables.length)this.checkDroppables();},stop:function(event){this.checkDroppables();this.fireEvent('drop',[this.element,this.overed,event]);this.overed=null;return this.parent(event);}});Element.implement({makeDraggable:function(options){var drag=new Drag.Move(this,options);this.store('dragger',drag);return drag;}});var Sortables=new Class({Implements:[Events,Options],options:{opacity:1,clone:false,revert:false,handle:false,dragOptions:{}},initialize:function(lists,options){this.setOptions(options);this.elements=[];this.lists=[];this.idle=true;this.addLists($$(document.id(lists)||lists));if(!this.options.clone)this.options.revert=false;if(this.options.revert)this.effect=new Fx.Morph(null,Object.merge({duration:250,link:'cancel'},this.options.revert));},attach:function(){this.addLists(this.lists);return this;},detach:function(){this.lists=this.removeLists(this.lists);return this;},addItems:function(){Array.flatten(arguments).each(function(element){this.elements.push(element);var start=element.retrieve('sortables:start',function(event){this.start.call(this,event,element);}.bind(this));(this.options.handle?element.getElement(this.options.handle)||element:element).addEvent('mousedown',start);},this);return this;},addLists:function(){Array.flatten(arguments).each(function(list){this.lists.include(list);this.addItems(list.getChildren());},this);return this;},removeItems:function(){return $$(Array.flatten(arguments).map(function(element){this.elements.erase(element);var start=element.retrieve('sortables:start');(this.options.handle?element.getElement(this.options.handle)||element:element).removeEvent('mousedown',start);return element;},this));},removeLists:function(){return $$(Array.flatten(arguments).map(function(list){this.lists.erase(list);this.removeItems(list.getChildren());return list;},this));},getClone:function(event,element){if(!this.options.clone)return new Element(element.tagName).inject(document.body);if(typeOf(this.options.clone)=='function')return this.options.clone.call(this,event,element,this.list);var clone=element.clone(true).setStyles({margin:0,position:'absolute',visibility:'hidden',width:element.getStyle('width')}).addEvent('mousedown',function(event){element.fireEvent('mousedown',event);});if(clone.get('html').test('radio')){clone.getElements('input[type=radio]').each(function(input,i){input.set('name','clone_'+i);if(input.get('checked'))element.getElements('input[type=radio]')[i].set('checked',true);});}
return clone.inject(this.list).setPosition(element.getPosition(element.getOffsetParent()));},getDroppables:function(){var droppables=this.list.getChildren().erase(this.clone).erase(this.element);if(!this.options.constrain)droppables.append(this.lists).erase(this.list);return droppables;},insert:function(dragging,element){var where='inside';if(this.lists.contains(element)){this.list=element;this.drag.droppables=this.getDroppables();}else{where=this.element.getAllPrevious().contains(element)?'before':'after';}
this.element.inject(element,where);this.fireEvent('sort',[this.element,this.clone]);},start:function(event,element){if(!this.idle||event.rightClick||['button','input','a','textarea'].contains(event.target.get('tag')))return;this.idle=false;this.element=element;this.opacity=element.getStyle('opacity');this.list=element.getParent();this.clone=this.getClone(event,element);this.drag=new Drag.Move(this.clone,Object.merge({droppables:this.getDroppables()},this.options.dragOptions)).addEvents({onSnap:function(){event.stop();this.clone.setStyle('visibility','visible');this.element.setStyle('opacity',this.options.opacity||0);this.fireEvent('start',[this.element,this.clone]);}.bind(this),onEnter:this.insert.bind(this),onCancel:this.end.bind(this),onComplete:this.end.bind(this)});this.clone.inject(this.element,'before');this.drag.start(event);},end:function(){this.drag.detach();this.element.setStyle('opacity',this.opacity);if(this.effect){var dim=this.element.getStyles('width','height'),clone=this.clone,pos=clone.computePosition(this.element.getPosition(this.clone.getOffsetParent()));var destroy=function(){this.removeEvent('cancel',destroy);clone.destroy();};this.effect.element=clone;this.effect.start({top:pos.top,left:pos.left,width:dim.width,height:dim.height,opacity:0.25}).addEvent('cancel',destroy).chain(destroy);}else{this.clone.destroy();}
this.reset();},reset:function(){this.idle=true;this.fireEvent('complete',this.element);},serialize:function(){var params=Array.link(arguments,{modifier:Type.isFunction,index:function(obj){return obj!=null;}});var serial=this.lists.map(function(list){return list.getChildren().map(params.modifier||function(element){return element.get('id');},this);},this);var index=params.index;if(this.lists.length==1)index=0;return(index||index===0)&&index>=0&&index<this.lists.length?serial[index]:serial;}});Request.JSONP=new Class({Implements:[Chain,Events,Options],options:{onRequest:function(src){if(this.options.log&&window.console&&console.log){console.log('JSONP retrieving script with url:'+src);}},onError:function(src){if(this.options.log&&window.console&&console.warn){console.warn('JSONP '+src+' will fail in Internet Explorer, which enforces a 2083 bytes length limit on URIs');}},url:'',callbackKey:'callback',injectScript:document.head,data:'',link:'ignore',timeout:0,log:false},initialize:function(options){this.setOptions(options);},send:function(options){if(!Request.prototype.check.call(this,options))return this;this.running=true;var type=typeOf(options);if(type=='string'||type=='element')options={data:options};options=Object.merge(this.options,options||{});var data=options.data;switch(typeOf(data)){case'element':data=document.id(data).toQueryString();break;case'object':case'hash':data=Object.toQueryString(data);}
var index=this.index=Request.JSONP.counter++;var src=options.url+
(options.url.test('\\?')?'&':'?')+
(options.callbackKey)+'=Request.JSONP.request_map.request_'+index+
(data?'&'+data:'');if(src.length>2083)this.fireEvent('error',src);Request.JSONP.request_map['request_'+index]=function(){this.success(arguments,index);}.bind(this);var script=this.getScript(src).inject(options.injectScript);this.fireEvent('request',[src,script]);if(options.timeout)this.timeout.delay(options.timeout,this);return this;},getScript:function(src){if(!this.script)this.script=new Element('script',{type:'text/javascript',async:true,src:src});return this.script;},success:function(args,index){if(!this.running)return;this.clear().fireEvent('complete',args).fireEvent('success',args).callChain();},cancel:function(){if(this.running)this.clear().fireEvent('cancel');return this;},isRunning:function(){return!!this.running;},clear:function(){this.running=false;if(this.script){this.script.destroy();this.script=null;}
return this;},timeout:function(){if(this.running){this.running=false;this.fireEvent('timeout',[this.script.get('src'),this.script]).fireEvent('failure').cancel();}
return this;}});Request.JSONP.counter=0;Request.JSONP.request_map={};Request.implement({options:{initialDelay:5000,delay:5000,limit:60000},startTimer:function(data){var fn=function(){if(!this.running)this.send({data:data});};this.lastDelay=this.options.initialDelay;this.timer=fn.delay(this.lastDelay,this);this.completeCheck=function(response){clearTimeout(this.timer);this.lastDelay=(response)?this.options.delay:(this.lastDelay+this.options.delay).min(this.options.limit);this.timer=fn.delay(this.lastDelay,this);};return this.addEvent('complete',this.completeCheck);},stopTimer:function(){clearTimeout(this.timer);return this.removeEvent('complete',this.completeCheck);}});

// /root/.xbmc/addons/service.downloadmanager.InternetPVR/CouchPotatoServer/couchpotato/static/scripts/library/uniform.js:1401311743
var Uniform=new Class({Implements:[Options],options:{focusedClass:'focused',holderClass:'ctrlHolder'},initialize:function(options){this.setOptions(options);var focused=this.options.focusedClass;var holder='.'+this.options.holderClass;$(document.body).addEvents({'focus:relay(input, select, textarea)':function(){var parent=this.getParent(holder);if(parent)
parent.addClass(focused);},'blur:relay(input, select, textarea)':function(){var parent=this.getParent(holder);if(parent)
parent.removeClass(focused);}});}});

// /root/.xbmc/addons/service.downloadmanager.InternetPVR/CouchPotatoServer/couchpotato/static/scripts/library/form_replacement/form_check.js:1401311743
if(typeof window.Form==='undefined'){window.Form={};}
Form.Check=new Class({Implements:[Events,Options],options:{checked:false,disabled:false},bound:{},checked:false,config:{checkedClass:'checked',disabledClass:'disabled',elementClass:'check',highlightedClass:'highlighted',storage:'Form.Check::data'},disabled:false,element:null,input:null,label:null,value:null,initialize:function(input,options){this.setOptions(options);this.bound={disable:this.disable.bind(this),enable:this.enable.bind(this),highlight:this.highlight.bind(this),removeHighlight:this.removeHighlight.bind(this),keyToggle:this.keyToggle.bind(this),toggle:this.toggle.bind(this)};var bound=this.bound;input=this.input=$(input);var id=input.get('id');this.label=document.getElement('label[for='+id+']');this.element=new Element('div',{'class':input.get('class')+' '+this.config.elementClass,id:id?id+'Check':'',events:{click:bound.toggle,mouseenter:bound.highlight,mouseleave:bound.removeHighlight}});this.input.addEvents({keypress:bound.keyToggle,keydown:bound.keyToggle,keyup:bound.keyToggle});if(this.label){this.label.addEvent('click',bound.toggle);}
this.element.wraps(input);this.value=input.get('value');if(this.input.checked){this.check();}else{this.uncheck();}
if(this.input.disabled){this.disable();}else{this.enable();}
input.store(this.config.storage,this).addEvents({blur:bound.removeHighlight,focus:bound.highlight});this.fireEvent('create',this);},check:function(){this.element.addClass(this.config.checkedClass);this.input.set('checked','checked').focus();this.checked=true;this.fireEvent('check',this);},disable:function(){this.element.addClass(this.config.disabledClass);this.input.set('disabled','disabled');this.disabled=true;this.fireEvent('disable',this);},enable:function(){this.element.removeClass(this.config.disabledClass);this.input.erase('disabled');this.disabled=false;this.fireEvent('enable',this);},highlight:function(){this.element.addClass(this.config.highlightedClass);this.fireEvent('highlight',this);},removeHighlight:function(){this.element.removeClass(this.config.highlightedClass);this.fireEvent('removeHighlight',this);},keyToggle:function(e){var evt=(e);if(evt.key==='space'){this.toggle(e);}},toggle:function(e){var evt;if(this.disabled){return this;}
if(e){evt=(e).stopPropagation();if(evt.target.tagName.toLowerCase()!=='a'){evt.stop();}}
if(this.checked){this.uncheck();}else{this.check();}
this.fireEvent('change',this);this.input.fireEvent('change',this);return this;},uncheck:function(){this.element.removeClass(this.config.checkedClass);this.input.erase('checked');this.checked=false;this.fireEvent('uncheck',this);}});

// /root/.xbmc/addons/service.downloadmanager.InternetPVR/CouchPotatoServer/couchpotato/static/scripts/library/form_replacement/form_radio.js:1401311743
if(typeof window.Form==='undefined'){window.Form={};}
Form.Radio=new Class({Extends:Form.Check,config:{elementClass:'radio',storage:'Form.Radio::data'},initialize:function(input,options){this.parent(input,options);},toggle:function(e){if(this.element.hasClass('checked')||this.disabled){return;}
var evt;if(e){evt=(e).stop();}
if(this.checked){this.uncheck();}else{this.check();}
this.fireEvent(this.checked?'onCheck':'onUncheck',this);this.fireEvent('onChange',this);}});

// /root/.xbmc/addons/service.downloadmanager.InternetPVR/CouchPotatoServer/couchpotato/static/scripts/library/form_replacement/form_dropdown.js:1401311743
if(typeof window.Form==='undefined'){window.Form={};}
Form.Dropdown=new Class({Implements:[Events,Options],options:{excludedValues:[],initialValue:null,mouseLeaveDelay:350,selectOptions:{},typeDelay:500},bound:{},dropdownOptions:[],element:null,events:{},highlighted:null,input:null,open:true,selected:null,selection:null,typed:{lastKey:null,value:null,timer:null,pressed:null,shortlist:[],startkey:null},value:null,initialize:function(select,options){this.setOptions(options);select=$(select);this.bound={collapse:this.collapse.bind(this),expand:this.expand.bind(this),focus:this.focus.bind(this),highlightOption:this.highlightOption.bind(this),keydown:this.keydown.bind(this),keypress:this.keypress.bind(this),mouseenterDropdown:this.mouseenterDropdown.bind(this),mouseleaveDropdown:this.mouseleaveDropdown.bind(this),mousemove:this.mousemove.bind(this),removeHighlightOption:this.removeHighlightOption.bind(this),select:this.select.bind(this),toggle:this.toggle.bind(this)};this.events={mouseenter:this.bound.mouseenterDropdown,mouseleave:this.bound.mouseleaveDropdown};this.value=this.options.initialValue;this.initializeCreateElements(select);var optionElements=select.getElements('option');this.updateOptions(optionElements);this.element.replaces(select);document.addEvent('click',this.bound.collapse);var eventName=Browser.ie||Browser.webkit?'keydown':'keypress';var target=Browser.ie?$(document.body):window;target.addEvent('keydown',this.bound.keydown).addEvent(eventName,this.bound.keypress);},initializeCreateElements:function(select){var id=select.get('id');var dropdown=new Element('div',{'class':(select.get('class')+' select').trim(),'id':(id&&id!=='')?id+'Dropdown':''});var menu=new Element('div',{'class':'menu'});var list=new Element('div',{'class':'list'});var options=new Element('ul',{'class':'options'});dropdown.adopt(menu.adopt(list.adopt(options)));var dropdownSelection=new Element('div',{'class':'selection',events:{click:this.bound.toggle}});var dropdownBackground=new Element('div',{'class':'dropdownBackground'});var selection=new Element('span',{'class':'selectionDisplay'});var input=new Element('input',{type:'text',id:id,name:select.get('name'),events:{focus:this.bound.focus}});dropdownSelection.adopt(dropdownBackground,selection,input);dropdown.adopt(dropdownSelection);this.element=dropdown;this.selection=selection;this.input=input;return options;},collapse:function(e){this.open=false;this.element.removeClass('active').removeClass('dropdown-active');if(this.selected){this.selected.removeHighlight();}
this.element.removeEvents(this.events);this.fireEvent('collapse',[this,e]);},deselect:function(option){option.deselect();},destroy:function(){this.element=null;this.selection=null;this.input=null;},disable:function(){this.collapse();this.input.set('disabled','disabled').removeEvents({blur:this.bound.blur,focus:this.bound.focus});this.selection.getParent().removeEvent('click',this.bound.toggle);this.fireEvent('disable',this);},enable:function(){this.input.erase('disabled').addEvents({blur:this.bound.blur,focus:this.bound.focus});this.selection.getParent().addEvent('click',this.bound.toggle);this.fireEvent('enable',this);},expand:function(e){clearTimeout(this.collapseInterval);var evt=e?(e).stop():null;this.open=true;this.input.focus();this.element.addClass('active').addClass('dropdown-active');if(this.selected){this.selected.highlight();}
this.element.addEvents(this.events);this.fireEvent('expand',[this,e]);},focus:function(e){this.expand();},foundMatch:function(e){var typed=this.typed;var shortlist=typed.shortlist;var value=typed.value;var i=0;var optionsLength=shortlist.length;var excludedValues=this.options.excludedValues;var found=false;if(!optionsLength){return;}
var option;do{option=shortlist[i];if(option.text.toLowerCase().indexOf(value)===0&&!excludedValues.contains(option.value)){found=true;option.highlight(e);typed.pressed=i+1;i=optionsLength;}
i=i+1;}while(i<optionsLength);return found;},highlightOption:function(option){if(this.highlighted){this.highlighted.removeHighlight();}
this.highlighted=option;},isOpen:function(){return this.open;},keydown:function(e){if(!this.open){return;}
this.dropdownOptions.each(function(option){option.disable();});document.addEvent('mousemove',this.bound.mousemove);},keypress:function(e){if(!this.open){return;}
(e).stop();var code=e.code,key=e.key;var typed=this.typed;var match,i,options,option,optionsLength,found,first,excludedValues,shortlist;switch(code){case 38:case 37:if(typed.pressed>0){typed.pressed=typed.pressed-1;}
if(!this.highlighted){this.dropdownOptions.getLast().highlight(e);break;}
match=this.highlighted.element.getPrevious();match=match?match.retrieve('Form.SelectOption::data'):this.dropdownOptions.getLast();match.highlight(e);break;case 40:case 39:if(typed.shortlist.length>0){typed.pressed=typed.pressed+1;}
if(!this.highlighted){this.dropdownOptions[0].highlight(e);break;}
match=this.highlighted.element.getNext();match=match?match.retrieve('Form.SelectOption::data'):this.dropdownOptions[0];match.highlight(e);break;case 13:e.stop();case 9:this.highlighted.select();break;case 27:e.stop();this.toggle();break;case 32:default:if(!(code>=48&&code<=122&&(code<=57||(code>=65&&code<=90)||code>=97)||code===32)){break;}
if(evt.control||evt.alt||evt.meta){return;}
key=code===32?' ':key;clearTimeout(typed.timer);options=this.dropdownOptions;optionsLength=options.length;excludedValues=this.options.excludedValues;if(typed.timer===null){typed.shortlist=[];if(key===typed.lastKey||key===typed.startkey){typed.pressed=typed.pressed+1;typed.value=key;}else{typed=this.resetTyped();typed.value=key;typed.startkey=key;typed.pressed=1;}
typed.timer=this.resetTyped.delay(500,this);}else{if(key===typed.lastKey){typed.value=typed.value+key;if(this.foundMatch(e)){typed.timer=this.resetTyped.delay(500,this);break;}else{typed.shortlist=[];typed.value=key;typed.pressed=typed.pressed+1;typed.timer=null;}}else{typed.timer=this.resetTyped.delay(500,this);typed.value=typed.value+key;typed.startkey=typed.value.substring(0,1);typed.lastKey=key;this.foundMatch(e);break;}}
typed.lastKey=key;shortlist=typed.shortlist;i=0;found=0;do{option=options[i];if(option.text.toLowerCase().indexOf(key)===0&&!excludedValues.contains(option.value)){if(found===0){first=option;}
found=found+1;if(found===typed.pressed){option.highlight(e);}
shortlist.push(option);}
i=i+1;}while(i<optionsLength);if(typed.pressed>found){first.highlight(e);typed.pressed=1;}
break;}},mouseenterDropdown:function(){clearTimeout(this.collapseInterval);},mouseleaveDropdown:function(){this.collapseInterval=this.options.mouseLeaveDelay?this.collapse.delay(this.options.mouseLeaveDelay,this):null;},mousemove:function(){this.dropdownOptions.each(function(option){option.enable();});document.removeEvent('mousemove',this.bound.mousemove);},removeHighlightOption:function(option){this.highlighted=null;},reset:function(){if(this.options.initialValue){this.dropdownOptions.each(function(o){if(o.value===this.options.initialValue){o.select();}},this);}else{this.dropdownOptions[0].select();}},resetTyped:function(){var typed=this.typed;typed.value=null;typed.timer=null;return typed;},select:function(option,e){this.dropdownOptions.each(this.deselect);this.selection.set('html',option.element.get('html'));var oldValue=this.value;this.value=option.value;this.input.set('value',option.value);this.selected=option;this.fireEvent('select',[this,e]);if(oldValue&&oldValue!==this.value){this.fireEvent('change',[this,e]);}
this.collapse(e);},toggle:function(e){if(this.open){this.collapse(e);}
else{this.expand(e);}},updateOptions:function(optionElements){var optionsList=this.element.getElement('ul').empty(),dropdownOptions=this.dropdownOptions.empty(),selectOptions=this.options.selectOptions;optionElements.each(function(opt){var option=new Form.SelectOption(opt,selectOptions);option.addEvents({'onHighlight':this.bound.highlightOption,'onRemoveHighlight':this.bound.removeHighlightOption,'onSelect':this.bound.select}).owner=this;if(option.value===this.options.initialValue||opt.get('selected')){this.select(option);}
dropdownOptions.push(option);optionsList.adopt(option.element);},this);if(!this.selected&&optionElements[0]){optionElements[0].retrieve('Form.SelectOption::data').select();}}});

// /root/.xbmc/addons/service.downloadmanager.InternetPVR/CouchPotatoServer/couchpotato/static/scripts/library/form_replacement/form_selectoption.js:1401311743
if(typeof window.Form==='undefined'){window.Form={};}
Form.SelectOption=new Class({Implements:[Events,Options],options:{optionTag:'li',selected:false},config:{highlightedClass:'highlighted',optionClass:'option',selectedClass:'selected'},element:null,bound:{},option:null,selected:false,text:null,value:null,initialize:function(option,options){this.setOptions(options);option=$(option);this.option=option;this.bound={deselect:this.deselect.bind(this),highlight:this.highlight.bind(this),removeHighlight:this.removeHighlight.bind(this),select:this.select.bind(this)};this.text=option.get('text');this.value=option.get('value');this.element=new Element(this.options.optionTag,{'class':(option.get('class')+' '+this.config.optionClass).trim(),'html':option.get('html'),'events':{click:this.bound.select,mouseenter:this.bound.highlight,mouseleave:this.bound.removeHighlight}});this.element.store('Form.SelectOption::data',this);option.store('Form.SelectOption::data',this);},deselect:function(e){this.fireEvent('onDeselect',[this,e]);this.element.removeClass(this.config.selectedClass).addEvent('click',this.bound.select);this.selected=false;},destroy:function(){this.element=null;this.bound=null;this.option=null;},disable:function(){this.element.removeEvents({mouseenter:this.bound.highlight,mouseleave:this.bound.removeHighlight});this.fireEvent('onDisable',this);},enable:function(){this.element.addEvents({mouseenter:this.bound.highlight,mouseleave:this.bound.removeHighlight});this.fireEvent('onEnable',this);},highlight:function(e){this.fireEvent('onHighlight',[this,e]);this.element.addClass(this.config.highlightedClass);return this;},removeHighlight:function(e){this.fireEvent('onRemoveHighlight',[this,e]);this.element.removeClass(this.config.highlightedClass);return this;},select:function(e){this.fireEvent('onSelect',[this,e]);this.element.addClass(this.config.selectedClass).removeEvent('click',this.bound.select);this.selected=true;}});

// /root/.xbmc/addons/service.downloadmanager.InternetPVR/CouchPotatoServer/couchpotato/static/scripts/library/question.js:1401311743
var Question=new Class({initialize:function(question,hint,answers){var self=this
self.question=question
self.hint=hint
self.answers=answers
self.createQuestion();self.answers.each(function(answer){self.createAnswer(answer)})},createQuestion:function(){var self=this;self.container=new Element('div.mask.question').adopt(new Element('h3',{'html':this.question}),new Element('div.hint',{'html':this.hint})).fade('hide').inject(document.body).fade('in')},createAnswer:function(options){var self=this
var answer=new Element('a',Object.merge(options,{'class':'answer button '+(options['class']||'')+(options['cancel']?' cancel':'')})).inject(this.container)
if(options.cancel){answer.addEvent('click',self.close.bind(self))}
else if(options.request){answer.addEvent('click',function(e){e.stop();new Request(Object.merge(options,{'url':options.href,'onComplete':function(){(options.onComplete||function(){})()
self.close();}})).send();});}},close:function(){var self=this;self.container.fade('out');(function(){self.container.destroy()}).delay(1000);},toElement:function(){return this.container}})

// /root/.xbmc/addons/service.downloadmanager.InternetPVR/CouchPotatoServer/couchpotato/static/scripts/library/scrollspy.js:1401311743
var ScrollSpy=new Class({Implements:[Options,Events],options:{container:window,max:0,min:0,mode:'vertical'},initialize:function(options){this.setOptions(options);this.container=document.id(this.options.container);this.enters=this.leaves=0;this.inside=false;var self=this;this.listener=function(e){var position=self.container.getScroll(),xy=position[self.options.mode=='vertical'?'y':'x'],min=typeOf(self.options.min)=='function'?self.options.min():self.options.min,max=typeOf(self.options.max)=='function'?self.options.max():self.options.max;if(xy>=min&&(max==0||xy<=max)){if(!self.inside){self.inside=true;self.enters++;self.fireEvent('enter',[position,self.enters,e]);}
self.fireEvent('tick',[position,self.inside,self.enters,self.leaves,e]);}
else if(self.inside){self.inside=false;self.leaves++;self.fireEvent('leave',[position,self.leaves,e]);}
self.fireEvent('scroll',[position,self.inside,self.enters,self.leaves,e]);};this.addListener();},start:function(){this.container.addEvent('scroll',this.listener);},stop:function(){this.container.removeEvent('scroll',this.listener);},addListener:function(){this.start();}});

// /root/.xbmc/addons/service.downloadmanager.InternetPVR/CouchPotatoServer/couchpotato/static/scripts/library/spin.js:1401311743
(function(window,document,undefined){var prefixes=['webkit','Moz','ms','O'];var animations={};var useCssAnimations;function createEl(tag,prop){var el=document.createElement(tag||'div');var n;for(n in prop){el[n]=prop[n];}
return el;}
function ins(parent){for(var i=1,n=arguments.length;i<n;i++){parent.appendChild(arguments[i]);}
return parent;}
var sheet=function(){var el=createEl('style');ins(document.getElementsByTagName('head')[0],el);return el.sheet||el.styleSheet;}();function addAnimation(alpha,trail,i,lines){var name=['opacity',trail,~~(alpha*100),i,lines].join('-');var start=0.01+i/lines*100;var z=Math.max(1-(1-alpha)/trail*(100-start),alpha);var prefix=useCssAnimations.substring(0,useCssAnimations.indexOf('Animation')).toLowerCase();var pre=prefix&&'-'+prefix+'-'||'';if(!animations[name]){sheet.insertRule('@'+pre+'keyframes '+name+'{'+'0%{opacity:'+z+'}'+
start+'%{opacity:'+alpha+'}'+
(start+0.01)+'%{opacity:1}'+
(start+trail)%100+'%{opacity:'+alpha+'}'+'100%{opacity:'+z+'}'+'}',0);animations[name]=1;}
return name;}
function vendor(el,prop){var s=el.style;var pp;var i;if(s[prop]!==undefined)return prop;prop=prop.charAt(0).toUpperCase()+prop.slice(1);for(i=0;i<prefixes.length;i++){pp=prefixes[i]+prop;if(s[pp]!==undefined)return pp;}}
function css(el,prop){for(var n in prop){el.style[vendor(el,n)||n]=prop[n];}
return el;}
function merge(obj){for(var i=1;i<arguments.length;i++){var def=arguments[i];for(var n in def){if(obj[n]===undefined)obj[n]=def[n];}}
return obj;}
function pos(el){var o={x:el.offsetLeft,y:el.offsetTop};while((el=el.offsetParent)){o.x+=el.offsetLeft;o.y+=el.offsetTop;}
return o;}
var defaults={lines:12,length:7,width:5,radius:10,color:'#000',speed:1,trail:100,opacity:1/4,fps:20,zIndex:2e9,className:'spinner',top:'auto',left:'auto'};var Spinner=function Spinner(o){if(!this.spin)return new Spinner(o);this.opts=merge(o||{},Spinner.defaults,defaults);};Spinner.defaults={};Spinner.prototype={spin:function(target){this.stop();var self=this;var o=self.opts;var el=self.el=css(createEl(0,{className:o.className}),{position:'relative',zIndex:o.zIndex});var mid=o.radius+o.length+o.width;var ep;var tp;if(target){target.insertBefore(el,target.firstChild||null);tp=pos(target);ep=pos(el);css(el,{left:(o.left=='auto'?tp.x-ep.x+(target.offsetWidth>>1):o.left+mid)+'px',top:(o.top=='auto'?tp.y-ep.y+(target.offsetHeight>>1):o.top+mid)+'px'});}
el.setAttribute('aria-role','progressbar');self.lines(el,self.opts);if(!useCssAnimations){var i=0;var fps=o.fps;var f=fps/o.speed;var ostep=(1-o.opacity)/(f*o.trail/100);var astep=f/o.lines;!function anim(){i++;for(var s=o.lines;s;s--){var alpha=Math.max(1-(i+s*astep)%f*ostep,o.opacity);self.opacity(el,o.lines-s,alpha,o);}
self.timeout=self.el&&setTimeout(anim,~~(1000/fps));}();}
return self;},stop:function(){var el=this.el;if(el){clearTimeout(this.timeout);if(el.parentNode)el.parentNode.removeChild(el);this.el=undefined;}
return this;},lines:function(el,o){var i=0;var seg;function fill(color,shadow){return css(createEl(),{position:'absolute',width:(o.length+o.width)+'px',height:o.width+'px',background:color,boxShadow:shadow,transformOrigin:'left',transform:'rotate('+~~(360/o.lines*i)+'deg) translate('+o.radius+'px'+',0)',borderRadius:(o.width>>1)+'px'});}
for(;i<o.lines;i++){seg=css(createEl(),{position:'absolute',top:1+~(o.width/2)+'px',transform:o.hwaccel?'translate3d(0,0,0)':'',opacity:o.opacity,animation:useCssAnimations&&addAnimation(o.opacity,o.trail,i,o.lines)+' '+1/o.speed+'s linear infinite'});if(o.shadow)ins(seg,css(fill('#000','0 0 4px '+'#000'),{top:2+'px'}));ins(el,ins(seg,fill(o.color,'0 0 1px rgba(0,0,0,.1)')));}
return el;},opacity:function(el,i,val){if(i<el.childNodes.length)el.childNodes[i].style.opacity=val;}};!function(){var s=css(createEl('group'),{behavior:'url(#default#VML)'});var i;if(!vendor(s,'transform')&&s.adj){for(i=4;i--;)sheet.addRule(['group','roundrect','fill','stroke'][i],'behavior:url(#default#VML)');Spinner.prototype.lines=function(el,o){var r=o.length+o.width;var s=2*r;function grp(){return css(createEl('group',{coordsize:s+' '+s,coordorigin:-r+' '+-r}),{width:s,height:s});}
var margin=-(o.width+o.length)*2+'px';var g=css(grp(),{position:'absolute',top:margin,left:margin});var i;function seg(i,dx,filter){ins(g,ins(css(grp(),{rotation:360/o.lines*i+'deg',left:~~dx}),ins(css(createEl('roundrect',{arcsize:1}),{width:r,height:o.width,left:o.radius,top:-o.width>>1,filter:filter}),createEl('fill',{color:o.color,opacity:o.opacity}),createEl('stroke',{opacity:0}))));}
if(o.shadow){for(i=1;i<=o.lines;i++){seg(i,-2,'progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)');}}
for(i=1;i<=o.lines;i++)seg(i);return ins(el,g);};Spinner.prototype.opacity=function(el,i,val,o){var c=el.firstChild;o=o.shadow&&o.lines||0;if(c&&i+o<c.childNodes.length){c=c.childNodes[i+o];c=c&&c.firstChild;c=c&&c.firstChild;if(c)c.opacity=val;}};}
else{useCssAnimations=vendor(s,'animation');}}();window.Spinner=Spinner;})(window,document);

// /root/.xbmc/addons/service.downloadmanager.InternetPVR/CouchPotatoServer/couchpotato/static/scripts/library/Array.stableSort.js:1401311743
(function(){var defaultSortFunction=function(a,b){return a>b?1:(a<b?-1:0);}
Array.implement({stableSort:function(compare){return(Browser.chrome||Browser.firefox2||Browser.opera9)?this.mergeSort(compare):this.sort(compare);},mergeSort:function(compare,token){compare=compare||defaultSortFunction;if(this.length>1){var right=this.splice(Math.floor(this.length/2)).mergeSort(compare);var left=this.splice(0).mergeSort(compare);while(left.length>0||right.length>0){this.push(right.length===0?left.shift():left.length===0?right.shift():compare(left[0],right[0])>0?right.shift():left.shift());}}
return this;}});})();

// /root/.xbmc/addons/service.downloadmanager.InternetPVR/CouchPotatoServer/couchpotato/static/scripts/library/async.js:1401311743
(function(){var async={};var root,previous_async;root=this;if(root!=null){previous_async=root.async;}
async.noConflict=function(){root.async=previous_async;return async;};function only_once(fn){var called=false;return function(){if(called)throw new Error("Callback was already called.");called=true;fn.apply(root,arguments);}}
var _each=function(arr,iterator){if(arr.forEach){return arr.forEach(iterator);}
for(var i=0;i<arr.length;i+=1){iterator(arr[i],i,arr);}};var _map=function(arr,iterator){if(arr.map){return arr.map(iterator);}
var results=[];_each(arr,function(x,i,a){results.push(iterator(x,i,a));});return results;};var _reduce=function(arr,iterator,memo){if(arr.reduce){return arr.reduce(iterator,memo);}
_each(arr,function(x,i,a){memo=iterator(memo,x,i,a);});return memo;};var _keys=function(obj){if(Object.keys){return Object.keys(obj);}
var keys=[];for(var k in obj){if(obj.hasOwnProperty(k)){keys.push(k);}}
return keys;};if(typeof process==='undefined'||!(process.nextTick)){if(typeof setImmediate==='function'){async.nextTick=function(fn){setImmediate(fn);};async.setImmediate=async.nextTick;}
else{async.nextTick=function(fn){setTimeout(fn,0);};async.setImmediate=async.nextTick;}}
else{async.nextTick=process.nextTick;if(typeof setImmediate!=='undefined'){async.setImmediate=setImmediate;}
else{async.setImmediate=async.nextTick;}}
async.each=function(arr,iterator,callback){callback=callback||function(){};if(!arr.length){return callback();}
var completed=0;_each(arr,function(x){iterator(x,only_once(function(err){if(err){callback(err);callback=function(){};}
else{completed+=1;if(completed>=arr.length){callback(null);}}}));});};async.forEach=async.each;async.eachSeries=function(arr,iterator,callback){callback=callback||function(){};if(!arr.length){return callback();}
var completed=0;var iterate=function(){iterator(arr[completed],function(err){if(err){callback(err);callback=function(){};}
else{completed+=1;if(completed>=arr.length){callback(null);}
else{iterate();}}});};iterate();};async.forEachSeries=async.eachSeries;async.eachLimit=function(arr,limit,iterator,callback){var fn=_eachLimit(limit);fn.apply(null,[arr,iterator,callback]);};async.forEachLimit=async.eachLimit;var _eachLimit=function(limit){return function(arr,iterator,callback){callback=callback||function(){};if(!arr.length||limit<=0){return callback();}
var completed=0;var started=0;var running=0;(function replenish(){if(completed>=arr.length){return callback();}
while(running<limit&&started<arr.length){started+=1;running+=1;iterator(arr[started-1],function(err){if(err){callback(err);callback=function(){};}
else{completed+=1;running-=1;if(completed>=arr.length){callback();}
else{replenish();}}});}})();};};var doParallel=function(fn){return function(){var args=Array.prototype.slice.call(arguments);return fn.apply(null,[async.each].concat(args));};};var doParallelLimit=function(limit,fn){return function(){var args=Array.prototype.slice.call(arguments);return fn.apply(null,[_eachLimit(limit)].concat(args));};};var doSeries=function(fn){return function(){var args=Array.prototype.slice.call(arguments);return fn.apply(null,[async.eachSeries].concat(args));};};var _asyncMap=function(eachfn,arr,iterator,callback){var results=[];arr=_map(arr,function(x,i){return{index:i,value:x};});eachfn(arr,function(x,callback){iterator(x.value,function(err,v){results[x.index]=v;callback(err);});},function(err){callback(err,results);});};async.map=doParallel(_asyncMap);async.mapSeries=doSeries(_asyncMap);async.mapLimit=function(arr,limit,iterator,callback){return _mapLimit(limit)(arr,iterator,callback);};var _mapLimit=function(limit){return doParallelLimit(limit,_asyncMap);};async.reduce=function(arr,memo,iterator,callback){async.eachSeries(arr,function(x,callback){iterator(memo,x,function(err,v){memo=v;callback(err);});},function(err){callback(err,memo);});};async.inject=async.reduce;async.foldl=async.reduce;async.reduceRight=function(arr,memo,iterator,callback){var reversed=_map(arr,function(x){return x;}).reverse();async.reduce(reversed,memo,iterator,callback);};async.foldr=async.reduceRight;var _filter=function(eachfn,arr,iterator,callback){var results=[];arr=_map(arr,function(x,i){return{index:i,value:x};});eachfn(arr,function(x,callback){iterator(x.value,function(v){if(v){results.push(x);}
callback();});},function(err){callback(_map(results.sort(function(a,b){return a.index-b.index;}),function(x){return x.value;}));});};async.filter=doParallel(_filter);async.filterSeries=doSeries(_filter);async.select=async.filter;async.selectSeries=async.filterSeries;var _reject=function(eachfn,arr,iterator,callback){var results=[];arr=_map(arr,function(x,i){return{index:i,value:x};});eachfn(arr,function(x,callback){iterator(x.value,function(v){if(!v){results.push(x);}
callback();});},function(err){callback(_map(results.sort(function(a,b){return a.index-b.index;}),function(x){return x.value;}));});};async.reject=doParallel(_reject);async.rejectSeries=doSeries(_reject);var _detect=function(eachfn,arr,iterator,main_callback){eachfn(arr,function(x,callback){iterator(x,function(result){if(result){main_callback(x);main_callback=function(){};}
else{callback();}});},function(err){main_callback();});};async.detect=doParallel(_detect);async.detectSeries=doSeries(_detect);async.some=function(arr,iterator,main_callback){async.each(arr,function(x,callback){iterator(x,function(v){if(v){main_callback(true);main_callback=function(){};}
callback();});},function(err){main_callback(false);});};async.any=async.some;async.every=function(arr,iterator,main_callback){async.each(arr,function(x,callback){iterator(x,function(v){if(!v){main_callback(false);main_callback=function(){};}
callback();});},function(err){main_callback(true);});};async.all=async.every;async.sortBy=function(arr,iterator,callback){async.map(arr,function(x,callback){iterator(x,function(err,criteria){if(err){callback(err);}
else{callback(null,{value:x,criteria:criteria});}});},function(err,results){if(err){return callback(err);}
else{var fn=function(left,right){var a=left.criteria,b=right.criteria;return a<b?-1:a>b?1:0;};callback(null,_map(results.sort(fn),function(x){return x.value;}));}});};async.auto=function(tasks,callback){callback=callback||function(){};var keys=_keys(tasks);if(!keys.length){return callback(null);}
var results={};var listeners=[];var addListener=function(fn){listeners.unshift(fn);};var removeListener=function(fn){for(var i=0;i<listeners.length;i+=1){if(listeners[i]===fn){listeners.splice(i,1);return;}}};var taskComplete=function(){_each(listeners.slice(0),function(fn){fn();});};addListener(function(){if(_keys(results).length===keys.length){callback(null,results);callback=function(){};}});_each(keys,function(k){var task=(tasks[k]instanceof Function)?[tasks[k]]:tasks[k];var taskCallback=function(err){var args=Array.prototype.slice.call(arguments,1);if(args.length<=1){args=args[0];}
if(err){var safeResults={};_each(_keys(results),function(rkey){safeResults[rkey]=results[rkey];});safeResults[k]=args;callback(err,safeResults);callback=function(){};}
else{results[k]=args;async.setImmediate(taskComplete);}};var requires=task.slice(0,Math.abs(task.length-1))||[];var ready=function(){return _reduce(requires,function(a,x){return(a&&results.hasOwnProperty(x));},true)&&!results.hasOwnProperty(k);};if(ready()){task[task.length-1](taskCallback,results);}
else{var listener=function(){if(ready()){removeListener(listener);task[task.length-1](taskCallback,results);}};addListener(listener);}});};async.waterfall=function(tasks,callback){callback=callback||function(){};if(tasks.constructor!==Array){var err=new Error('First argument to waterfall must be an array of functions');return callback(err);}
if(!tasks.length){return callback();}
var wrapIterator=function(iterator){return function(err){if(err){callback.apply(null,arguments);callback=function(){};}
else{var args=Array.prototype.slice.call(arguments,1);var next=iterator.next();if(next){args.push(wrapIterator(next));}
else{args.push(callback);}
async.setImmediate(function(){iterator.apply(null,args);});}};};wrapIterator(async.iterator(tasks))();};var _parallel=function(eachfn,tasks,callback){callback=callback||function(){};if(tasks.constructor===Array){eachfn.map(tasks,function(fn,callback){if(fn){fn(function(err){var args=Array.prototype.slice.call(arguments,1);if(args.length<=1){args=args[0];}
callback.call(null,err,args);});}},callback);}
else{var results={};eachfn.each(_keys(tasks),function(k,callback){tasks[k](function(err){var args=Array.prototype.slice.call(arguments,1);if(args.length<=1){args=args[0];}
results[k]=args;callback(err);});},function(err){callback(err,results);});}};async.parallel=function(tasks,callback){_parallel({map:async.map,each:async.each},tasks,callback);};async.parallelLimit=function(tasks,limit,callback){_parallel({map:_mapLimit(limit),each:_eachLimit(limit)},tasks,callback);};async.series=function(tasks,callback){callback=callback||function(){};if(tasks.constructor===Array){async.mapSeries(tasks,function(fn,callback){if(fn){fn(function(err){var args=Array.prototype.slice.call(arguments,1);if(args.length<=1){args=args[0];}
callback.call(null,err,args);});}},callback);}
else{var results={};async.eachSeries(_keys(tasks),function(k,callback){tasks[k](function(err){var args=Array.prototype.slice.call(arguments,1);if(args.length<=1){args=args[0];}
results[k]=args;callback(err);});},function(err){callback(err,results);});}};async.iterator=function(tasks){var makeCallback=function(index){var fn=function(){if(tasks.length){tasks[index].apply(null,arguments);}
return fn.next();};fn.next=function(){return(index<tasks.length-1)?makeCallback(index+1):null;};return fn;};return makeCallback(0);};async.apply=function(fn){var args=Array.prototype.slice.call(arguments,1);return function(){return fn.apply(null,args.concat(Array.prototype.slice.call(arguments)));};};var _concat=function(eachfn,arr,fn,callback){var r=[];eachfn(arr,function(x,cb){fn(x,function(err,y){r=r.concat(y||[]);cb(err);});},function(err){callback(err,r);});};async.concat=doParallel(_concat);async.concatSeries=doSeries(_concat);async.whilst=function(test,iterator,callback){if(test()){iterator(function(err){if(err){return callback(err);}
async.whilst(test,iterator,callback);});}
else{callback();}};async.doWhilst=function(iterator,test,callback){iterator(function(err){if(err){return callback(err);}
if(test()){async.doWhilst(iterator,test,callback);}
else{callback();}});};async.until=function(test,iterator,callback){if(!test()){iterator(function(err){if(err){return callback(err);}
async.until(test,iterator,callback);});}
else{callback();}};async.doUntil=function(iterator,test,callback){iterator(function(err){if(err){return callback(err);}
if(!test()){async.doUntil(iterator,test,callback);}
else{callback();}});};async.queue=function(worker,concurrency){if(concurrency===undefined){concurrency=1;}
function _insert(q,data,pos,callback){if(data.constructor!==Array){data=[data];}
_each(data,function(task){var item={data:task,callback:typeof callback==='function'?callback:null};if(pos){q.tasks.unshift(item);}else{q.tasks.push(item);}
if(q.saturated&&q.tasks.length===concurrency){q.saturated();}
async.setImmediate(q.process);});}
var workers=0;var q={tasks:[],concurrency:concurrency,saturated:null,empty:null,drain:null,push:function(data,callback){_insert(q,data,false,callback);},unshift:function(data,callback){_insert(q,data,true,callback);},process:function(){if(workers<q.concurrency&&q.tasks.length){var task=q.tasks.shift();if(q.empty&&q.tasks.length===0){q.empty();}
workers+=1;var next=function(){workers-=1;if(task.callback){task.callback.apply(task,arguments);}
if(q.drain&&q.tasks.length+workers===0){q.drain();}
q.process();};var cb=only_once(next);worker(task.data,cb);}},length:function(){return q.tasks.length;},running:function(){return workers;}};return q;};async.cargo=function(worker,payload){var working=false,tasks=[];var cargo={tasks:tasks,payload:payload,saturated:null,empty:null,drain:null,push:function(data,callback){if(data.constructor!==Array){data=[data];}
_each(data,function(task){tasks.push({data:task,callback:typeof callback==='function'?callback:null});if(cargo.saturated&&tasks.length===payload){cargo.saturated();}});async.setImmediate(cargo.process);},process:function process(){if(working)return;if(tasks.length===0){if(cargo.drain)cargo.drain();return;}
var ts=typeof payload==='number'?tasks.splice(0,payload):tasks.splice(0);var ds=_map(ts,function(task){return task.data;});if(cargo.empty)cargo.empty();working=true;worker(ds,function(){working=false;var args=arguments;_each(ts,function(data){if(data.callback){data.callback.apply(null,args);}});process();});},length:function(){return tasks.length;},running:function(){return working;}};return cargo;};var _console_fn=function(name){return function(fn){var args=Array.prototype.slice.call(arguments,1);fn.apply(null,args.concat([function(err){var args=Array.prototype.slice.call(arguments,1);if(typeof console!=='undefined'){if(err){if(console.error){console.error(err);}}
else if(console[name]){_each(args,function(x){console[name](x);});}}}]));};};async.log=_console_fn('log');async.dir=_console_fn('dir');async.memoize=function(fn,hasher){var memo={};var queues={};hasher=hasher||function(x){return x;};var memoized=function(){var args=Array.prototype.slice.call(arguments);var callback=args.pop();var key=hasher.apply(null,args);if(key in memo){callback.apply(null,memo[key]);}
else if(key in queues){queues[key].push(callback);}
else{queues[key]=[callback];fn.apply(null,args.concat([function(){memo[key]=arguments;var q=queues[key];delete queues[key];for(var i=0,l=q.length;i<l;i++){q[i].apply(null,arguments);}}]));}};memoized.memo=memo;memoized.unmemoized=fn;return memoized;};async.unmemoize=function(fn){return function(){return(fn.unmemoized||fn).apply(null,arguments);};};async.times=function(count,iterator,callback){var counter=[];for(var i=0;i<count;i++){counter.push(i);}
return async.map(counter,iterator,callback);};async.timesSeries=function(count,iterator,callback){var counter=[];for(var i=0;i<count;i++){counter.push(i);}
return async.mapSeries(counter,iterator,callback);};async.compose=function(){var fns=Array.prototype.reverse.call(arguments);return function(){var that=this;var args=Array.prototype.slice.call(arguments);var callback=args.pop();async.reduce(fns,args,function(newargs,fn,cb){fn.apply(that,newargs.concat([function(){var err=arguments[0];var nextargs=Array.prototype.slice.call(arguments,1);cb(err,nextargs);}]))},function(err,results){callback.apply(that,[err].concat(results));});};};var _applyEach=function(eachfn,fns){var go=function(){var that=this;var args=Array.prototype.slice.call(arguments);var callback=args.pop();return eachfn(fns,function(fn,cb){fn.apply(that,args.concat([cb]));},callback);};if(arguments.length>2){var args=Array.prototype.slice.call(arguments,2);return go.apply(this,args);}
else{return go;}};async.applyEach=doParallel(_applyEach);async.applyEachSeries=doSeries(_applyEach);async.forever=function(fn,callback){function next(err){if(err){if(callback){return callback(err);}
throw err;}
fn(next);}
next();};if(typeof define!=='undefined'&&define.amd){define([],function(){return async;});}
else if(typeof module!=='undefined'&&module.exports){module.exports=async;}
else{root.async=async;}}());

// /root/.xbmc/addons/service.downloadmanager.InternetPVR/CouchPotatoServer/couchpotato/static/scripts/couchpotato.js:1401311743
var CouchPotato=new Class({Implements:[Events,Options],defaults:{page:'home',action:'index',params:{}},pages:[],block:[],initialize:function(){var self=this;self.global_events={};},setup:function(options){var self=this;self.setOptions(options);self.c=$(document.body);self.route=new Route(self.defaults);self.createLayout();self.createPages();if(window.location.hash)
History.handleInitialState();else
self.openPage(window.location.pathname);History.addEvent('change',self.openPage.bind(self));self.c.addEvent('click:relay(a[href^=/]:not([target]))',self.pushState.bind(self));self.c.addEvent('click:relay(a[href^=http])',self.openDerefered.bind(self));self.touch_device='ontouchstart'in window||navigator.msMaxTouchPoints;if(self.touch_device)
self.c.addClass('touch_enabled');},getOption:function(name){try{return this.options[name];}
catch(e){return null}},pushState:function(e){if((!e.meta&&Browser.Platform.mac)||(!e.control&&!Browser.Platform.mac)){(e).preventDefault();var url=e.target.get('href');if(History.getPath()!=url)
History.push(url);}},isMac:function(){return Browser.Platform.mac},createLayout:function(){var self=this;self.block.header=new Block();self.c.adopt($(self.block.header).addClass('header').adopt(new Element('div').adopt(self.block.navigation=new Block.Navigation(self,{}),self.block.search=new Block.Search(self,{}),self.block.more=new Block.Menu(self,{'button_class':'icon2.cog'}))),self.content=new Element('div.content'),self.block.footer=new Block.Footer(self,{}));var setting_links=[new Element('a',{'text':'About CouchPotato','href':App.createUrl('settings/about')}),new Element('a',{'text':'Check for Updates','events':{'click':self.checkForUpdate.bind(self,null)}}),new Element('span.separator'),new Element('a',{'text':'Settings','href':App.createUrl('settings/general')}),new Element('a',{'text':'Logs','href':App.createUrl('log')}),new Element('span.separator'),new Element('a',{'text':'Restart','events':{'click':self.restartQA.bind(self)}}),new Element('a',{'text':'Shutdown','events':{'click':self.shutdownQA.bind(self)}})];setting_links.each(function(a){self.block.more.addLink(a)});new ScrollSpy({min:10,onLeave:function(){$(self.block.header).removeClass('with_shadow')},onEnter:function(){$(self.block.header).addClass('with_shadow')}})},createPages:function(){var self=this;Object.each(Page,function(page_class,class_name){var pg=new Page[class_name](self,{});self.pages[class_name]=pg;$(pg).inject(self.content);});self.fireEvent('load');},openPage:function(url){var self=this;self.route.parse();var page_name=self.route.getPage().capitalize();var action=self.route.getAction();var params=self.route.getParams();var current_url=self.route.getCurrentUrl();if(current_url==self.current_url)
return;if(self.current_page)
self.current_page.hide();try{var page=self.pages[page_name]||self.pages.Home;page.open(action,params,current_url);page.show();}
catch(e){console.error("Can't open page:"+url,e)}
self.current_page=page;self.current_url=current_url;},getBlock:function(block_name){return this.block[block_name]},getPage:function(name){return this.pages[name]},shutdown:function(){var self=this;self.blockPage('You have shutdown. This is what is supposed to happen ;)');Api.request('app.shutdown',{'onComplete':self.blockPage.bind(self)});self.checkAvailable(1000);},shutdownQA:function(){var self=this;var q=new Question('Are you sure you want to shutdown CouchPotato?','',[{'text':'Shutdown','class':'shutdown red','events':{'click':function(e){(e).preventDefault();self.shutdown();q.close.delay(100,q);}}},{'text':'No, nevah!','cancel':true}]);},restart:function(message,title){var self=this;self.blockPage(message||'Restarting... please wait. If this takes too long, something must have gone wrong.',title);Api.request('app.restart');self.checkAvailable(1000);},restartQA:function(e,message,title){var self=this;var q=new Question('Are you sure you want to restart CouchPotato?','',[{'text':'Restart','class':'restart orange','events':{'click':function(e){(e).preventDefault();self.restart(message,title);q.close.delay(100,q);}}},{'text':'No, nevah!','cancel':true}]);},checkForUpdate:function(onComplete){var self=this;Updater.check(onComplete);self.blockPage('Please wait. If this takes too long, something must have gone wrong.','Checking for updates');self.checkAvailable(3000);},checkAvailable:function(delay,onAvailable){var self=this;(function(){Api.request('app.available',{'onFailure':function(){self.checkAvailable.delay(1000,self,[delay,onAvailable]);self.fireEvent('unload');},'onSuccess':function(){if(onAvailable)
onAvailable();self.unBlockPage();self.fireEvent('reload');}});}).delay(delay||0)},blockPage:function(message,title){var self=this;self.unBlockPage();self.mask=new Element('div.mask').adopt(new Element('div').adopt(new Element('h1',{'text':title||'Unavailable'}),new Element('div',{'text':message||'Something must have crashed.. check the logs ;)'}))).fade('hide').inject(document.body).fade('in');createSpinner(self.mask,{'top':-50});},unBlockPage:function(){var self=this;if(self.mask)
self.mask.get('tween').start('opacity',0).chain(function(){this.element.destroy()});},createUrl:function(action,params){return this.options.base_url+(action?action+'/':'')+(params?'?'+Object.toQueryString(params):'')},openDerefered:function(e,el){(e).stop();var url='http://www.dereferer.org/?'+el.get('href');if(el.get('target')=='_blank'||(e.meta&&Browser.Platform.mac)||(e.control&&!Browser.Platform.mac))
window.open(url);else
window.location=url;},createUserscriptButtons:function(){var host_url=window.location.protocol+'//'+window.location.host;return new Element('div.group_userscript').adopt(new Element('a.userscript.button',{'text':'Install userscript','href':Api.createUrl('userscript.get')+randomString()+'/couchpotato.user.js','target':'_blank'}),new Element('span.or[text=or]'),new Element('span.bookmarklet').adopt(new Element('a.button.orange',{'text':'+CouchPotato','href':"javascript:void((function(){var e=document.createElement('script');e.setAttribute('type','text/javascript');e.setAttribute('charset','UTF-8');e.setAttribute('src','"+
host_url+Api.createUrl('userscript.bookmark')+"?host="+encodeURI(host_url+Api.createUrl('userscript.get')+randomString()+'/')+"&r='+Math.random()*99999999);document.body.appendChild(e)})());",'target':'','events':{'click':function(e){(e).stop();alert('Drag it to your bookmark ;)')}}}),new Element('span',{'text':' Drag this to your bookmarks'})));},on:function(name,handle){var self=this;if(!self.global_events[name])
self.global_events[name]=[];self.global_events[name].push(handle);},trigger:function(name,args,on_complete){var self=this;if(!self.global_events[name]){return;}
if(!on_complete&&typeOf(args)=='function'){on_complete=args;args=[];}
var callbacks=[];self.global_events[name].each(function(handle,nr){callbacks.push(function(callback){var results=handle.apply(handle,args||[]);callback(null,results||null);});});async.parallel(callbacks,function(err,results){if(err)p(err);if(on_complete)
on_complete(results);});},off:function(name,handle){var self=this;if(!self.global_events[name])return;if(handle){self.global_events[name]=self.global_events[name].erase(handle);}
else{self.global_events[name]=[];}}});window.App=new CouchPotato();var Route=new Class({defaults:{},page:'',action:'index',params:{},initialize:function(defaults){var self=this;self.defaults=defaults},parse:function(){var self=this;var rep=function(pa){return pa.replace(Api.getOption('url'),'/').replace(App.getOption('base_url'),'/')};var path=rep(History.getPath());if(path=='/'&&location.hash){path=rep(location.hash.replace('#','/'))}
self.current=path.replace(/^\/+|\/+$/g,'');var url=self.current.split('/');self.page=(url.length>0)?url.shift():self.defaults.page;self.action=(url.length>0)?url.shift():self.defaults.action;self.params=Object.merge({},self.defaults.params);if(url.length>1){var key;url.each(function(el,nr){if(nr%2==0)
key=el;else if(key){self.params[key]=el;key=null}})}
else if(url.length==1){self.params[url]=true;}
return self},getPage:function(){return this.page},getAction:function(){return this.action},getParams:function(){return this.params},getCurrentUrl:function(){return this.current},get:function(param){return this.params[param]}});var p=function(){if(typeof(console)!=='undefined'&&console!=null)
console.log(arguments)};(function(){var events;var check=function(e){var target=$(e.target);var parents=target.getParents();events.each(function(item){var element=item.element;if(element!=target&&!parents.contains(element))
item.fn.call(element,e);});};Element.Events.outerClick={onAdd:function(fn){if(!events){document.addEvent('click',check);events=[];}
events.push({element:this,fn:fn});},onRemove:function(fn){events=events.filter(function(item){return item.element!=this||item.fn!=fn;},this);if(!events.length){document.removeEvent('click',check);events=null;}}};})();function randomString(length,extra){var chars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz"+(extra?'-._!@#$%^&*()+=':'');var stringLength=length||8;var randomString='';for(var i=0;i<stringLength;i++){var rnum=Math.floor(Math.random()*chars.length);randomString+=chars.charAt(rnum);}
return randomString;}
(function(){var keyPaths=[];var saveKeyPath=function(path){keyPaths.push({sign:(path[0]==='+'||path[0]==='-')?parseInt(path.shift()+1):1,path:path});};var valueOf=function(object,path){var ptr=object;path.each(function(key){ptr=ptr[key]});return ptr;};var comparer=function(a,b){for(var i=0,l=keyPaths.length;i<l;i++){var aVal=valueOf(a,keyPaths[i].path),bVal=valueOf(b,keyPaths[i].path);if(aVal>bVal)return keyPaths[i].sign;if(aVal<bVal)return-keyPaths[i].sign;}
return 0;};Array.implement({sortBy:function(){keyPaths.empty();Array.each(arguments,function(argument){switch(typeOf(argument)){case"array":saveKeyPath(argument);break;case"string":saveKeyPath(argument.match(/[+-]|[^.]+/g));break;}});return this.stableSort(comparer);}});})();var createSpinner=function(target,options){var opts=Object.merge({lines:12,length:5,width:4,radius:9,color:'#fff',speed:1.9,trail:53,shadow:false,hwaccel:true,className:'spinner',zIndex:2e9,top:'auto',left:'auto'},options);return new Spinner(opts).spin(target);};

// /root/.xbmc/addons/service.downloadmanager.InternetPVR/CouchPotatoServer/couchpotato/static/scripts/api.js:1401311742
var ApiClass=new Class({setup:function(options){var self=this;self.options=options;},request:function(type,options){var self=this;var r_type=self.options.is_remote?'JSONP':'JSON';return new Request[r_type](Object.merge({'callbackKey':'callback_func','method':'get','url':self.createUrl(type,{'t':randomString()})},options)).send()},createUrl:function(action,params){return this.options.url+(action||'default')+'/'+(params?'?'+Object.toQueryString(params):'')},getOption:function(name){return this.options[name]}});window.Api=new ApiClass();

// /root/.xbmc/addons/service.downloadmanager.InternetPVR/CouchPotatoServer/couchpotato/static/scripts/library/history.js:1401311743
Class.Binds=new Class({$bound:{},bound:function(name){return this.$bound[name]?this.$bound[name]:this.$bound[name]=this[name].bind(this);}});(function(){var events=Element.NativeEvents,location=window.location,base=location.pathname,history=window.history,hasPushState=('pushState'in history),event=hasPushState?'popstate':'hashchange';this.History=new new Class({Implements:[Class.Binds,Events],initialize:hasPushState?function(){events[event]=2;window.addEvent(event,this.bound('pop'));}:function(){events[event]=1;window.addEvent(event,this.bound('pop'));this.hash=location.hash;var hashchange=('onhashchange'in window);if(!(hashchange&&(document.documentMode===undefined||document.documentMode>7)))
this.timer=this.check.periodical(200,this);},push:hasPushState?function(url,title,state){if(base&&base!=url)base=null;history.pushState(state||null,title||null,url);this.onChange(url,state);}:function(url){location.hash=url;},replace:hasPushState?function(url,title,state){history.replaceState(state||null,title||null,url);}:function(url){this.hash='#'+url;this.push(url);},pop:hasPushState?function(event){var url=location.pathname;if(url==base){base=null;return;}
this.onChange(url,event.event.state);}:function(){var hash=location.hash;if(this.hash==hash)return;this.hash=hash;this.onChange(hash.substr(1));},onChange:function(url,state){this.fireEvent('change',[url,state||{}]);},back:function(){history.back();},forward:function(){history.forward();},getPath:function(){return hasPushState?location.pathname:location.hash.substr(1);},hasPushState:function(){return hasPushState;},check:function(){if(this.hash!=location.hash)this.pop();}});})();History.handleInitialState=function(base){if(!base)base='';var location=window.location,pathname=location.pathname.substr(base.length),hash=location.hash,hasPushState=History.hasPushState();if(!hasPushState&&pathname.length>1){window.location=(base||'/')+'#'+pathname;return true;}
if(!hash||hash.length<=1)return false;if(hasPushState){(function(){History.push(hash.substr(1));}).delay(1);return false;}
if(!pathname||pathname=='/')return false;window.location=(base||'/')+hash;return true;};

// /root/.xbmc/addons/service.downloadmanager.InternetPVR/CouchPotatoServer/couchpotato/static/scripts/page.js:1401311743
var PageBase=new Class({Implements:[Options,Events],options:{},has_tab:true,name:'',initialize:function(options){var self=this;self.setOptions(options);self.el=new Element('div.page.'+self.name);if(self.has_tab){var nav=App.getBlock('navigation');self.tab=nav.addTab(self.name,{'href':App.createUrl(self.name),'title':self.title,'text':self.name.capitalize()});}},open:function(action,params){var self=this;try{var elements=self[action+'Action'](params);if(elements!==undefined){self.el.empty();self.el.adopt(elements);}
App.getBlock('navigation').activate(self.name);self.fireEvent('opened');}
catch(e){self.errorAction(e);self.fireEvent('error');}},openUrl:function(url){if(History.getPath()!=url)
History.push(url);},errorAction:function(e){p('Error, action not found',e);},getName:function(){return this.name},show:function(){this.el.addClass('active');},hide:function(){this.el.removeClass('active');},toElement:function(){return this.el}});var Page={};

// /root/.xbmc/addons/service.downloadmanager.InternetPVR/CouchPotatoServer/couchpotato/static/scripts/block.js:1401311743
var BlockBase=new Class({Implements:[Options,Events],options:{},initialize:function(parent,options){var self=this;self.setOptions(options);self.page=parent;self.create();},create:function(){this.el=new Element('div.block');},getParent:function(){return this.page},hide:function(){this.el.hide();},show:function(){this.el.show();},toElement:function(){return this.el}});var Block=BlockBase;

// /root/.xbmc/addons/service.downloadmanager.InternetPVR/CouchPotatoServer/couchpotato/static/scripts/block/navigation.js:1401311743
Block.Navigation=new Class({Extends:BlockBase,create:function(){var self=this;self.el=new Element('div.navigation').adopt(self.foldout=new Element('a.foldout.icon2.menu',{'events':{'click':self.toggleMenu.bind(self)}}).grab(new Element('span.overlay')),self.logo=new Element('a.logo',{'text':'CouchPotato','href':App.createUrl('')}),self.nav=new Element('ul'),self.backtotop=new Element('a.backtotop',{'text':'back to top','events':{'click':function(){window.scroll(0,0)}},'tween':{'duration':100}}));new ScrollSpy({min:400,onLeave:function(){self.backtotop.fade('out')},onEnter:function(){self.backtotop.fade('in')}});self.nav.addEvents({'click:relay(a)':function(){if($(document.body).getParent().hasClass('menu_shown'))
self.toggleMenu();}})},addTab:function(name,tab){var self=this;return new Element('li.tab_'+(name||'unknown')).grab(new Element('a',tab)).inject(self.nav)},toggleMenu:function(){var self=this,body=$(document.body),html=body.getParent();if(!self.added){new Element('li.separator').inject(self.nav);body.getElements('.header .more_menu.menu li a, .header .more_menu.menu li span.separator').each(function(el,nr){if(nr<=2)return;if(el.get('tag')=='a')
self.nav.grab(new Element('li').grab(el.clone().cloneEvents(el)));else
self.nav.grab(new Element('li.separator'));});self.added=true;}
html.toggleClass('menu_shown');},activate:function(name){var self=this;self.nav.getElements('.active').removeClass('active');self.nav.getElements('.tab_'+name).addClass('active');}});

// /root/.xbmc/addons/service.downloadmanager.InternetPVR/CouchPotatoServer/couchpotato/static/scripts/block/footer.js:1401311742
Block.Footer=new Class({Extends:BlockBase,create:function(){var self=this;self.el=new Element('div.footer');}});

// /root/.xbmc/addons/service.downloadmanager.InternetPVR/CouchPotatoServer/couchpotato/static/scripts/block/menu.js:1401311743
Block.Menu=new Class({Extends:BlockBase,options:{'class':'menu'},create:function(){var self=this;self.el=new Element('div',{'class':'more_menu '+self.options['class']}).adopt(self.wrapper=new Element('div.wrapper').adopt(self.more_option_ul=new Element('ul')),self.button=new Element('a.button'+(self.options.button_class?'.'+self.options.button_class:''),{'events':{'click':function(){self.el.toggleClass('show');self.fireEvent(self.el.hasClass('show')?'open':'close');if(self.el.hasClass('show')){self.el.addEvent('outerClick',self.removeOuterClick.bind(self));this.addEvent('outerClick',function(e){if(e.target.get('tag')!='input')
self.removeOuterClick()})}
else
self.removeOuterClick()}}}))},removeOuterClick:function(){var self=this;self.el.removeClass('show');self.el.removeEvents('outerClick');self.button.removeEvents('outerClick');},addLink:function(tab,position){var self=this;return new Element('li').adopt(tab).inject(self.more_option_ul,position||'bottom');}});

// /root/.xbmc/addons/service.downloadmanager.InternetPVR/CouchPotatoServer/couchpotato/static/scripts/page/home.js:1401311743
Page.Home=new Class({Extends:PageBase,name:'home',title:'Manage new stuff for things and such',indexAction:function(){var self=this;if(self.soon_list){self.available_list.update();self.late_list.update();return;}
self.chain=new Chain();self.chain.chain(self.createAvailable.bind(self),self.createSoon.bind(self),self.createSuggestions.bind(self),self.createLate.bind(self));self.chain.callChain();},createAvailable:function(){var self=this;self.available_list=new MovieList({'navigation':false,'identifier':'snatched','load_more':false,'view':'list','actions':[MA.IMDB,MA.Trailer,MA.Release,MA.Refresh,MA.Delete],'title':'Snatched & Available','description':'These movies have been snatched or have finished downloading','on_empty_element':new Element('div').adopt(new Element('h2',{'text':'Snatched & Available'}),new Element('span',{'html':'No snatched movies or anything!? Damn.. <a>Maybe add a movie.</a>','events':{'click':function(){$(document.body).getElement('.search_form input').focus();}}})),'filter':{'release_status':'snatched,seeding,missing,available,downloaded'},'limit':null,'onLoaded':function(){self.chain.callChain();},'onMovieAdded':function(notification){var after_search=function(data){if(notification.data.id!=data.data.id)return;self.available_list.update();App.off('movie.searcher.ended',after_search);}
App.on('movie.searcher.ended',after_search);}});$(self.available_list).inject(self.el);},createSoon:function(){var self=this;self.soon_list=new MovieList({'navigation':false,'identifier':'soon','limit':12,'title':'Available soon','description':'These are being searched for and should be available soon as they will be released on DVD in the next few weeks.','filter':{'random':true},'actions':[MA.IMDB,MA.Refresh],'load_more':false,'view':'thumbs','force_view':true,'api_call':'dashboard.soon','onLoaded':function(){self.chain.callChain();}});self.soon_list.addEvent('loaded',function(){var images=$(self.soon_list).getElements('.poster'),timer,highest=100;images.each(function(img_container){img_container.getElements('img').addEvent('load',function(){var img=this,height=img.getSize().y;if(!highest||highest<height){highest=height;if(timer)clearTimeout(timer);timer=(function(){images.setStyle('height',highest);}).delay(50);}});});$(window).addEvent('resize',function(){if(timer)clearTimeout(timer);timer=(function(){var highest=100;images.each(function(img_container){var img=img_container.getElement('img');if(!img)return
var height=img.getSize().y;if(!highest||highest<height)
highest=height;});images.setStyle('height',highest);}).delay(300);});});$(self.soon_list).inject(self.el);},createSuggestions:function(){var self=this;self.suggestion_list=new SuggestList({'onLoaded':function(){self.chain.callChain();}});$(self.suggestion_list).inject(self.el);},createLate:function(){var self=this;self.late_list=new MovieList({'navigation':false,'identifier':'late','limit':50,'title':'Still not available','description':'Try another quality profile or maybe add more providers in <a href="'+App.createUrl('settings/searcher/providers/')+'">Settings</a>.','filter':{'late':true},'loader':false,'load_more':false,'view':'list','actions':[MA.IMDB,MA.Trailer,MA.Edit,MA.Refresh,MA.Delete],'api_call':'dashboard.soon','onLoaded':function(){self.chain.callChain();}});$(self.late_list).inject(self.el);}});

// /root/.xbmc/addons/service.downloadmanager.InternetPVR/CouchPotatoServer/couchpotato/static/scripts/page/wanted.js:1401311743
Page.Wanted=new Class({Extends:PageBase,name:'wanted',title:'Gimmy gimmy gimmy!',folder_browser:null,indexAction:function(){var self=this;if(!self.wanted){self.manual_search=new Element('a',{'title':'Force a search for the full wanted list','text':'Search all wanted','events':{'click':self.doFullSearch.bind(self,true)}});self.scan_folder=new Element('a',{'title':'Scan a folder and rename all movies in it','text':'Manual folder scan','events':{'click':self.scanFolder.bind(self)}});self.wanted=new MovieList({'identifier':'wanted','status':'active','actions':[MA.IMDB,MA.Trailer,MA.Release,MA.Edit,MA.Refresh,MA.Readd,MA.Delete],'add_new':true,'menu':[self.manual_search,self.scan_folder],'on_empty_element':App.createUserscriptButtons().addClass('empty_wanted')});$(self.wanted).inject(self.el);self.startProgressInterval.delay(4000,self);}},doFullSearch:function(){var self=this;if(!self.search_in_progress){Api.request('movie.searcher.full_search');self.startProgressInterval();}},startProgressInterval:function(){var self=this;var start_text=self.manual_search.get('text');self.progress_interval=setInterval(function(){if(self.search_progress&&self.search_progress.running)return;self.search_progress=Api.request('movie.searcher.progress',{'onComplete':function(json){self.search_in_progress=true;if(!json.movie){clearInterval(self.progress_interval);self.search_in_progress=false;self.manual_search.set('text',start_text);}
else{var progress=json.movie;self.manual_search.set('text','Searching.. ('+(((progress.total-progress.to_go)/progress.total)*100).round()+'%)');}}});},1000);},scanFolder:function(e){(e).stop();var self=this;var options={'name':'Scan_folder'}
if(!self.folder_browser){self.folder_browser=new Option['Directory']("Scan","folder","",options);self.folder_browser.save=function(){var folder=self.folder_browser.getValue();Api.request('renamer.scan',{'data':{'base_folder':folder,},});};self.folder_browser.inject(self.el,'top');self.folder_browser.fireEvent('injected');self.folder_browser.directory_inlay.hide();self.folder_browser.el.removeChild(self.folder_browser.el.firstChild);self.folder_browser.showBrowser();self.folder_browser.browser.getElements('.clear.button').hide();self.folder_browser.save_button.text="Select";self.folder_browser.browser.style.zIndex=1000;}
else{self.folder_browser.showBrowser();}}});

// /root/.xbmc/addons/service.downloadmanager.InternetPVR/CouchPotatoServer/couchpotato/static/scripts/page/settings.js:1401311743
Page.Settings=new Class({Extends:PageBase,name:'settings',title:'Change settings.',wizard_only:false,tabs:{},lists:{},current:'about',has_tab:false,open:function(action,params){var self=this;self.action=action=='index'?self.default_action:action;self.params=params;if(!self.data)
self.getData(self.create.bind(self));else{self.openTab(action);}
App.getBlock('navigation').activate(self.name);},openTab:function(action){var self=this;var action=(action=='index'?'about':action)||self.action;if(self.current)
self.toggleTab(self.current,true);var tab=self.toggleTab(action);self.current=tab==self.tabs.general?'general':action;},toggleTab:function(tab_name,hide){var self=this;var a=hide?'removeClass':'addClass';var c='active';var t=self.tabs[tab_name]||self.tabs[self.action]||self.tabs.general;var subtab=null;Object.each(self.params,function(param,subtab_name){subtab=subtab_name;});self.el.getElements('li.'+c+' , .tab_content.'+c).each(function(active){active.removeClass(c);});if(t.subtabs[subtab]){t.tab[a](c);t.subtabs[subtab].tab[a](c);t.subtabs[subtab].content[a](c);if(!hide)
t.subtabs[subtab].content.fireEvent('activate');}
else{t.tab[a](c);t.content[a](c);if(!hide)
t.content.fireEvent('activate');}
return t},getData:function(onComplete){var self=this;if(onComplete)
Api.request('settings',{'useSpinner':true,'spinnerOptions':{'target':self.el},'onComplete':function(json){self.data=json;onComplete(json);}});return self.data;},getValue:function(section,name){var self=this;try{return self.data.values[section][name];}
catch(e){return''}},showAdvanced:function(){var self=this;var c=self.advanced_toggle.checked?'addClass':'removeClass';self.el[c]('show_advanced');Cookie.write('advanced_toggle_checked',+self.advanced_toggle.checked,{'duration':365});},sortByOrder:function(a,b){return(a.order||100)-(b.order||100)},create:function(json){var self=this;self.tabs_container=new Element('ul.tabs');self.containers=new Element('form.uniForm.containers').adopt(new Element('label.advanced_toggle').adopt(new Element('span',{'text':'Show advanced settings'}),self.advanced_toggle=new Element('input[type=checkbox].inlay',{'checked':+Cookie.read('advanced_toggle_checked'),'events':{'change':self.showAdvanced.bind(self)}})));self.showAdvanced();new Form.Check(self.advanced_toggle);var options=[];Object.each(json.options,function(section,section_name){section['section_name']=section_name;options.include(section);});options.stableSort(self.sortByOrder).each(function(section){var section_name=section.section_name;section.groups.stableSort(self.sortByOrder).each(function(group){if(group.hidden)return;if(self.wizard_only&&!group.wizard)
return;if(!self.tabs[group.tab]||!self.tabs[group.tab].groups)
self.createTab(group.tab,{});var content_container=self.tabs[group.tab].content;if(group.subtab){if(!self.tabs[group.tab].subtabs[group.subtab])
self.createSubTab(group.subtab,group,self.tabs[group.tab],group.tab);content_container=self.tabs[group.tab].subtabs[group.subtab].content}
if(group.list&&!self.lists[group.list]){self.lists[group.list]=self.createList(content_container);}
if(!self.tabs[group.tab].groups[group.name])
self.tabs[group.tab].groups[group.name]=self.createGroup(group).inject(group.list?self.lists[group.list]:content_container).addClass('section_'+section_name);if(group.type&&group.type=='list'){if(!self.lists[group.name])
self.lists[group.name]=self.createList(content_container);else
self.lists[group.name].inject(self.tabs[group.tab].groups[group.name]);}
group.options.stableSort(self.sortByOrder).each(function(option){if(option.hidden)return;var class_name=(option.type||'string').capitalize();var input=new Option[class_name](section_name,option.name,self.getValue(section_name,option.name),option);input.inject(self.tabs[group.tab].groups[group.name]);input.fireEvent('injected');});});});setTimeout(function(){self.el.adopt(self.tabs_container,self.containers);self.fireEvent('create');self.openTab();},0);},createTab:function(tab_name,tab){var self=this;if(self.tabs[tab_name]&&self.tabs[tab_name].tab)
return self.tabs[tab_name].tab;var label=tab.label||(tab.name||tab_name).capitalize();var tab_el=new Element('li.t_'+tab_name).adopt(new Element('a',{'href':App.createUrl(self.name+'/'+tab_name),'text':label}).adopt()).inject(self.tabs_container);if(!self.tabs[tab_name])
self.tabs[tab_name]={'label':label};self.tabs[tab_name]=Object.merge(self.tabs[tab_name],{'tab':tab_el,'subtabs':{},'content':new Element('div.tab_content.tab_'+tab_name).inject(self.containers),'groups':{}});return self.tabs[tab_name]},createSubTab:function(tab_name,tab,parent_tab,parent_tab_name){var self=this;if(parent_tab.subtabs[tab_name])
return parent_tab.subtabs[tab_name];if(!parent_tab.subtabs_el)
parent_tab.subtabs_el=new Element('ul.subtabs').inject(parent_tab.tab);var label=tab.subtab_label||tab_name.replace('_',' ').capitalize();var tab_el=new Element('li.t_'+tab_name).adopt(new Element('a',{'href':App.createUrl(self.name+'/'+parent_tab_name+'/'+tab_name),'text':label}).adopt()).inject(parent_tab.subtabs_el);if(!parent_tab.subtabs[tab_name])
parent_tab.subtabs[tab_name]={'label':label};parent_tab.subtabs[tab_name]=Object.merge(parent_tab.subtabs[tab_name],{'tab':tab_el,'content':new Element('div.tab_content.tab_'+tab_name).inject(self.containers),'groups':{}});return parent_tab.subtabs[tab_name]},createGroup:function(group){if((typeOf(group.description)=='array')){var hint=new Element('span.hint.more_hint',{'html':group.description[0]});createTooltip(group.description[1]).inject(hint,'top');}
else{var hint=new Element('span.hint',{'html':group.description||''})}
return new Element('fieldset',{'class':(group.advanced?'inlineLabels advanced':'inlineLabels')+' group_'+(group.name||'')+' subtab_'+(group.subtab||'')}).grab(new Element('h2',{'text':group.label||(group.name).capitalize()}).grab(hint));},createList:function(content_container){return new Element('div.option_list').grab(new Element('h3',{'text':'Enable another'})).inject(content_container)}});var OptionBase=new Class({Implements:[Options,Events],klass:'textInput',focused_class:'focused',save_on_change:true,initialize:function(section,name,value,options){var self=this;self.setOptions(options);self.section=section;self.name=name;self.value=self.previous_value=value;self.createBase();self.create();self.createHint();self.setAdvanced();self.input.addEvents({'change':self.changed.bind(self),'keyup':self.changed.bind(self)});self.addEvent('injected',self.afterInject.bind(self))},createBase:function(){var self=this;self.el=new Element('div.ctrlHolder.'+self.section+'_'+self.name)},create:function(){},createLabel:function(){var self=this;return new Element('label',{'text':(self.options.label||self.options.name.replace('_',' ')).capitalize()})},setAdvanced:function(){this.el.addClass(this.options.advanced?'advanced':'')},createHint:function(){var self=this;if(self.options.description){if((typeOf(self.options.description)=='array')){var hint=new Element('p.formHint.more_hint',{'html':self.options.description[0]}).inject(self.el);createTooltip(self.options.description[1]).inject(hint,'top');}
else{var hint=new Element('p.formHint',{'html':self.options.description||''}).inject(self.el)}}},afterInject:function(){},changed:function(){var self=this;if(self.getValue()!=self.previous_value){if(self.save_on_change){if(self.changed_timer)clearTimeout(self.changed_timer);self.changed_timer=self.save.delay(300,self);}
self.fireEvent('change')}},save:function(){var self=this;Api.request('settings.save',{'data':{'section':self.section,'name':self.name,'value':self.getValue()},'useSpinner':true,'spinnerOptions':{'target':self.el},'onComplete':self.saveCompleted.bind(self)});},saveCompleted:function(json){var self=this;var sc=json.success?'save_success':'save_failed';self.previous_value=self.getValue();self.el.addClass(sc);(function(){self.el.removeClass(sc);}).delay(3000,self);},setName:function(name){this.name=name;},postName:function(){var self=this;return self.section+'['+self.name+']';},getValue:function(){var self=this;return self.input.get('value');},getSettingValue:function(){return this.value;},inject:function(el,position){this.el.inject(el,position);return this.el;},toElement:function(){return this.el;}});var Option={};Option.String=new Class({Extends:OptionBase,type:'string',create:function(){var self=this;self.el.adopt(self.createLabel(),self.input=new Element('input.inlay',{'type':'text','name':self.postName(),'value':self.getSettingValue(),'placeholder':self.getPlaceholder()}));},getPlaceholder:function(){return this.options.placeholder}});Option.Dropdown=new Class({Extends:OptionBase,create:function(){var self=this;self.el.adopt(self.createLabel(),self.input=new Element('select',{'name':self.postName()}));Object.each(self.options.values,function(value){new Element('option',{'text':value[0],'value':value[1]}).inject(self.input)});self.input.set('value',self.getSettingValue());var dd=new Form.Dropdown(self.input,{'onChange':self.changed.bind(self)});self.input=dd.input;}});Option.Checkbox=new Class({Extends:OptionBase,type:'checkbox',create:function(){var self=this;var randomId='r-'+randomString();self.el.adopt(self.createLabel().set('for',randomId),self.input=new Element('input.inlay',{'name':self.postName(),'type':'checkbox','checked':self.getSettingValue(),'id':randomId}));new Form.Check(self.input);},getValue:function(){var self=this;return+self.input.checked;}});Option.Password=new Class({Extends:Option.String,type:'password',create:function(){var self=this;self.parent();self.input.set('type','password');self.input.addEvent('focus',function(){self.input.set('value','')})}});Option.Bool=new Class({Extends:Option.Checkbox});Option.Enabler=new Class({Extends:Option.Bool,create:function(){var self=this;self.el.adopt(self.input=new Element('input.inlay',{'type':'checkbox','checked':self.getSettingValue(),'id':'r-'+randomString()}));new Form.Check(self.input);},changed:function(){this.parent();this.checkState();},checkState:function(){var self=this,enabled=self.getValue();self.parentFieldset[enabled?'removeClass':'addClass']('disabled');if(self.parentList)
self.parentFieldset.inject(self.parentList.getElement('h3'),enabled?'before':'after');},afterInject:function(){var self=this;self.parentFieldset=self.el.getParent('fieldset').addClass('enabler');self.parentList=self.parentFieldset.getParent('.option_list');self.el.inject(self.parentFieldset,'top');self.checkState()}});Option.Int=new Class({Extends:Option.String});Option.Float=new Class({Extends:Option.Int});Option.Directory=new Class({Extends:OptionBase,type:'span',browser:null,save_on_change:false,use_cache:false,create:function(){var self=this;self.el.adopt(self.createLabel(),self.directory_inlay=new Element('span.directory.inlay',{'events':{'click':self.showBrowser.bind(self)}}).adopt(self.input=new Element('span',{'text':self.getSettingValue()})));self.cached={};},selectDirectory:function(dir){var self=this;self.input.set('text',dir);self.getDirs()},previousDirectory:function(){var self=this;self.selectDirectory(self.getParentDir())},showBrowser:function(){var self=this;if(!self.browser){self.browser=new Element('div.directory_list').adopt(new Element('div.pointer'),new Element('div.actions').adopt(self.back_button=new Element('a.back',{'html':'','events':{'click':self.previousDirectory.bind(self)}}),new Element('label',{'text':'Hidden folders'}).adopt(self.show_hidden=new Element('input[type=checkbox].inlay',{'events':{'change':self.getDirs.bind(self)}}))),self.dir_list=new Element('ul',{'events':{'click:relay(li:not(.empty))':function(e,el){(e).preventDefault();self.selectDirectory(el.get('data-value'))},'mousewheel':function(e){(e).stopPropagation();}}}),new Element('div.actions').adopt(new Element('a.clear.button',{'text':'Clear','events':{'click':function(e){self.input.set('text','');self.hideBrowser(e,true);}}}),new Element('a.cancel',{'text':'Cancel','events':{'click':self.hideBrowser.bind(self)}}),new Element('span',{'text':'or'}),self.save_button=new Element('a.button.save',{'text':'Save','events':{'click':function(e){self.hideBrowser(e,true)}}}))).inject(self.directory_inlay,'before');new Form.Check(self.show_hidden);}
self.initial_directory=self.input.get('text');self.getDirs();self.browser.show();self.el.addEvent('outerClick',self.hideBrowser.bind(self))},hideBrowser:function(e,save){var self=this;(e).preventDefault();if(save)
self.save();else
self.input.set('text',self.initial_directory);self.browser.hide();self.el.removeEvents('outerClick')},fillBrowser:function(json){var self=this;self.data=json;var v=self.getValue();var previous_dir=self.getParentDir();if(v=='')
self.input.set('text',json.home);if(previous_dir!=v&&previous_dir.length>=1&&!json.is_root){var prev_dirname=self.getCurrentDirname(previous_dir);if(previous_dir==json.home)
prev_dirname='Home';else if(previous_dir=='/'&&json.platform=='nt')
prev_dirname='Computer';self.back_button.set('data-value',previous_dir);self.back_button.set('html','&laquo; '+prev_dirname);self.back_button.show()}
else{self.back_button.hide()}
if(self.use_cache)
if(!json)
json=self.cached[v];else
self.cached[v]=json;self.dir_list.empty();if(json.dirs.length>0)
json.dirs.each(function(dir){new Element('li',{'data-value':dir,'text':self.getCurrentDirname(dir)}).inject(self.dir_list)});else
new Element('li.empty',{'text':'Selected folder is empty'}).inject(self.dir_list)},getDirs:function(){var self=this;var c=self.getValue();if(self.cached[c]&&self.use_cache){self.fillBrowser()}
else{Api.request('directory.list',{'data':{'path':c,'show_hidden':+self.show_hidden.checked},'onComplete':self.fillBrowser.bind(self)})}},getParentDir:function(dir){var self=this;if(!dir&&self.data&&self.data.parent)
return self.data.parent;var v=dir||self.getValue();var sep=Api.getOption('path_sep');var dirs=v.split(sep);if(dirs.pop()=='')
dirs.pop();return dirs.join(sep)+sep},getCurrentDirname:function(dir){var dir_split=dir.split(Api.getOption('path_sep'));return dir_split[dir_split.length-2]||Api.getOption('path_sep')},getValue:function(){var self=this;return self.input.get('text');}});Option.Directories=new Class({Extends:Option.String,directories:[],delimiter:'::',afterInject:function(){var self=this;self.el.setStyle('display','none');self.directories=[];self.getValue().split(self.delimiter).each(function(value){self.addDirectory(value);});self.addDirectory();},addDirectory:function(value){var self=this;var has_empty=false;self.directories.each(function(dir){if(!dir.getValue())
has_empty=true;});if(has_empty)return;var dir=new Option.Directory(self.section,self.name,value||'',self.options);var parent=self.el.getParent('fieldset');var dirs=parent.getElements('.multi_directory');if(dirs.length==0)
$(dir).inject(parent);else
$(dir).inject(dirs.getLast(),'after');dir.save=self.saveItems.bind(self);$(dir).getElement('label').set('text','Movie Folder');$(dir).getElement('.formHint').destroy();$(dir).addClass('multi_directory');if(!value)
$(dir).addClass('is_empty');new Element('a.icon2.delete',{'events':{'click':self.delItem.bind(self,dir)}}).inject(dir);self.directories.include(dir);},delItem:function(dir){var self=this;self.directories.erase(dir);$(dir).destroy();self.saveItems();self.addDirectory();},saveItems:function(){var self=this;var dirs=[];self.directories.each(function(dir){if(dir.getValue()){$(dir).removeClass('is_empty');dirs.include(dir.getValue());}
else
$(dir).addClass('is_empty');});self.input.set('value',dirs.join(self.delimiter));self.input.fireEvent('change');self.addDirectory();}});Option.Choice=new Class({Extends:Option.String,afterInject:function(){var self=this;self.tags=[];self.replaceInput();self.select=new Element('select').adopt(new Element('option[text=Add option]')).inject(self.tag_input,'after');var o=self.options.options;Object.each(o.choices,function(label,choice){new Element('option',{'text':label,'value':o.pre+choice+o.post}).inject(self.select);});self.select=new Form.Dropdown(self.select,{'onChange':self.addSelection.bind(self)});},replaceInput:function(){var self=this;self.initialized=self.initialized?self.initialized+1:1;var value=self.getValue();var matches=value.match(/<([^>]*)>/g);self.tag_input=new Element('ul.inlay',{'events':{'click':function(e){if(e.target==self.tag_input){var input=self.tag_input.getElement('li:last-child input');input.fireEvent('focus');input.focus();input.setCaretPosition(input.get('value').length);}
self.el.addEvent('outerClick',function(){self.reset();self.el.removeEvents('outerClick');})}}}).inject(self.input,'after');self.el.addClass('tag_input');var mtches=[];if(matches)
matches.each(function(match,mnr){var pos=value.indexOf(match),msplit=[value.substr(0,pos),value.substr(pos,match.length),value.substr(pos+match.length)];msplit.each(function(matchsplit,snr){if(msplit.length-1==snr){value=matchsplit;if(matches.length-1==mnr)
mtches.append([value]);return;}
mtches.append([value==matchsplit?match:matchsplit]);});});if(mtches.length==0&&value!='')
mtches.include(value);mtches.each(self.addTag.bind(self));self.addLastTag();self.sortable=new Sortables(self.tag_input,{'revert':true,'handle':'','opacity':0.5,'onComplete':function(){self.setOrder();self.reset();}});var input_group=self.tag_input.getParent('.tab_content');input_group.addEvent('activate',self.setAllWidth.bind(self));},addLastTag:function(){if(this.tag_input.getElement('li.choice:last-child')||!this.tag_input.getElement('li'))
this.addTag('');},addTag:function(tag){var self=this;tag=new Option.Choice.Tag(tag,{'onChange':self.setOrder.bind(self),'onBlur':function(){self.addLastTag();},'onGoLeft':function(){self.goLeft(this)},'onGoRight':function(){self.goRight(this)}});$(tag).inject(self.tag_input);if(self.initialized>1)
tag.setWidth();else
(function(){tag.setWidth();}).delay(10,self);self.tags.include(tag);return tag;},goLeft:function(from_tag){var self=this;from_tag.blur();var prev_index=self.tags.indexOf(from_tag)-1;if(prev_index>=0)
self.tags[prev_index].selectFrom('right');else
from_tag.focus();},goRight:function(from_tag){var self=this;from_tag.blur();var next_index=self.tags.indexOf(from_tag)+1;if(next_index<self.tags.length)
self.tags[next_index].selectFrom('left');else
from_tag.focus();},setOrder:function(){var self=this;var value='';self.tag_input.getElements('li').each(function(el){value+=el.getElement('span').get('text');});self.addLastTag();self.input.set('value',value);self.input.fireEvent('change');self.setAllWidth();},addSelection:function(){var self=this;var tag=self.addTag(self.el.getElement('.selection input').get('value'));self.sortable.addItems($(tag));self.setOrder();self.setAllWidth();},reset:function(){var self=this;self.tag_input.destroy();self.sortable.detach();self.replaceInput();self.setAllWidth();},setAllWidth:function(){var self=this;self.tags.each(function(tag){tag.setWidth.delay(10,tag);});}});Option.Choice.Tag=new Class({Implements:[Options,Events],options:{'pre':'<','post':'>'},initialize:function(tag,options){var self=this;self.setOptions(options);self.tag=tag;self.is_choice=tag.substr(0,1)==self.options.pre&&tag.substr(-1)==self.options.post;self.create();},create:function(){var self=this;self.el=new Element('li',{'class':self.is_choice?'choice':'','styles':{'border':0},'events':{'mouseover':!self.is_choice?self.fireEvent.bind(self,'focus'):function(){}}}).adopt(self.input=new Element(self.is_choice?'span':'input',{'text':self.tag,'value':self.tag,'styles':{'width':0},'events':{'keyup':self.is_choice?null:function(e){var current_caret_pos=self.input.getCaretPosition();if(e.key=='left'&&current_caret_pos==self.last_caret_pos){self.fireEvent('goLeft');}
else if(e.key=='right'&&self.last_caret_pos===current_caret_pos){self.fireEvent('goRight');}
self.last_caret_pos=self.input.getCaretPosition();self.setWidth();self.fireEvent('change');},'focus':self.fireEvent.bind(self,'focus'),'blur':self.fireEvent.bind(self,'blur')}}),self.span=!self.is_choice?new Element('span',{'text':self.tag}):null,self.del_button=new Element('a.delete',{'events':{'click':self.del.bind(self)}}));self.addEvent('focus',self.setWidth.bind(self));},blur:function(){var self=this;self.input.blur();self.selected=false;self.el.removeClass('selected');self.input.removeEvents('outerClick');},focus:function(){var self=this;if(!self.is_choice){this.input.focus();}
else{if(self.selected)return;self.selected=true;self.el.addClass('selected');self.input.addEvent('outerClick',self.blur.bind(self));var temp_input=new Element('input',{'events':{'keydown':function(e){e.stop();if(e.key=='right'){self.fireEvent('goRight');this.destroy();}
else if(e.key=='left'){self.fireEvent('goLeft');this.destroy();}
else if(e.key=='backspace'){self.del();this.destroy();self.fireEvent('goLeft');}}},'styles':{'height':0,'width':0,'position':'absolute','top':-200}});self.el.adopt(temp_input);temp_input.focus();}},selectFrom:function(direction){var self=this;if(!direction||self.is_choice){self.focus();}
else{self.focus();var position=direction=='left'?0:self.input.get('value').length;self.input.setCaretPosition(position);}},setWidth:function(){var self=this;if(self.span&&self.input){self.span.set('text',self.input.get('value'));self.input.setStyle('width',self.span.getSize().x+2);}},del:function(){var self=this;self.el.destroy();self.fireEvent('change');},getValue:function(){return this.span.get('text');},toElement:function(){return this.el;}});Option.Combined=new Class({Extends:Option.String,afterInject:function(){var self=this;self.fieldset=self.input.getParent('fieldset');self.combined_list=new Element('div.combined_table').inject(self.fieldset.getElement('h2'),'after');self.values={};self.inputs={};self.items=[];self.labels={};self.descriptions={};self.options.combine.each(function(name){self.inputs[name]=self.fieldset.getElement('input[name='+self.section+'['+name+']]');var values=self.inputs[name].get('value').split(',');values.each(function(value,nr){if(!self.values[nr])self.values[nr]={};self.values[nr][name]=value.trim();});self.inputs[name].getParent('.ctrlHolder').setStyle('display','none');self.inputs[name].addEvent('change',self.addEmpty.bind(self))});var head=new Element('div.head').inject(self.combined_list);Object.each(self.inputs,function(input,name){self.labels[name]=input.getPrevious().get('text');self.descriptions[name]=(_in=input.getNext())?_in.get('text'):'';new Element('abbr',{'class':name,'text':self.labels[name],'title':self.descriptions[name]}).inject(head)});Object.each(self.values,function(item){self.createItem(item);});self.addEmpty();},add_empty_timeout:0,addEmpty:function(){var self=this;if(self.add_empty_timeout)clearTimeout(self.add_empty_timeout);var has_empty=0;self.items.each(function(ctrl_holder){var empty_count=0;self.options.combine.each(function(name){var input=ctrl_holder.getElement('input.'+name);if(input.get('value')==''||input.get('type')=='checkbox')
empty_count++});has_empty+=(empty_count==self.options.combine.length)?1:0;ctrl_holder[(empty_count==self.options.combine.length)?'addClass':'removeClass']('is_empty');});if(has_empty>0)return;self.add_empty_timeout=setTimeout(function(){self.createItem({'use':true});},10);},createItem:function(values){var self=this;var item=new Element('div.ctrlHolder').inject(self.combined_list),value_count=0,value_empty=0;self.options.combine.each(function(name){var value=values[name]||'';if(name.indexOf('use')!=-1){var checkbox=new Element('input[type=checkbox].inlay.'+name,{'checked':+value,'events':{'click':self.saveCombined.bind(self),'change':self.saveCombined.bind(self)}}).inject(item);new Form.Check(checkbox);}
else{value_count++;new Element('input[type=text].inlay.'+name,{'value':value,'placeholder':self.labels[name]||name,'events':{'keyup':self.saveCombined.bind(self),'change':self.saveCombined.bind(self)}}).inject(item);if(!value)
value_empty++;}});item[value_empty==value_count?'addClass':'removeClass']('is_empty');new Element('a.icon2.delete',{'events':{'click':self.deleteCombinedItem.bind(self)}}).inject(item);self.items.include(item);},saveCombined:function(){var self=this;var temp={};self.items.each(function(item,nr){self.options.combine.each(function(name){var input=item.getElement('input.'+name);if(item.hasClass('is_empty'))return;if(!temp[name])temp[name]=[];temp[name][nr]=input.get('type')=='checkbox'?+input.get('checked'):input.get('value').trim();})});self.options.combine.each(function(name){self.inputs[name].set('value',(temp[name]||[]).join(','));self.inputs[name].fireEvent('change');});self.addEmpty()},deleteCombinedItem:function(e){var self=this;(e).preventDefault();var item=e.target.getParent();self.items.erase(item);item.destroy();self.saveCombined();}});var createTooltip=function(description){var tip=new Element('div.tooltip',{'events':{'mouseenter':function(){tip.addClass('shown')},'mouseleave':function(){tip.removeClass('shown')}}}).adopt(new Element('a.icon2.info'),new Element('div.tip',{'html':description}));return tip;}

// /root/.xbmc/addons/service.downloadmanager.InternetPVR/CouchPotatoServer/couchpotato/static/scripts/page/about.js:1401311743
var AboutSettingTab=new Class({tab:'',content:'',initialize:function(){var self=this;App.addEvent('load',self.addSettings.bind(self))},addSettings:function(){var self=this;self.settings=App.getPage('Settings');self.settings.addEvent('create',function(){var tab=self.settings.createTab('about',{'label':'About','name':'about'});self.tab=tab.tab;self.content=tab.content;self.createAbout();});self.settings.default_action='about';},createAbout:function(){var self=this;var millennium=new Date(2008,7,16),today=new Date(),one_day=1000*60*60*24;self.settings.createGroup({'label':'About This CouchPotato','name':'variables'}).inject(self.content).adopt(new Element('dl.info').adopt(new Element('dt[text=Version]'),self.version_text=new Element('dd.version',{'text':'Getting version...','events':{'click':App.checkForUpdate.bind(App,function(json){self.fillVersion(json.info)}),'mouseenter':function(){this.set('text','Check for updates')},'mouseleave':function(){self.fillVersion(Updater.getInfo())}}}),new Element('dt[text=Updater]'),self.updater_type=new Element('dd.updater'),new Element('dt[text=ID]'),new Element('dd',{'text':App.getOption('pid')}),new Element('dt[text=Directories]'),new Element('dd',{'text':App.getOption('app_dir')}),new Element('dd',{'text':App.getOption('data_dir')}),new Element('dt[text=Startup Args]'),new Element('dd',{'html':App.getOption('args')}),new Element('dd',{'html':App.getOption('options')})));if(!self.fillVersion(Updater.getInfo()))
Updater.addEvent('loaded',self.fillVersion.bind(self));self.settings.createGroup({'name':'Help Support CouchPotato'}).inject(self.content).adopt(new Element('div.usenet').adopt(new Element('span',{'text':'Help support CouchPotato and save some money for yourself by signing up for an account at'}),new Element('a',{'href':'https://usenetserver.com/partners/?a_aid=couchpotato&a_bid=3f357c6f','target':'_blank','text':'UsenetServer'}),new Element('span[text=or]'),new Element('a',{'href':'http://www.newshosting.com/partners/?a_aid=couchpotato&a_bid=a0b022df','target':'_blank','text':'Newshosting'}),new Element('span',{'text':'. For as low as $7.95 per month, youll get:'}),new Element('ul').adopt(new Element('li',{'text':Math.ceil((today.getTime()-millennium.getTime())/(one_day))+" days retention"}),new Element('li[text=No speed or download limits]'),new Element('li[text=Free SSL Encrypted connections]'))),new Element('div.donate',{'html':'Or support me via:'+'<iframe src="https://couchpota.to/donate.html" style="border:none; height: 200px;" scrolling="no"></iframe>'}));},fillVersion:function(json){if(!json)return;var self=this;var date=new Date(json.version.date*1000);self.version_text.set('text',json.version.hash+(json.version.date?' ('+date.toLocaleString()+')':''));self.updater_type.set('text',json.version.type+', '+json.branch);}});window.addEvent('domready',function(){new AboutSettingTab();});

// /root/.xbmc/addons/service.downloadmanager.InternetPVR/CouchPotatoServer/couchpotato/static/scripts/page/manage.js:1401311743
Page.Manage=new Class({Extends:PageBase,name:'manage',title:'Do stuff to your existing movies!',indexAction:function(){var self=this;if(!self.list){self.refresh_button=new Element('a',{'title':'Rescan your library for new movies','text':'Full library refresh','events':{'click':self.refresh.bind(self,true)}});self.refresh_quick=new Element('a',{'title':'Just scan for recently changed','text':'Quick library scan','events':{'click':self.refresh.bind(self,false)}});self.list=new MovieList({'identifier':'manage','filter':{'release_status':'done'},'actions':[MA.IMDB,MA.Trailer,MA.Files,MA.Readd,MA.Edit,MA.Delete],'menu':[self.refresh_button,self.refresh_quick],'on_empty_element':new Element('div.empty_manage').adopt(new Element('div',{'text':'Seems like you don\'t have anything in your library yet.'}),new Element('div',{'text':'Add your existing movie folders in '}).adopt(new Element('a',{'text':'Settings > Manage','href':App.createUrl('settings/manage')})),new Element('div.after_manage',{'text':'When you\'ve done that, hit this button  '}).adopt(new Element('a.button.green',{'text':'Hit me, but not too hard','events':{'click':self.refresh.bind(self,true)}})))});$(self.list).inject(self.el);self.startProgressInterval();}},refresh:function(full){var self=this;if(!self.update_in_progress){Api.request('manage.update',{'data':{'full':+full}});self.startProgressInterval();}},startProgressInterval:function(){var self=this;self.progress_interval=setInterval(function(){if(self.progress_request&&self.progress_request.running)
return;self.update_in_progress=true;self.progress_request=Api.request('manage.progress',{'onComplete':function(json){if(!json||!json.progress){clearInterval(self.progress_interval);self.update_in_progress=false;if(self.progress_container){self.progress_container.destroy();self.list.update();}}
else{var progress=json.progress
if(!self.list.navigation)
return;if(!self.progress_container)
self.progress_container=new Element('div.progress').inject(self.list.navigation,'after');self.progress_container.empty();var sorted_table=self.parseProgress(json.progress)
sorted_table.each(function(folder){var folder_progress=progress[folder]
new Element('div').adopt(new Element('span.folder',{'text':folder+
(folder_progress.eta>0?', '+new Date().increment('second',folder_progress.eta).timeDiffInWords().replace('from now','to go'):'')}),new Element('span.percentage',{'text':folder_progress.total?(((folder_progress.total-folder_progress.to_go)/folder_progress.total)*100).round()+'%':'0%'})).inject(self.progress_container)});}}})},1000);},parseProgress:function(progress_object){var folder,temp_array=[];for(folder in progress_object){if(progress_object.hasOwnProperty(folder)){temp_array.push(folder)}}
return temp_array.stableSort()}});

// /root/.xbmc/addons/service.downloadmanager.InternetPVR/CouchPotatoServer/couchpotato/static/scripts/misc/downloaders.js:1401311743
var DownloadersBase=new Class({Implements:[Events],initialize:function(){var self=this;App.addEvent('load',self.addTestButtons.bind(self));},addTestButtons:function(){var self=this;var setting_page=App.getPage('Settings');setting_page.addEvent('create',function(){Object.each(setting_page.tabs.downloaders.groups,self.addTestButton.bind(self))})},addTestButton:function(fieldset,plugin_name){var self=this,button_name=self.testButtonName(fieldset);if(button_name.contains('Downloaders'))return;new Element('.ctrlHolder.test_button').adopt(new Element('a.button',{'text':button_name,'events':{'click':function(){var button=fieldset.getElement('.test_button .button');button.set('text','Connecting...');Api.request('download.'+plugin_name+'.test',{'onComplete':function(json){button.set('text',button_name);if(json.success){var message=new Element('span.success',{'text':'Connection successful'}).inject(button,'after')}
else{var msg_text='Connection failed. Check logs for details.';if(json.hasOwnProperty('msg'))msg_text=json.msg;var message=new Element('span.failed',{'text':msg_text}).inject(button,'after')}
(function(){message.destroy();}).delay(3000)}});}}})).inject(fieldset);},testButtonName:function(fieldset){var name=String(fieldset.getElement('h2').innerHTML).substring(0,String(fieldset.getElement('h2').innerHTML).indexOf("<span"));return'Test '+name;},});window.Downloaders=new DownloadersBase();